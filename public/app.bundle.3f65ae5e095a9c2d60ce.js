!function(){var e,t,n={54213:function(e,t){"use strict";t.Z={POINT:"POINT",MULTIPOINT:"MULTIPOINT",POLYLINE:"POLYLINE",CIRCLE:"CIRCLE",ELLIPSE:"ELLIPSE"}},45782:function(e,t){"use strict";t.Z={DICOM_SR_DISPLAY_TOOL:"DICOMSRDisplayTool"}},34104:function(e,t,n){"use strict";n.d(t,{J0:function(){return a},_$:function(){return o}});var r="org.ohif.dicom-sr";t.ZP=r;var a="dicom-sr",o="".concat(r,".sopClassHandlerModule.").concat(a)},30798:function(e,t){"use strict";t.Z={NO_NEVER:-1,CANCEL:0,CREATE_REPORT:1,ADD_SERIES:2,SET_STUDY_AND_SERIES:3,NO_NOT_FOR_SERIES:4}},73397:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(32735),a=n(52938),o=n(30798);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return new Promise((function(t,n){var i=void 0;i=e.create({centralize:!0,isDraggable:!1,content:a.Vq,useLastPosition:!1,showOverlay:!0,contentProps:{title:"Provide a name for your report",value:{label:""},noCloseButton:!0,onClose:function(){e.dismiss({id:i}),t({action:o.Z.CANCEL,value:void 0})},actions:[{id:"cancel",text:"Cancel",type:"primary"},{id:"save",text:"Save",type:"secondary"}],onSubmit:function(n){var r=n.action,a=n.value;switch(e.dismiss({id:i}),r.id){case"save":t({action:o.Z.CREATE_REPORT,value:a.label});break;case"cancel":t({action:o.Z.CANCEL,value:void 0})}},body:function(n){var c=n.value,l=n.setValue;return r.createElement("div",{className:"p-4 bg-primary-dark"},r.createElement(a.II,{autoFocus:!0,className:"mt-2 bg-black border-primary-main",type:"text",containerClassName:"mr-2",value:c.label,onChange:function(e){e.persist(),l((function(t){return s(s({},t),{},{label:e.target.value})}))},onKeyPress:function(n){"Enter"===n.key&&(e.dismiss({id:i}),t({action:o.Z.CREATE_REPORT,value:c.label}))}}))}}})}))}},8784:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ee},I:function(){return be}});var r=n(32735),a=n(60216),o=n.n(a),i=n(48710),s=n(38531),c=n(52938),l=n(1358);function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=-1,m=0,p=1,y=2,v=3,h=4,g=5,b={id:"measurementTracking",initial:"idle",context:{trackedStudy:"",trackedSeries:[],ignoredSeries:[],prevTrackedStudy:"",prevTrackedSeries:[],prevIgnoredSeries:[],ignoredSRSeriesForHydration:[],isDirty:!1},states:{off:{type:"final"},idle:{entry:"clearContext",on:{TRACK_SERIES:"promptBeginTracking",SET_TRACKED_SERIES:[{target:"tracking",actions:["setTrackedStudyAndMultipleSeries","setIsDirtyToClean"]}],PROMPT_HYDRATE_SR:{target:"promptHydrateStructuredReport",cond:"hasNotIgnoredSRSeriesForHydration"},RESTORE_PROMPT_HYDRATE_SR:"promptHydrateStructuredReport"}},promptBeginTracking:{invoke:{src:"promptBeginTracking",onDone:[{target:"tracking",actions:["setTrackedStudyAndSeries","setIsDirty"],cond:"shouldSetStudyAndSeries"},{target:"off",cond:"shouldKillMachine"},{target:"idle"}],onError:{target:"idle"}}},tracking:{on:{TRACK_SERIES:[{target:"promptTrackNewStudy",cond:"isNewStudy"},{target:"promptTrackNewSeries",cond:"isNewSeries"}],UNTRACK_SERIES:[{target:"tracking",actions:["removeTrackedSeries","setIsDirty"],cond:"hasRemainingTrackedSeries"},{target:"idle"}],SET_TRACKED_SERIES:[{target:"tracking",actions:["setTrackedStudyAndMultipleSeries"]}],SAVE_REPORT:"promptSaveReport",SET_DIRTY:[{target:"tracking",actions:["setIsDirty"],cond:"shouldSetDirty"},{target:"tracking"}]}},promptTrackNewSeries:{invoke:{src:"promptTrackNewSeries",onDone:[{target:"tracking",actions:["addTrackedSeries","setIsDirty"],cond:"shouldAddSeries"},{target:"tracking",actions:["discardPreviouslyTrackedMeasurements","setTrackedStudyAndSeries","setIsDirty"],cond:"shouldSetStudyAndSeries"},{target:"promptSaveReport",cond:"shouldPromptSaveReport"},{target:"tracking"}],onError:{target:"idle"}}},promptTrackNewStudy:{invoke:{src:"promptTrackNewStudy",onDone:[{target:"tracking",actions:["discardPreviouslyTrackedMeasurements","setTrackedStudyAndSeries","setIsDirty"],cond:"shouldSetStudyAndSeries"},{target:"tracking",actions:["ignoreSeries"],cond:"shouldAddIgnoredSeries"},{target:"promptSaveReport",cond:"shouldPromptSaveReport"},{target:"tracking"}],onError:{target:"idle"}}},promptSaveReport:{invoke:{src:"promptSaveReport",onDone:[{target:"idle",actions:["clearAllMeasurements","showStructuredReportDisplaySetInActiveViewport"],cond:"shouldSaveAndContinueWithSameReport"},{target:"tracking",actions:["discardPreviouslyTrackedMeasurements","setTrackedStudyAndSeries"],cond:"shouldSaveAndStartNewReport"},{target:"tracking"}],onError:{target:"idle"}}},promptHydrateStructuredReport:{invoke:{src:"promptHydrateStructuredReport",onDone:[{target:"tracking",actions:["setTrackedStudyAndMultipleSeries","jumpToFirstMeasurementInActiveViewport","setIsDirtyToClean"],cond:"shouldHydrateStructuredReport"},{target:"idle",actions:["ignoreHydrationForSRSeries"],cond:"shouldIgnoreHydrationForSR"}],onError:{target:"idle"}}}},strict:!0},S={services:{promptBeginTracking:function(e,t){},promptTrackNewStudy:function(e,t){},promptTrackNewSeries:function(e,t){}},actions:{discardPreviouslyTrackedMeasurements:function(e,t){console.log("discardPreviouslyTrackedMeasurements: not implemented")},clearAllMeasurements:function(e,t){console.log("clearAllMeasurements: not implemented")},jumpToFirstMeasurementInActiveViewport:function(e,t){console.warn("jumpToFirstMeasurementInActiveViewport: not implemented")},showStructuredReportDisplaySetInActiveViewport:function(e,t){console.warn("showStructuredReportDisplaySetInActiveViewport: not implemented")},clearContext:(0,l.f0)({trackedStudy:"",trackedSeries:[],ignoredSeries:[],prevTrackedStudy:"",prevTrackedSeries:[],prevIgnoredSeries:[]}),setTrackedStudyAndSeries:(0,l.f0)((function(e,t){return{prevTrackedStudy:e.trackedStudy,prevTrackedSeries:e.trackedSeries.slice(),prevIgnoredSeries:e.ignoredSeries.slice(),trackedStudy:t.data.StudyInstanceUID,trackedSeries:[t.data.SeriesInstanceUID],ignoredSeries:[]}})),setTrackedStudyAndMultipleSeries:(0,l.f0)((function(e,t){var n=t.StudyInstanceUID||t.data.StudyInstanceUID,r=t.SeriesInstanceUIDs||t.data.SeriesInstanceUIDs;return{prevTrackedStudy:e.trackedStudy,prevTrackedSeries:e.trackedSeries.slice(),prevIgnoredSeries:e.ignoredSeries.slice(),trackedStudy:n,trackedSeries:[].concat(u(e.trackedSeries),u(r)),ignoredSeries:[]}})),setIsDirtyToClean:(0,l.f0)((function(e,t){return{isDirty:!1}})),setIsDirty:(0,l.f0)((function(e,t){return{isDirty:!0}})),ignoreSeries:(0,l.f0)((function(e,t){return{prevIgnoredSeries:u(e.ignoredSeries),ignoredSeries:[].concat(u(e.ignoredSeries),[t.data.SeriesInstanceUID])}})),ignoreHydrationForSRSeries:(0,l.f0)((function(e,t){return{ignoredSRSeriesForHydration:[].concat(u(e.ignoredSRSeriesForHydration),[t.data.srSeriesInstanceUID])}})),addTrackedSeries:(0,l.f0)((function(e,t){return{prevTrackedSeries:u(e.trackedSeries),trackedSeries:[].concat(u(e.trackedSeries),[t.data.SeriesInstanceUID])}})),removeTrackedSeries:(0,l.f0)((function(e,t){return{prevTrackedSeries:e.trackedSeries.slice().filter((function(e){return e!==t.SeriesInstanceUID})),trackedSeries:e.trackedSeries.slice().filter((function(e){return e!==t.SeriesInstanceUID}))}}))},guards:{shouldSetDirty:function(e,t){return void 0===t.SeriesInstanceUID||e.trackedSeries.includes(t.SeriesInstanceUID)},shouldKillMachine:function(e,t){return t.data&&t.data.userResponse===f},shouldAddSeries:function(e,t){return t.data&&t.data.userResponse===y},shouldSetStudyAndSeries:function(e,t){return t.data&&t.data.userResponse===v},shouldAddIgnoredSeries:function(e,t){return t.data&&t.data.userResponse===h},shouldPromptSaveReport:function(e,t){return t.data&&t.data.userResponse===p},shouldIgnoreHydrationForSR:function(e,t){return t.data&&t.data.userResponse===m},shouldSaveAndContinueWithSameReport:function(e,t){return t.data&&t.data.userResponse===p&&!0===t.data.isBackupSave},shouldSaveAndStartNewReport:function(e,t){return t.data&&t.data.userResponse===p&&!1===t.data.isBackupSave},shouldHydrateStructuredReport:function(e,t){return t.data&&t.data.userResponse===g},hasRemainingTrackedSeries:function(e,t){return e.trackedSeries.length>1||!e.trackedSeries.includes(t.SeriesInstanceUID)},hasNotIgnoredSRSeriesForHydration:function(e,t){return!e.ignoredSRSeriesForHydration.includes(t.SeriesInstanceUID)},isNewStudy:function(e,t){return!e.ignoredSeries.includes(t.SeriesInstanceUID)&&e.trackedStudy!==t.StudyInstanceUID},isNewSeries:function(e,t){return!e.ignoredSeries.includes(t.SeriesInstanceUID)&&!e.trackedSeries.includes(t.SeriesInstanceUID)}}};function w(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var E=-1,I=0,O=3;function D(e,t){return new Promise((function(n,r){var a=[{id:"prompt-begin-tracking-cancel",type:"cancel",text:"No",value:I},{id:"prompt-begin-tracking-no-do-not-ask-again",type:"secondary",text:"No, do not ask again",value:E},{id:"prompt-begin-tracking-yes",type:"primary",text:"Yes",value:O}];e.show({viewportIndex:t,id:"measurement-tracking-prompt-begin-tracking",type:"info",message:"Track measurements for this series?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(I)}})}))}var x=function(e,t,n){var r=e.servicesManager,a=(e.extensionManager,r.services.UIViewportDialogService),o=n.viewportIndex,i=n.StudyInstanceUID,s=n.SeriesInstanceUID;return new Promise(function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(a,o);case 2:r=e.sent,t({userResponse:r,StudyInstanceUID:i,SeriesInstanceUID:s,viewportIndex:o});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,s,"next",e)}function s(e){w(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}())};function k(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var P=0,C=1,T=2,N=3;function R(e,t){return new Promise((function(n,r){var a=[{type:"cancel",text:"Cancel",value:P},{type:"secondary",text:"Create new report",value:C},{type:"primary",text:"Add to existing report",value:T}];e.show({viewportIndex:t,type:"info",message:"Do you want to add this measurement to the existing report?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(P)}})}))}function M(e,t){return new Promise((function(n,r){var a=[{type:"cancel",text:"Cancel",value:P},{type:"secondary",text:"Save",value:C},{type:"primary",text:"Discard",value:N}];e.show({viewportIndex:t,type:"warning",message:"You have existing tracked measurements. What would you like to do with your existing tracked measurements?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(P)}})}))}var A=function(e,t,n){var r=e.servicesManager,a=(e.extensionManager,r.services.UIViewportDialogService),o=n.viewportIndex,i=n.StudyInstanceUID,s=n.SeriesInstanceUID;return new Promise(function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a,o);case 2:if((c=e.sent)!==C){e.next=12;break}if(!t.isDirty){e.next=10;break}return e.next=7,M(a,o);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=N;case 11:c=e.t0;case 12:n({userResponse:c,StudyInstanceUID:i,SeriesInstanceUID:s,viewportIndex:o,isBackupSave:!1});case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,s,"next",e)}function s(e){k(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())};function j(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var U=0,L=1,_=3,V=4;function q(e,t){return new Promise((function(n,r){var a=[{type:"cancel",text:"No",value:U},{type:"secondary",text:"No, do not ask again for this series",value:V},{type:"primary",text:"Yes",value:_}];e.show({viewportIndex:t,type:"info",message:"Track measurements for this series?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(U)}})}))}function F(e,t){return new Promise((function(n,r){var a=[{type:"cancel",text:"Cancel",value:U},{type:"secondary",text:"No, discard previously tracked series & measurements",value:_},{type:"primary",text:"Yes",value:L}];e.show({viewportIndex:t,type:"warning",message:"Measurements cannot span across multiple studies. Do you want to save your tracked measurements?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(U)}})}))}var B=function(e,t,n){var r=e.servicesManager,a=(e.extensionManager,r.services.UIViewportDialogService),o=n.viewportIndex,i=n.StudyInstanceUID,s=n.SeriesInstanceUID;return new Promise(function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(a,o);case 2:if((c=e.sent)!==_){e.next=12;break}if(!t.isDirty){e.next=10;break}return e.next=7,F(a,o);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=_;case 11:c=e.t0;case 12:n({userResponse:c,StudyInstanceUID:i,SeriesInstanceUID:s,viewportIndex:o,isBackupSave:!1});case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){j(o,r,a,i,s,"next",e)}function s(e){j(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())},z=n(81435),H=n(53281);function Z(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Z(o,r,a,i,s,"next",e)}function s(e){Z(o,r,a,i,s,"throw",e)}i(void 0)}))}}function $(){return($=W(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.services,i=o.DisplaySetService,s=o.UINotificationService,c=o.UIDialogService,l=c.create({showOverlay:!0,isDraggable:!1,centralize:!0,content:Y}),e.prev=2,e.next=5,z.Z.storeMeasurements(r,n,["ArrowAnnotate"],a);case 5:return u=e.sent,H.Z.addInstances([u],!0),d=i.getMostRecentDisplaySet(),s.show({title:"Create Report",message:"Measurements saved successfully",type:"success"}),e.abrupt("return",[d]);case 12:e.prev=12,e.t0=e.catch(2),s.show({title:"Create Report",message:e.t0.message||"Failed to store measurements",type:"error"});case 15:return e.prev=15,c.dismiss({id:l}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Y(){return r.createElement("div",{className:"text-primary-active"},"Loading...")}var G=function(e,t,n,r){return $.apply(this,arguments)},J=n(73397);function K(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e){var t=e.getActiveDisplaySets().filter((function(e){return"SR"===e.Modality})).map((function(e){return e.SeriesNumber}));return Math.max.apply(Math,K(t).concat([4700]))+1}var ee=n(30798);function te(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var ne=function(e,t,n){var r,a,o,i=e.servicesManager,s=e.extensionManager,c=i.services,l=c.UIDialogService,u=c.MeasurementService,d=c.DisplaySetService,f=void 0===n.viewportIndex?n.data.viewportIndex:n.viewportIndex,m=void 0===n.isBackupSave?n.data.isBackupSave:n.isBackupSave,p=null==n||null===(r=n.data)||void 0===r?void 0:r.StudyInstanceUID,y=null==n||null===(a=n.data)||void 0===a?void 0:a.SeriesInstanceUID,v=t.trackedStudy,h=t.trackedSeries;return new Promise(function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,a,c,g,b,S,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.Z)(l);case 2:if((r=e.sent).action!==ee.Z.CREATE_REPORT){e.next=15;break}return a=s.getDataSources(),c=a[0],g=u.getMeasurements(),b=g.filter((function(e){return v===e.referenceStudyUID&&h.includes(e.referenceSeriesUID)})),S=void 0===r.value||""===r.value?"Research Derived Series":r.value,w=Q(d),e.next=12,G(i,c,b,{SeriesDescription:S,SeriesNumber:w});case 12:o=e.sent,e.next=16;break;case 15:r.action,ee.Z.CANCEL;case 16:t({userResponse:r.action,createdDisplaySetInstanceUIDs:o,StudyInstanceUID:p,SeriesInstanceUID:y,viewportIndex:f,isBackupSave:m});case 17:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){te(o,r,a,i,s,"next",e)}function s(e){te(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}())},re=n(82656),ae=n.n(re),oe=n(39016);function ie(e,t,n,r,a,o,i){var s=function(e){var n=t.VALUE_TYPES,r=n.POLYLINE,a=n.ELLIPSE,o=n.POINT;return{Length:r,EllipticalRoi:a,Bidirectional:n.BIDIRECTIONAL,ArrowAnnotate:o}[e]};switch(e){case"Length":return function(e){return function(e,t,n,r,a,o,i){var s=e.toolType||e.toolName,c=se(o,r,t),l=e.handles,u=e.label,d=[];return Object.keys(l).map((function(e){if(["start","end"].includes(e)){var t={};l[e].x&&(t.x=l[e].x),l[e].y&&(t.y=l[e].y),d.push(t)}})),{id:e.id,SOPInstanceUID:t,FrameOfReferenceUID:n,referenceSeriesUID:r,referenceStudyUID:a,displaySetInstanceUID:c,description:e.description,unit:e.unit,length:e.length,type:i(s),points:d,label:u}}(e,r,a,o,i,n,s)};case"Bidirectional":return function(e){return function(e,t,n,r,a,o,i){var s=e.toolType||e.toolName,c=se(o,r,t),l=e.handles,u=e.label,d=[l.start,l.end],f=[l.perpendicularStart,l.perpendicularEnd];return{id:e.id,SOPInstanceUID:t,FrameOfReferenceUID:n,referenceSeriesUID:r,referenceStudyUID:a,displaySetInstanceUID:c,description:e.description,unit:e.unit,shortestDiameter:e.shortestDiameter,longestDiameter:e.longestDiameter,type:i(s),points:{longAxis:d,shortAxis:f},label:u}}(e,r,a,o,i,n,s)};case"EllipticalRoi":return function(e){return function(e,t,n,r,a,o,i){var s=e.toolType||e.toolName,c=se(o,r,t),l=e.handles,u=e.label,d=l.start,f=l.end,m=Math.abs(d.x-f.x)/2,p=Math.abs(d.y-f.y)/2,y=[],v={x:(d.x+f.x)/2,y:(d.y+f.y)/2};m>p?(y.push({x:v.x-m,y:v.y}),y.push({x:v.x+m,y:v.y}),y.push({x:v.x,y:v.y-p}),y.push({x:v.x,y:v.y+p})):(y.push({x:v.x,y:v.y-p}),y.push({x:v.x,y:v.y+p}),y.push({x:v.x-m,y:v.y}),y.push({x:v.x+m,y:v.y}));return{id:e.id,SOPInstanceUID:t,FrameOfReferenceUID:n,referenceSeriesUID:r,referenceStudyUID:a,displaySetInstanceUID:c,description:e.description,unit:e.unit,area:e.cachedStats&&e.cachedStats.area,type:i(s),points:y,label:u}}(e,r,a,o,i,n,s)};case"ArrowAnnotate":return function(e){return function(e,t,n,r,a,o,i){var s=e.toolType||e.toolName,c=se(o,r,t),l=e.handles,u=[];return Object.keys(l).map((function(e){if(["start","end"].includes(e)){var t={};l[e].x&&(t.x=l[e].x),l[e].y&&(t.y=l[e].y),u.push(t)}})),{id:e.id,SOPInstanceUID:t,FrameOfReferenceUID:n,referenceSeriesUID:r,referenceStudyUID:a,displaySetInstanceUID:c,label:e.text,description:e.description,unit:e.unit,text:e.text,type:i(s),points:u}}(e,r,a,o,i,n,s)}}}function se(e,t,n){return e.getDisplaySetForSOPInstanceUID(n,t).displaySetInstanceUID}var ce=n(22737),le=oe.ZP.utils.guid;ae().globalImageIdSpecificToolStateManager;function ue(e,t){var n=e.servicesManager,r=e.extensionManager.getActiveDataSource()[0],a=n.services,o=a.MeasurementService,i=a.DisplaySetService,s=i.getDisplaySetByUID(t),c=o.getSourceMappings("CornerstoneTools","4");if(!c||!c.length)throw new Error("Attempting to hydrate measurements service when no mappings present. This shouldn't be reached.");var l=H.Z.getInstance(s.StudyInstanceUID,s.SeriesInstanceUID,s.SOPInstanceUID),u=ce.j$.Cornerstone.MeasurementReport,d={};s.measurements.forEach((function(e){var t=e.ReferencedSOPInstanceUID,n=e.imageId;d[t]||(d[t]=n)}));var f=u.generateToolState(l),m=c.map((function(e){return e.definition})),p={};Object.keys(f).forEach((function(e){m.includes(e)&&(p[e]=f[e])}));var y,v=[];Object.keys(p).forEach((function(e){p[e].forEach((function(e){var t=d[e.sopInstanceUid];v.includes(t)||v.push(t)}))}));for(var h=[],g=0;g<v.length;g++){var b=v[g],S=cornerstone.metaData.get("instance",b),w=S.SeriesInstanceUID,E=S.StudyInstanceUID;h.includes(w)||h.push(w),y?y!==E&&console.warn("NO SUPPORT FOR SRs THAT HAVE MEASUREMENTS FROM MULTIPLE STUDIES."):y=E}return Object.keys(p).forEach((function(e){p[e].forEach((function(t){var n=d[t.sopInstanceUid];t.id=le();var a,s,c,l,u,f=cornerstone.metaData.get("instance",n),m=f.SOPInstanceUID,p=f.FrameOfReferenceUID,y=f.SeriesInstanceUID,h=f.StudyInstanceUID,g=ie(e,o,i,m,p,y,h),b=o.getSource("CornerstoneTools","4");t.label=(s=(a=t).findingSites,c=void 0===s?[]:s,l=a.finding,(u=c.find((function(e){return"CORNERSTONEFREETEXT"===e.CodeValue})))?u.CodeMeaning:l&&"CORNERSTONEFREETEXT"===l.CodeValue?l.CodeMeaning:void 0),o.addRawMeasurement(b,e,t,g,r),v.includes(n)||v.push(n)}))})),s.isHydrated=!0,{StudyInstanceUID:y,SeriesInstanceUIDs:h}}function de(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var fe=0,me=5;function pe(e,t){return new Promise((function(n,r){var a=[{type:"secondary",text:"No",value:fe},{type:"primary",text:"Yes",value:me}];e.show({viewportIndex:t,type:"info",message:"Do you want to continue tracking measurements for this study?",actions:a,onSubmit:function(t){e.hide(),n(t)},onOutsideClick:function(){e.hide(),n(fe)}})}))}var ye=function(e,t,n){var r=e.servicesManager,a=e.extensionManager,o=r.services,i=o.UIViewportDialogService,s=o.DisplaySetService,c=n.viewportIndex,l=n.displaySetInstanceUID,u=s.getDisplaySetByUID(l);return new Promise(function(){var e,t=(e=regeneratorRuntime.mark((function e(t,o){var s,d,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(i,c);case 2:(s=e.sent)===me&&(console.warn("!! HYDRATING STRUCTURED REPORT"),m=ue({servicesManager:r,extensionManager:a},l),d=m.StudyInstanceUID,f=m.SeriesInstanceUIDs),t({userResponse:s,displaySetInstanceUID:n.displaySetInstanceUID,srSeriesInstanceUID:u.SeriesInstanceUID,viewportIndex:c,StudyInstanceUID:d,SeriesInstanceUIDs:f});case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){de(o,r,a,i,s,"next",e)}function s(e){de(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}())};function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=r.createContext();ge.displayName="TrackedMeasurementsContext";var be=function(){return(0,r.useContext)(ge)},Se="org.ohif.dicom-sr.sopClassHandlerModule.dicom-sr";function we(e,t){var n=e.servicesManager,a=e.extensionManager,o=t.children,l=ve((0,c.O_)(),2),u=l[0],d=l[1],f=u.activeViewportIndex,m=u.viewports,p=Object.assign({},S);p.actions=Object.assign({},p.actions,{jumpToFirstMeasurementInActiveViewport:function(e,t){var r=n.services,a=(r.DisplaySetService,r.MeasurementService),o=e.trackedStudy,i=e.trackedSeries,s=a.getMeasurements().filter((function(e){return o===e.referenceStudyUID&&i.includes(e.referenceSeriesUID)}))[0].id;a.jumpToMeasurement(u.activeViewportIndex,s)},showStructuredReportDisplaySetInActiveViewport:function(e,t){if(t.data.createdDisplaySetInstanceUIDs.length>0){var n=t.data.createdDisplaySetInstanceUIDs[0].displaySetInstanceUID;d.setDisplaysetForViewport({viewportIndex:t.data.viewportIndex,displaySetInstanceUID:n})}},discardPreviouslyTrackedMeasurements:function(e,t){for(var r=n.services.MeasurementService,a=r.getMeasurements().filter((function(t){return e.prevTrackedSeries.includes(t.referenceSeriesUID)})).map((function(e){return e.id})),o=0;o<a.length;o++)r.remove(a[o],"app-source")},clearAllMeasurements:function(e,t){for(var r=n.services.MeasurementService,a=r.getMeasurements().map((function(e){return e.id})),o=0;o<a.length;o++)r.remove(a[o],"app-source")}}),p.services=Object.assign({},p.services,{promptBeginTracking:x.bind(null,{servicesManager:n,extensionManager:a}),promptTrackNewSeries:A.bind(null,{servicesManager:n,extensionManager:a}),promptTrackNewStudy:B.bind(null,{servicesManager:n,extensionManager:a}),promptSaveReport:ne.bind(null,{servicesManager:n,extensionManager:a}),promptHydrateStructuredReport:ye.bind(null,{servicesManager:n,extensionManager:a})});var y=(0,i.J)(b,p),v=ve((0,s.useMachine)(y),3),h=v[0],g=v[1];v[2];return(0,r.useEffect)((function(){if(m.length>0){var e=m[f];if(!e||!e.displaySetInstanceUID)return;var t=n.services.DisplaySetService.getDisplaySetByUID(e.displaySetInstanceUID);t.SOPClassHandlerId===Se&&!t.isLoaded&&t.load&&t.load(),t.SOPClassHandlerId===Se&&!0===t.isRehydratable&&(console.log("sending event...",h),g("PROMPT_HYDRATE_SR",{displaySetInstanceUID:t.displaySetInstanceUID,SeriesInstanceUID:t.SeriesInstanceUID,viewportIndex:f}))}}),[f,g,n.services,m]),r.createElement(ge.Provider,{value:[h,g]},o)}we.propTypes={children:o().oneOf([o().func,o().node]),servicesManager:o().object.isRequired,extensionManager:o().object.isRequired};var Ee=function(e){var t=e.servicesManager,n=e.extensionManager,r=we.bind(null,{servicesManager:t,extensionManager:n});return[{name:"TrackedMeasurementsContext",context:ge,provider:r}]}},81435:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(2524),a=n(29684),o=n.n(a),i=n(82656),s=n.n(i),c=n(22737);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var d=c.ZP.adapters.Cornerstone.MeasurementReport,f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=m(e,t),a=d.generateReport(r,o().metaData),i=a.dataset;return Object.assign(i,n),i};function m(e,t){var n=e.map((function(e){return e.id})),r=s().globalImageIdSpecificToolStateManager.saveToolState(),a={};function o(n,r,o){a[n]||(a[n]={});var i=a[n];i[r]||(i[r]={data:[]});var s,c=e.find((function(e){return e.id===o.id})),l=i[r].data,u=[];c.label&&(t.includes(r)?s={CodeValue:"CORNERSTONEFREETEXT",CodingSchemeDesignator:"CST4",CodeMeaning:c.label}:u.push({CodeValue:"CORNERSTONEFREETEXT",CodingSchemeDesignator:"CST4",CodeMeaning:c.label}));var d=Object.assign({},o,{finding:s,findingSites:u});l.push(d)}for(var i=n.slice(),c=Object.keys(r),u=0;u<c.length;u++)for(var d=c[u],f=r[d],m=Object.keys(f),p=0;p<m.length;p++){var y=m[p],v=f[y].data;if(v)for(var h=function(e){var t=v[e],n=i.findIndex((function(e){return e===t.id}));if(-1!==n&&(o(d,y,t),i.splice(n,1),!i.length))return{v:a}},g=0;g<v.length;g++){var b=h(g);if("object"===l(b))return b.v}}return a}var p={storeMeasurements:function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,a){var o,i,s,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.length>3&&void 0!==c[3]?c[3]:{},r.Z.info("[DICOMSR] storeMeasurements"),n&&n.store&&n.store.dicom){e.next=5;break}return r.Z.error("[DICOMSR] datasource has no dataSource.store.dicom endpoint!"),e.abrupt("return",Promise.reject({}));case 5:return e.prev=5,i=f(t,a,o),s=i.StudyInstanceUID,e.next=10,n.store.dicom(i);case 10:return s&&n.deleteStudyMetadataPromise(s),e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e.catch(5),console.warn(e.t0),r.Z.error("[DICOMSR] Error while saving the measurements: ".concat(e.t0.message)),new Error(e.t0.message||"Error while saving the measurements.");case 19:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,s,"next",e)}function s(e){u(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),downloadReport:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=f(e,t,n),a=c.ZP.data.datasetToBlob(r),o=URL.createObjectURL(a);window.location.assign(o)},isToolSupported:function(e){return!!c.ZP.adapters.Cornerstone[e]}}},76643:function(e,t,n){"use strict";n.d(t,{ZP:function(){return r}});n(10573);var r={getAttribute:function(e,t){return e&&e.Value&&e.Value.length?function(e){function t(e){var t=e.length;return 0==t?"0000":1==t?"000"+e:2==t?"00"+e:3==t?"0"+e:e}for(var n="",r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)n+=t(e[r].charCodeAt(a).toString(16));return parseInt(n,16)}(e.Value):t},getAuthorizationHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.requestOptions,n=arguments.length>1?arguments[1]:void 0,r={},a=n&&n.getAccessToken&&n.getAccessToken();return t&&t.auth?"function"==typeof t.auth?r.Authorization=t.auth(t):r.Authorization="Basic ".concat(btoa(t.auth)):a&&(r.Authorization="Bearer ".concat(a)),r},getModalities:function(e,t){if(!e&&!t)return{};var n=e||{vr:"CS",Value:[]};if(t){if(!n.vr||n.vr!==t.vr)return t;for(var r=0;r<t.Value.length;r++){var a=t.Value[r];-1===n.Value.indexOf(a)&&n.Value.push(a)}}return n},getName:function(e,t){return e&&e.Value&&e.Value.length?e.Value[0].Alphabetic?e.Value[0].Alphabetic:e.Value[0]:t},getNumber:function(e,t){return e&&e.Value&&e.Value.length?parseFloat(e.Value[0]):t},getString:function(e,t){return e&&e.Value&&e.Value.length?e.Value.join("\\"):t}}},71818:function(e,t){"use strict";function n(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var r={create:function(e){var t,r,a=e.query,o=e.retrieve,i=e.store,s=e.reject,c=e.initialize,l=e.retrieveSeriesMetadata,u=e.deleteStudyMetadataPromise,d=e.getImageIdsForDisplaySet,f=e.getImageIdsForInstance,m={dicom:(t=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("store.dicom(naturalizedDicom, StudyInstanceUID) not implemented for dataSource.");case 1:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function s(e){n(i,a,o,s,c,"next",e)}function c(e){n(i,a,o,s,c,"throw",e)}s(void 0)}))},function(e){return r.apply(this,arguments)})};return{query:a||{studies:{mapParams:function(e){return e},requestResults:function(){},processResults:function(e){return e}},series:{},instances:{}},retrieve:o||{series:{}},reject:s||{},store:i||m,initialize:c,retrieveSeriesMetadata:l,deleteStudyMetadataPromise:u,getImageIdsForDisplaySet:d,getImageIdsForInstance:f}}};t.Z=r},96798:function(e,t,n){"use strict";var r=n(2524);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.getActiveContexts;if(o(this,e),s(this,"getCommand",(function(e,n){var r,a=[];if(n){var o=t.getContext(n);o&&a.push(o)}else{t._getActiveContexts().forEach((function(e){var n=t.getContext(e);n&&a.push(n)}))}if(0!==a.length)return a.forEach((function(t){t[e]&&(r=t[e])})),r})),this.contexts={},!r)throw new Error("CommandsManager was instantiated without getActiveContexts()");this._getActiveContexts=r}var t,n,c;return t=e,(n=[{key:"createContext",value:function(e){if(e)return this.contexts[e]?this.clearContext(e):void(this.contexts[e]={})}},{key:"getContext",value:function(e){var t=this.contexts[e];if(t)return t}},{key:"clearContext",value:function(e){e&&(this.contexts[e]={})}},{key:"registerCommand",value:function(e,t,n){if("object"===a(n)){var r=this.getContext(e);r&&(r[t]=n)}}},{key:"runCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=this.getCommand(e,n);if(a){var o=a.commandFn,i=Object.assign({},a.options,t);return"function"!=typeof o?void r.Z.warn('No commandFn was defined for command "'.concat(e,'"')):o(i)}r.Z.warn('Command "'.concat(e,'" not found in current context'))}}])&&i(t.prototype,n),c&&i(t,c),e}();t.Z=c},68818:function(e,t,n){"use strict";var r=n(7957),a=n.n(r),o=n(2524),i=n(78034);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hotkeyDefinitions={},this.hotkeyDefaults=[],this.isEnabled=!0,!t)throw new Error("HotkeysManager instantiated without a commandsManager. Hotkeys will be unable to find and run commands.");this._servicesManager=n,this._commandsManager=t}var t,n,r;return t=e,(n=[{key:"record",value:function(e){return i.Z.record(e)}},{key:"disable",value:function(){this.isEnabled=!1,i.Z.pause()}},{key:"enable",value:function(){this.isEnabled=!0,i.Z.unpause()}},{key:"setHotkeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var n=this.getValidDefinitions(t);n.forEach((function(t){return e.registerHotkeys(t)})),localStorage.setItem("hotkey-definitions",JSON.stringify(n))}catch(e){var r=this._servicesManager.services.UINotificationService;r.show({title:"Hotkeys Manager",message:"Error while setting hotkeys",type:"error"})}}},{key:"setDefaultHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getValidDefinitions(e);this.hotkeyDefaults=t}},{key:"getValidDefinitions",value:function(e){return Array.isArray(e)?u(e):this._parseToArrayLike(e)}},{key:"getValidHotkeyDefinitions",value:function(e){var t=this.getValidDefinitions(e),n={};return t.forEach((function(e){var t=e.commandName,r=e.commandOptions,o=a()({commandName:t,commandOptions:r});n[o]=e})),n}},{key:"_parseToArrayLike",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=c({},t);return Object.entries(n).map((function(t){return e._parseToHotKeyObj(t[0],t[1])}))}},{key:"_parseToHotKeyObj",value:function(e,t){return c({commandName:e},t)}},{key:"registerHotkeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.commandName,n=e.commandOptions,r=void 0===n?{}:n,i=e.keys,s=e.label,c=e.isEditable;if(!t)throw new Error('No command was defined for hotkey "'.concat(i,'"'));var l=a()({commandName:t,commandOptions:r}),u=Object.keys(r).length?JSON.stringify(r):"no",d=this.hotkeyDefinitions[l];if(d){var f=d.keys;this._unbindHotkeys(t,f),o.Z.info("[hotkeys] Unbinding ".concat(t," with ").concat(u," options from ").concat(f))}this.hotkeyDefinitions[l]={commandName:t,commandOptions:r,keys:i,label:s,isEditable:c},this._bindHotkeys(t,r,i),o.Z.info("[hotkeys] Binding ".concat(t," with ").concat(u," options to ").concat(i))}},{key:"restoreDefaultBindings",value:function(){this.setHotkeys(this.hotkeyDefaults)}},{key:"destroy",value:function(){this.hotkeyDefaults=[],this.hotkeyDefinitions={},i.Z.reset()}},{key:"_bindHotkeys",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=""===r||void 0===r;if(!a){var o=r instanceof Array,s=o?r.join("+"):r;i.Z.bind(s,(function(r){r.preventDefault(),r.stopPropagation(),t._commandsManager.runCommand(e,c({evt:r},n))}))}}},{key:"_unbindHotkeys",value:function(e,t){if(""!==t&&void 0!==t)if(t instanceof Array){var n=t.join("+");this._unbindHotkeys(e,n)}else i.Z.unbind(t)}}])&&f(t.prototype,n),r&&f(t,r),e}();t.Z=m},11875:function(e,t,n){"use strict";var r=n(33464),a=n(25685);function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&s(a,n.prototype),a}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!0!==Array.isArray(t))throw new Error("ImageSet expects an array of images");Object.defineProperty(this,"images",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"uid",{enumerable:!1,configurable:!1,writable:!1,value:(0,r.Z)()})}var t,n,i;return t=e,(n=[{key:"getUID",value:function(){return this.uid}},{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"setAttributes",value:function(e){if("object"===u(e)&&null!==e){var t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&(this[n]=e[n])}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"sortBy",value:function(e){return this.images.sort(e)}},{key:"sortByImagePositionPatient",value:function(){var e=this.images,t=m(e[0]),n=new a.Vector3(t[0],t[1],t[2]),r=e[0].getData().metadata.ImageOrientationPatient,i=new a.Vector3(r[0],r[1],r[2]).cross(new a.Vector3(r[3],r[4],r[5])),s=e.map((function(e){var t=o(a.Vector3,c(m(e)));return{distance:n.clone().sub(t).dot(i),image:e}}));s.sort((function(e,t){return t.distance-e.distance}));var l=s.map((function(e){return e.image}));e.sort((function(e,t){return l.indexOf(e)-l.indexOf(t)}))}}])&&d(t.prototype,n),i&&d(t,i),e}();function m(e){return e.getData().metadata.ImagePositionPatient}t.Z=f},45711:function(e,t,n){"use strict";n.d(t,{ZP:function(){return h}});var r=n(96798),a=n(68818),o=n(11875),i=n(72124),s=n(43264),c=n.n(s),l=n(2524);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=n(53281);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"studies",{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(this,"imageIdToUIDs",{configurable:!1,enumerable:!1,writable:!1,value:new Map})}var t,n,r;return t=e,(n=[{key:"addImageIdToUIDs",value:function(e,t){this.imageIdToUIDs.set(e,t)}},{key:"_getInstance",value:function(e){var t=this._getUIDsFromImageID(e);if(t){var n=t.StudyInstanceUID,r=t.SeriesInstanceUID,a=t.SOPInstanceUID;return d.Z.getInstance(n,r,a)}}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fallback:!1},r=this._getInstance(t);return e===v?r:this.getTagFromInstance(e,r,n)}},{key:"getTag",value:function(e,t,n){return this.get(e,t,n)}},{key:"getInstance",value:function(e){return this.get(v,e)}},{key:"getTagFromInstance",value:function(e,t){if(t)return t[e]?t[e]:this._getCornerstoneWADOImageLoaderTag(e,t)}},{key:"_getCornerstoneWADOImageLoaderTag",value:function(e,t){var n;switch(e){case y.GENERAL_SERIES_MODULE:var r,a,o=t.SeriesDate,i=t.SeriesTime;o&&(r=c().parseDA(o)),i&&(a=c().parseTM(i)),n={modality:t.Modality,seriesInstanceUID:t.SeriesInstanceUID,seriesNumber:p(t.SeriesNumber),studyInstanceUID:t.StudyInstanceUID,seriesDate:r,seriesTime:a};break;case y.PATIENT_STUDY_MODULE:n={patientAge:p(t.PatientAge),patientSize:p(t.PatientSize),patientWeight:p(t.PatientWeight)};break;case y.IMAGE_PLANE_MODULE:var s,d,f,m,v=t.ImageOrientationPatient,h=function(e){var t=e.PixelSpacing,n=e.ImagerPixelSpacing,r=e.SOPClassUID,a=e.PixelSpacingCalibrationType,o=e.PixelSpacingCalibrationDescription,i=e.EstimatedRadiographicMagnificationFactor,s=e.SequenceOfUltrasoundRegions,c=["1.2.840.10008.5.1.4.1.1.1","1.2.840.10008.5.1.4.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.2","1.2.840.10008.5.1.4.1.1.1.2.1","1.2.840.10008.5.1.4.1.1.1.3","1.2.840.10008.5.1.4.1.1.1.3.1","1.2.840.10008.5.1.4.1.1.12.1","1.2.840.10008.5.1.4.1.1.12.1.1","1.2.840.10008.5.1.4.1.1.12.2","1.2.840.10008.5.1.4.1.1.12.2.1","1.2.840.10008.5.1.4.1.1.12.3"].includes(r),d="NOT_APPLICABLE";if(c&&!n)return{PixelSpacing:t,type:"UNKNOWN",isProjection:c};if(t&&n&&t===n)return{PixelSpacing:t,type:"DETECTOR",isProjection:c};if(t&&n&&t!==n)return{PixelSpacing:t,type:"CALIBRATED",isProjection:c,PixelSpacingCalibrationType:a,PixelSpacingCalibrationDescription:o};if(!t&&n){var f=n;return i?f=n.map((function(e){return e/i})):l.Z.info("EstimatedRadiographicMagnificationFactor was not present. Unable to correct ImagerPixelSpacing."),{PixelSpacing:f,isProjection:c}}if(s&&"object"===u(s))return{PixelSpacing:[10*s.PhysicalDeltaX,10*s.PhysicalDeltaY]};if(s&&Array.isArray(s)&&s.length>1)l.Z.warn("Sequence of Ultrasound Regions > one entry. This is not yet implemented, all measurements will be shown in pixels.");else if(!1===c&&!n)return{PixelSpacing:t,type:d,isProjection:c};l.Z.info("Unknown combination of PixelSpacing and ImagerPixelSpacing identified. Unable to determine spacing.")}(t).PixelSpacing;h&&(s=h[0],d=h[1]),v&&(f=v.slice(0,3),m=v.slice(3,6)),n={frameOfReferenceUID:t.FrameOfReferenceUID,rows:p(t.Rows),columns:p(t.Columns),imageOrientationPatient:p(v),rowCosines:p(f),columnCosines:p(m),imagePositionPatient:p(t.ImagePositionPatient),sliceThickness:p(t.SliceThickness),sliceLocation:p(t.SliceLocation),pixelSpacing:p(h),rowPixelSpacing:p(s),columnPixelSpacing:p(d)};break;case y.IMAGE_PIXEL_MODULE:n={samplesPerPixel:p(t.SamplesPerPixel),photometricInterpretation:p(t.PhotometricInterpretation),rows:p(t.Rows),columns:p(t.Columns),bitsAllocated:p(t.BitsAllocated),bitsStored:p(t.BitsStored),highBit:p(t.HighBit),pixelRepresentation:p(t.PixelRepresentation),planarConfiguration:p(t.PlanarConfiguration),pixelAspectRatio:p(t.PixelAspectRatio),smallestPixelValue:p(t.SmallestPixelValue),largestPixelValue:p(t.LargestPixelValue),redPaletteColorLookupTableDescriptor:p(t.RedPaletteColorLookupTableDescriptor),greenPaletteColorLookupTableDescriptor:p(t.GreenPaletteColorLookupTableDescriptor),bluePaletteColorLookupTableDescriptor:p(t.BluePaletteColorLookupTableDescriptor),redPaletteColorLookupTableData:p(t.RedPaletteColorLookupTableData),greenPaletteColorLookupTableData:p(t.GreenPaletteColorLookupTableData),bluePaletteColorLookupTableData:p(t.BluePaletteColorLookupTableData)};break;case y.VOI_LUT_MODULE:var g=t.WindowCenter,b=t.WindowWidth;if(void 0===g||void 0===b)return;var S=Array.isArray(g)?g:[g],w=Array.isArray(b)?b:[b];n={windowCenter:p(S),windowWidth:p(w)};break;case y.MODALITY_LUT_MODULE:var E=t.RescaleIntercept,I=t.RescaleSlope;if(void 0===E||void 0===I)return;n={rescaleIntercept:p(t.RescaleIntercept),rescaleSlope:p(t.RescaleSlope),rescaleType:t.RescaleType};break;case y.SOP_COMMON_MODULE:n={sopClassUID:t.SOPClassUID,sopInstanceUID:t.SOPInstanceUID};break;case y.PET_ISOTOPE_MODULE:var O=t.RadiopharmaceuticalInformationSequence;if(O){var D=Array.isArray(O)?O[0]:O,x=D.RadiopharmaceuticalStartTime,k=D.RadionuclideTotalDose,P=D.RadionuclideHalfLife;n={radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:c().parseTM(x),radionuclideTotalDose:k,radionuclideHalfLife:P}}}break;case y.OVERLAY_PLANE_MODULE:for(var C=[],T=0;T<=30;T+=2){var N="60".concat(T.toString(16));3===N.length&&(N="600".concat(T.toString(16)));var R=t["".concat(N,"3000")];if(R){var M="".concat(N,"0010"),A="".concat(N,"0011"),j="".concat(N,"0040"),U="".concat(N,"0050"),L="".concat(N,"0022"),_="".concat(N,"1500"),V="".concat(N,"1301"),q="".concat(N,"1302"),F="".concat(N,"1303"),B=t[U],z={rows:t[M],columns:t[A],type:t[j],x:B[0],y:B[1],pixelData:R,description:t[L],label:t[_],roiArea:t[V],roiMean:t[q],roiStandardDeviation:t[F]};C.push(z)}}n={overlays:C};break;case y.PATIENT_MODULE:var H,Z=t.PatientName;Z&&(H=Z.Alphabetic),n={patientName:H,patientId:t.PatientID};break;case y.GENERAL_IMAGE_MODULE:n={sopInstanceUid:t.SOPInstanceUID,instanceNumber:p(t.InstanceNumber),lossyImageCompression:t.LossyImageCompression,lossyImageCompressionRatio:t.LossyImageCompressionRatio,lossyImageCompressionMethod:t.LossyImageCompressionMethod};break;case y.GENERAL_STUDY_MODULE:n={studyDescription:t.StudyDescription,studyDate:t.StudyDate,studyTime:t.StudyTime,accessionNumber:t.AccessionNumber};break;case y.CINE_MODULE:n={frameTime:t.FrameTime};break;default:return}return n}},{key:"_getUIDsFromImageID",value:function(e){if(e.includes("wadors:")){var t=e.split("/studies/")[1].split("/");return{StudyInstanceUID:t[0],SeriesInstanceUID:t[2],SOPInstanceUID:t[4]}}if(e.includes("?requestType=WADO")){var n=i.parse(e);return{StudyInstanceUID:n.studyUID,SeriesInstanceUID:n.seriesUID,SOPInstanceUID:n.objectUID}}return this.imageIdToUIDs.get(e)}}])&&f(t.prototype,n),r&&f(t,r),e}()),p=function(e){return Array.isArray(e)?e.map((function(e){return void 0!==e?Number(e):e})):void 0!==e?Number(e):e},y={GENERAL_SERIES_MODULE:"generalSeriesModule",PATIENT_STUDY_MODULE:"patientStudyModule",IMAGE_PLANE_MODULE:"imagePlaneModule",IMAGE_PIXEL_MODULE:"imagePixelModule",VOI_LUT_MODULE:"voiLutModule",MODALITY_LUT_MODULE:"modalityLutModule",SOP_COMMON_MODULE:"sopCommonModule",PET_ISOTOPE_MODULE:"petIsotopeModule",OVERLAY_PLANE_MODULE:"overlayPlaneModule",PATIENT_MODULE:"patientModule",GENERAL_IMAGE_MODULE:"generalImageModule",GENERAL_STUDY_MODULE:"generalStudyModule",CINE_MODULE:"cineModule"},v="instance",h={MetadataProvider:m,CommandsManager:r.Z,HotkeysManager:a.Z,ImageSet:o.Z}},22324:function(e,t,n){"use strict";n.d(t,{ZP:function(){return a}});var r={1:{description:"Soft tissue",window:"400",level:"40"},2:{description:"Lung",window:"1500",level:"-600"},3:{description:"Liver",window:"150",level:"90"},4:{description:"Bone",window:"80",level:"40"},5:{description:"Brain",window:"2500",level:"480"},6:{description:"Trest",window:"1",level:"1"},7:{description:"Empty1",window:"Empty1",level:"Empty1"},8:{description:"Empty2",window:"Empty2",level:"Empty2"},9:{description:"Empty3",window:"Empty3",level:"Empty3"},10:{description:"Empty4",window:"Empty4",level:"Empty4"}},a={hotkeyBindings:[{commandName:"setToolActive",commandOptions:{toolName:"Zoom"},label:"Zoom",keys:["z"],isEditable:!0},{commandName:"scaleUpViewport",label:"Zoom In",keys:["+"],isEditable:!0},{commandName:"scaleDownViewport",label:"Zoom Out",keys:["-"],isEditable:!0},{commandName:"fitViewportToWindow",label:"Zoom to Fit",keys:["="],isEditable:!0},{commandName:"rotateViewportCW",label:"Rotate Right",keys:["r"],isEditable:!0},{commandName:"rotateViewportCCW",label:"Rotate Left",keys:["l"],isEditable:!0},{commandName:"flipViewportVertical",label:"Flip Horizontally",keys:["h"],isEditable:!0},{commandName:"flipViewportHorizontal",label:"Flip Vertically",keys:["v"],isEditable:!0},{commandName:"toggleCine",label:"Cine",keys:["c"]},{commandName:"invertViewport",label:"Invert",keys:["i"],isEditable:!0},{commandName:"incrementActiveViewport",label:"Next Image Viewport",keys:["right"],isEditable:!0},{commandName:"decrementActiveViewport",label:"Previous Image Viewport",keys:["left"],isEditable:!0},{commandName:"nextViewportDisplaySet",label:"Next Series",keys:["pageup"],isEditable:!0},{commandName:"previousViewportDisplaySet",label:"Previous Series",keys:["pagedown"],isEditable:!0},{commandName:"nextImage",label:"Next Image",keys:["down"],isEditable:!0},{commandName:"previousImage",label:"Previous Image",keys:["up"],isEditable:!0},{commandName:"firstImage",label:"First Image",keys:["home"],isEditable:!0},{commandName:"lastImage",label:"Last Image",keys:["end"],isEditable:!0},{commandName:"resetViewport",label:"Reset",keys:["space"],isEditable:!0},{commandName:"cancelMeasurement",label:"Cancel Cornerstone Measurement",keys:["esc"]},{commandName:"setWindowLevel",commandOptions:r[1],label:"W/L Preset 1",keys:["1"]},{commandName:"setWindowLevel",commandOptions:r[2],label:"W/L Preset 2",keys:["2"]},{commandName:"setWindowLevel",commandOptions:r[3],label:"W/L Preset 3",keys:["3"]},{commandName:"setWindowLevel",commandOptions:r[4],label:"W/L Preset 4",keys:["4"]},{commandName:"setWindowLevel",commandOptions:r[5],label:"W/L Preset 5",keys:["5"]},{commandName:"setWindowLevel",commandOptions:r[6],label:"W/L Preset 6",keys:["6"]},{commandName:"setWindowLevel",commandOptions:r[7],label:"W/L Preset 7",keys:["7"]},{commandName:"setWindowLevel",commandOptions:r[8],label:"W/L Preset 8",keys:["8"]},{commandName:"setWindowLevel",commandOptions:r[9],label:"W/L Preset 9",keys:["9"]}],windowLevelPresets:r}},9159:function(e,t){"use strict";t.Z={getHTTPErrorHandler:function(){return null}}},49823:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(4676),a=n(2524);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this,i=t.commandsManager,s=t.servicesManager,l=t.hotkeysManager,u=t.appConfig,d=void 0===u?{}:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"registerExtensions",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.forEach((function(e){if(Array.isArray(e)){var r=o(e,2),a=r[0],i=r[1];n.registerExtension(a,i,t)}else n.registerExtension(e,{},t)}))})),c(this,"registerExtension",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)throw new Error("Attempting to register a null/undefined extension.");var i=e.id;if(!i)throw a.Z.warn(e),new Error("Extension ID not set");n.registeredExtensionIds.includes(i)?a.Z.warn("Extension ID ".concat(i," has already been registered. Exiting before duplicating modules.")):(e.preRegistration&&e.preRegistration({servicesManager:n._servicesManager,commandsManager:n._commandsManager,hotkeysManager:n._hotkeysManager,appConfig:n._appConfig,configuration:t}),e.onModeEnter&&(n._extensionLifeCycleHooks.onModeEnter[i]=e.onModeEnter),e.onModeExit&&(n._extensionLifeCycleHooks.onModeExit[i]=e.onModeExit),n.moduleTypeNames.forEach((function(a){var s=n._getExtensionModule(a,e,i,t);if(s){switch(a){case r.Z.COMMANDS:n._initCommandsModule(s);break;case r.Z.DATA_SOURCE:n._initDataSourcesModule(s,i,o);break;case r.Z.TOOLBAR:case r.Z.VIEWPORT:case r.Z.PANEL:case r.Z.SOP_CLASS_HANDLER:case r.Z.CONTEXT:case r.Z.LAYOUT_TEMPLATE:case r.Z.HANGING_PROTOCOL:s.forEach((function(e){n.modulesMap["".concat(i,".").concat(a,".").concat(e.name)]=e}));break;default:throw new Error("Module type invalid: ".concat(a))}n.modules[a].push({extensionId:i,module:s})}})),n.registeredExtensionIds.push(i))})),c(this,"getModuleEntry",(function(e){return n.modulesMap[e]})),c(this,"getDataSources",(function(e){return void 0===e&&(e=n.activeDataSource),n.dataSourceMap[e]})),c(this,"getActiveDataSource",(function(){return n.dataSourceMap[n.activeDataSource]})),c(this,"getDataSource",(function(){return n.dataSourceMap[n.activeDataSource]})),c(this,"_getExtensionModule",(function(e,t,r,o){var i,s="get"+((i=e).charAt(0).toUpperCase()+i.substr(1)),c=t[s];if(c)try{var l=c({appConfig:n._appConfig,commandsManager:n._commandsManager,servicesManager:n._servicesManager,hotkeysManager:n._hotkeysManager,extensionManager:n,configuration:o});return l||a.Z.warn("Null or undefined returned when registering the ".concat(s," module for the ").concat(r," extension")),l}catch(e){throw new Error("Exception thrown while trying to call ".concat(s," for the ").concat(r," extension"))}})),c(this,"_initCommandsModule",(function(e){var t=e.definitions,r=e.defaultContext;t&&0!==Object.keys(t).length?(r=r||"VIEWER",n._commandsManager.getContext(r)||n._commandsManager.createContext(r),Object.keys(t).forEach((function(e){var a=t[e];a.context&&!n._commandsManager.getContext(a.context)&&n._commandsManager.createContext(a.context),n._commandsManager.registerCommand(a.context||r,e,a)}))):a.Z.warn("Commands Module contains no command definitions")})),this.modules={},this.registeredExtensionIds=[],this.moduleTypeNames=Object.values(r.Z),this._commandsManager=i,this._servicesManager=s,this._hotkeysManager=l,this._appConfig=d,this.modulesMap={},this.moduleTypeNames.forEach((function(e){n.modules[e]=[]})),this._extensionLifeCycleHooks={onModeEnter:{},onModeExit:{}},this.dataSourceMap={},this.defaultDataSourceName=d.defaultDataSourceName,this.activeDataSource=void 0}var t,n,i;return t=e,(n=[{key:"setActiveDataSource",value:function(e){this.activeDataSource=e}},{key:"onModeEnter",value:function(){var e=this.registeredExtensionIds,t=this._servicesManager,n=this._commandsManager,r=this._hotkeysManager,a=this._extensionLifeCycleHooks,o=t.services,i=o.MeasurementService,s=o.ViewportGridService,c=o.HangingProtocolService;i.clearMeasurements(),s.reset(),c.reset(),e.forEach((function(e){var o=a.onModeEnter[e];"function"==typeof o&&o({servicesManager:t,commandsManager:n,hotkeysManager:r})}))}},{key:"onModeExit",value:function(){var e=this.registeredExtensionIds,t=this._servicesManager,n=this._commandsManager,r=this._extensionLifeCycleHooks,a=t.services,o=a.MeasurementService,i=a.ViewportGridService,s=a.HangingProtocolService;o.clearMeasurements(),i.reset(),s.reset(),e.forEach((function(e){var a=r.onModeExit[e];"function"==typeof a&&a({servicesManager:t,commandsManager:n})}))}},{key:"_initDataSourcesModule",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=this._servicesManager.services.UserAuthenticationService;e.forEach((function(e){var i="".concat(t,".").concat(r.Z.DATA_SOURCE,".").concat(e.name);a.forEach((function(t){if(t.namespace===i){var r=e.createDataSource(t.configuration,o);n.dataSourceMap[t.sourceName]?n.dataSourceMap[t.sourceName].push(r):n.dataSourceMap[t.sourceName]=[r]}}))})),e.forEach((function(e){n.modulesMap["".concat(t,".").concat(r.Z.DATA_SOURCE,".").concat(e.name)]=e}))}},{key:"_initHangingProtocolModule",value:function(e,t){var n=this;e.forEach((function(e){n.modulesMap["".concat(t,".").concat(r.Z.HANGING_PROTOCOL,".").concat(e.name)]=e}))}}])&&s(t.prototype,n),i&&s(t,i),e}()},4676:function(e,t){"use strict";t.Z={COMMANDS:"commandsModule",DATA_SOURCE:"dataSourcesModule",PANEL:"panelModule",SOP_CLASS_HANDLER:"sopClassHandlerModule",TOOLBAR:"toolbarModule",VIEWPORT:"viewportModule",CONTEXT:"contextModule",LAYOUT_TEMPLATE:"layoutTemplateModule",HANGING_PROTOCOL:"hangingProtocolModule"}},39016:function(e,t,n){"use strict";n.d(t,{ZP:function(){return q},dD:function(){return V}});var r=n(4676),a=n(49823),o=n(96088),i=n(45711),s=n(96798),c=n(68818),l=n(76643),u=n(81435),d=n(9159),f=n(2524);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p={getNestedObject:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))for(var r=e[n],a=n.split("."),o=t;a.length;){var i=a.shift();a.length?(o[i]||(o[i]={}),o=o[i]):o[i]=r}return t},getShallowObject:function(e){var t={};return function e(t,n,r){for(var a in n)if(n.hasOwnProperty(a)){var o=t?"".concat(t,".").concat(a):a,i=n[a];"object"===m(i)?(i instanceof Array&&(o+="[]"),e(o,i,r)):r[o]=i}}("",e,t),t}};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return e instanceof Object||"object"===y(e)&&null!==e}function h(e){return"string"==typeof e}var g={search:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=new RegExp(n.trim(),"i");return Object.keys(t).forEach((function(i){var s=t[i];if(s){var c=h(r)?s[r]:s;h(c)&&o.test(c)&&a.push(s),v(s)&&e(s,n,r,a)}})),a},encodeId:function(e){var t=e&&e.toString?e.toString():e;return""===t||"string"!=typeof t?"_":t.replace(/[^a-zA-Z0-9-]/g,(function(e){return"_"+e[0].charCodeAt(0).toString(16)+"_"}))}},b={userLoggedIn:function(){return!1},getUserId:function(){return null},getName:function(){return null},getAccessToken:function(){return null},login:function(){return new Promise((function(e,t){return t()}))},logout:function(){return new Promise((function(e,t){return t()}))},getData:function(e){return null},setData:function(e,t){return null}},S=n(98526),w=n(22324),E=n(24910),I=n(57512),O=n(42586),D=n(34894),x=n(13527),k=n(97728),P=n(49811),C=n(27933),T=n(37765),N=n(37208),R=n(27961),M=n(53281),A=n(28250),j=n(71818);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=L(L({},S.ZP.hotkeys),{},{defaults:{hotkeyBindings:w.ZP.hotkeyBindings}}),q={MODULE_TYPES:r.Z,CommandsManager:s.Z,ExtensionManager:a.Z,HotkeysManager:c.Z,ServicesManager:o.Z,defaults:w.ZP,utils:S.ZP,hotkeys:V,classes:i.ZP,string:g,user:b,errorHandler:d.Z,object:p,log:f.Z,DICOMWeb:l.ZP,DICOMSR:u.Z,viewer:{},CineService:E.Z,UIDialogService:I.Z,UIModalService:O.Z,UINotificationService:D.Z,UIViewportDialogService:x.Z,DisplaySetService:k.Z,MeasurementService:P.Z,ToolBarService:C.Z,ViewportGridService:T.Z,HangingProtocolService:N.Z,UserAuthenticationService:R.Z,IWebApiDataSource:j.Z,DicomMetadataStore:M.Z,pubSubServiceInterface:A.Z}},2524:function(e,t){"use strict";var n={error:console.error,warn:console.warn,info:console.log,trace:console.trace,debug:console.debug,time:console.time,timeEnd:console.timeEnd};t.Z=n},24910:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="CineService",a={name:r,getState:function(){return o._getState()},setCine:function(e){var t=e.id,n=e.frameRate,r=e.isPlaying;return o._setCine({id:t,frameRate:n,isPlaying:r})},setIsCineEnabled:function(e){return o._setIsCineEnabled(e)},setServiceImplementation:function(e){var t=e.getState,n=e.setCine,r=e.setIsCineEnabled;t&&(o._getState=t);n&&(o._setCine=n);r&&(o._setIsCineEnabled=r)}},o={_getState:function(){return console.warn("getState() NOT IMPLEMENTED")},_setCine:function(){return console.warn("setCine() NOT IMPLEMENTED")},_setIsCineEnabled:function(){return console.warn("setIsCineEnabled() NOT IMPLEMENTED")}};var i={name:r,create:function(e){e.configuration;return a}}},53281:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(22737),a=n(28250);var o=function(e){return{SeriesInstanceUID:e[0].SeriesInstanceUID,instances:e}};function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e){return{StudyInstanceUID:e,isLoaded:!1,series:[],addInstanceToSeries:function(e){var t=e.SeriesInstanceUID,n=this.series.find((function(e){return e.SeriesInstanceUID===t}));if(n)n.instances.push(e);else{var r=o([e]);this.series.push(r)}},addInstancesToSeries:function(e){var t=e[0].SeriesInstanceUID,n=this.series.find((function(e){return e.SeriesInstanceUID===t}));if(n){var r;(r=n.instances).push.apply(r,i(e))}else{var a=o(e);this.series.push(a)}},setSeriesMetadata:function(e,t){var n=this.series.find((function(t){return t.SeriesInstanceUID===e}));n?n=Object.assign(n,t):this.series.push(Object.assign({instances:[]},t))}}},l={STUDY_ADDED:"event::dicomMetadataStore:studyAdded",INSTANCES_ADDED:"event::dicomMetadataStore:instancesAdded",SERIES_ADDED:"event::dicomMetadataStore:seriesAdded"};function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f={studies:[]};function m(e){return f.studies.find((function(t){return t.StudyInstanceUID===e}))}function p(e,t){var n=m(e);if(n)return n.series.find((function(e){return e.SeriesInstanceUID===t}))}var y={EVENTS:l,listeners:{},addInstance:function(e){var t,n;e instanceof ArrayBuffer?t=r.ZP.data.DicomMessage.readFile(e).dict:t=e;var a=(n=void 0===t.SeriesInstanceUID?r.ZP.data.DicomMetaDictionary.naturalizeDataset(t):t).StudyInstanceUID,o=f.studies.find((function(e){return e.StudyInstanceUID===a}));o||(f.studies.push(c(a)),o=f.studies[f.studies.length-1]),o.addInstanceToSeries(n)},addInstances:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e[0],r=n.StudyInstanceUID,a=n.SeriesInstanceUID,o=f.studies.find((function(e){return e.StudyInstanceUID===r}));o||(f.studies.push(c(r)),o=f.studies[f.studies.length-1]),o.addInstancesToSeries(e),this._broadcastEvent(l.INSTANCES_ADDED,{StudyInstanceUID:r,SeriesInstanceUID:a,madeInClient:t})},addSeriesMetadata:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e[0].StudyInstanceUID,r=m(n);r||(r=c(n),f.studies.push(r)),e.forEach((function(e){var t=e.SeriesInstanceUID;r.setSeriesMetadata(t,e)})),this._broadcastEvent(l.SERIES_ADDED,{StudyInstanceUID:n,madeInClient:t})},addStudy:function(e){var t=e.StudyInstanceUID;if(!f.studies.find((function(e){return e.StudyInstanceUID===t}))){var n=c(t);n.PatientID=e.PatientID,n.PatientName=e.PatientName,n.StudyDate=e.StudyDate,n.ModalitiesInStudy=e.ModalitiesInStudy,n.StudyDescription=e.StudyDescription,n.AccessionNumber=e.AccessionNumber,n.NumInstances=e.NumInstances,f.studies.push(n)}},getStudyInstanceUIDs:function(){return f.studies.map((function(e){return e.StudyInstanceUID}))},getStudy:m,getSeries:p,getInstance:function(e,t,n){var r=p(e,t);if(r)return r.instances.find((function(e){return e.SOPInstanceUID===n}))},getInstanceFromImageId:function(e){var t,n=u(f.studies);try{for(n.s();!(t=n.n()).done;){var r,a=u(t.value.series);try{for(a.s();!(r=a.n()).done;){var o,i=u(r.value.instances);try{for(i.s();!(o=i.n()).done;){var s=o.value;if(s.imageId===e)return s}}catch(e){i.e(e)}finally{i.f()}}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}}},v=Object.assign({},y,a.Z)},97728:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(28250),a={DISPLAY_SETS_ADDED:"event::displaySetService:displaySetsAdded",DISPLAY_SETS_CHANGED:"event::displaySetService:displaySetsChanged",DISPLAY_SETS_REMOVED:"event::displaySetService:displaySetsRemoved"};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=[],d=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"getDisplaySetsForSeries",(function(e){return u.filter((function(t){return t.SeriesInstanceUID===e}))})),l(this,"getDisplaySetByUID",(function(e){return u.find((function(t){return t.displaySetInstanceUID===e}))})),l(this,"makeDisplaySets",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.batch,o=void 0!==r&&r,s=n.madeInClient,c=void 0!==s&&s,l=n.settings,u=void 0===l?{}:l;if(!e||!e.length)throw new Error("No instances were provided.");if(o&&!e[0].length)throw new Error("Batch displaySet creation does not contain array of array of instances.");var d=[];if(o)for(var f=0;f<e.length;f++){var m=e[f],p=t.makeDisplaySetForInstances(m,u);d=[].concat(i(d),[p])}else{var y=t.makeDisplaySetForInstances(e,u);d=y}var v={};if(c&&(v.madeInClient=!0),d&&d.length)return t._broadcastEvent(a.DISPLAY_SETS_CHANGED,t.activeDisplaySets),t._broadcastEvent(a.DISPLAY_SETS_ADDED,{displaySetsAdded:d,options:v}),d})),this.activeDisplaySets=[],this.listeners={},this.EVENTS=a,Object.assign(this,r.Z)}var t,n,s;return t=e,(n=[{key:"init",value:function(e,t){this.extensionManager=e,this.SOPClassHandlerIds=t,this.activeDisplaySets=[]}},{key:"_addDisplaySetsToCache",value:function(e){e.forEach((function(e){u.push(e)}))}},{key:"_addActiveDisplaySets",value:function(e){var t=this.activeDisplaySets;e.forEach((function(e){t.push(e)}))}},{key:"getDisplaySetCache",value:function(){return u}},{key:"getMostRecentDisplaySet",value:function(){return this.activeDisplaySets[this.activeDisplaySets.length-1]}},{key:"getActiveDisplaySets",value:function(){return this.activeDisplaySets}},{key:"getDisplaySetForSOPInstanceUID",value:function(e,t){return(t?this.getDisplaySetsForSeries(t):this.getDisplaySetCache()).find((function(t){return t.images&&t.images.some((function(t){return t.SOPInstanceUID===e}))}))}},{key:"deleteDisplaySet",value:function(e){var t=this.activeDisplaySets,n=u.findIndex((function(t){return t.displaySetInstanceUID===e})),r=t.findIndex((function(t){return t.displaySetInstanceUID===e}));u.splice(n,1),t.splice(r,1),this._broadcastEvent(a.DISPLAY_SETS_CHANGED,this.activeDisplaySets),this._broadcastEvent(a.DISPLAY_SETS_REMOVED,{displaySetInstanceUIDs:[e]})}},{key:"makeDisplaySetForInstances",value:function(e,t){for(var n=this,r=e[0],a=this.getDisplaySetsForSeries(r.SeriesInstanceUID)||[],i=this.SOPClassHandlerIds,s=function(o){var s=i[o],c=n.extensionManager.getModuleEntry(s);if(c.sopClassUids.includes(r.SOPClassUID)){var l=a.filter((function(e){return e.SOPClassHandlerId===s}));return l.length||((l=c.getDisplaySetsFromSeries(e)).forEach((function(e){Object.keys(t).forEach((function(n){e[n]=t[n]}))})),n._addDisplaySetsToCache(l)),n._addActiveDisplaySets(l),{v:l}}},c=0;c<i.length;c++){var l=s(c);if("object"===o(l))return l.v}}}])&&c(t.prototype,n),s&&c(t,s),e}(),f={name:"DisplaySetService",create:function(e){e.configuration;return new d}}},37208:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(71975),a=n.n(r),o=n(28250),i=n(28266),s=n(7315),c=n.n(s);c().validators.equals=function(e,t,n,r){if(t&&e!==t.value)return n+"must equal "+t.value},c().validators.doesNotEqual=function(e,t,n){if(t&&e===t.value)return n+"cannot equal "+t.value},c().validators.contains=function(e,t,n){if(t&&e.indexOf&&-1===e.indexOf(t.value))return n+"must contain "+t.value},c().validators.doesNotContain=function(e,t,n){if(t&&e.indexOf&&-1!==e.indexOf(t.value))return n+"cannot contain "+t.value},c().validators.startsWith=function(e,t,n){if(t&&e.startsWith&&!e.startsWith(t.value))return n+"must start with "+t.value},c().validators.endsWith=function(e,t,n){if(t&&e.endsWith&&!e.endsWith(t.value))return n+"must end with "+t.value};var l=c();function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e,t,n){var r={format:"grouped"},a={passed:[],failed:[]},o=!1,i=0;return t.forEach((function(t){var s=t.attribute;if(n.hasOwnProperty(s)){var c=n[s];e[s]=c.callback(e)}var d,f=u({},s,t.constraint),m=u({},s,e[s]);try{d=l(m,f,[r])}catch(e){d=["Something went wrong during validation.",e]}d?(t.required&&(o=!0),a.failed.push({rule:t,errorMessages:d})):(i+=parseInt(t.weight,10),a.passed.push({rule:t}))})),o&&(i=0),{score:i,details:a,requiredFailed:o}};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m={id:"defaultProtocol",locked:!0,hasUpdatedPriorsInformation:!1,name:"Default",createdDate:"2021-02-23T19:22:08.894Z",modifiedDate:"2021-02-23T19:22:08.894Z",availableTo:{},editableBy:{},protocolMatchingRules:[],stages:[{id:"nwzau7jDkEkL8djfr",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:1}},viewports:[{viewportSettings:[],imageMatchingRules:[],seriesMatchingRules:[],studyMatchingRules:[]}],createdDate:"2021-02-23T19:22:08.894Z"}],numberOfPriorsReferenced:-1},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.protocols=t,this.customAttributeRetrievalCallbacks=n,this.matchedProtocols=new Map,this.matchedProtocolScores={},this.study=void 0}var t,n,r;return t=e,(n=[{key:"run",value:function(e){return this.study=e,this.getBestProtocolMatch()}},{key:"getBestProtocolMatch",value:function(){this.updateProtocolMatches();var e=this._getHighestScoringProtocol();return console.log("ProtocolEngine::getBestProtocolMatch bestMatch",e),e}},{key:"updateProtocolMatches",value:function(){var e=this;console.log("ProtocolEngine::updateProtocolMatches"),this._clearMatchedProtocols();var t=this.study;this.findMatchByStudy(t).forEach((function(t){var n=t.protocol;n&&(e.matchedProtocols.has(n.id)||(console.log("ProtocolEngine::updateProtocolMatches inserting protocol match",t),e.matchedProtocols.set(n.id,n),e.matchedProtocolScores[n.id]=t.score))}))}},{key:"findMatch",value:function(e,t){return d(e,t,this.customAttributeRetrievalCallbacks)}},{key:"findMatchByStudy",value:function(e){var t=this,n=[];return this.protocols.forEach((function(r){var a=r.protocolMatchingRules.slice();if(a){var o=t.findMatch(e,a).score;o>0&&n.push({score:o,protocol:r})}})),n.length?(n.sort((function(e,t){return t.score-e.score})),console.log("ProtocolEngine::findMatchByStudy matched",n),n):[{score:1,protocol:m}]}},{key:"_clearMatchedProtocols",value:function(){this.matchedProtocols.clear(),this.matchedProtocolScores={}}},{key:"_largestKeyByValue",value:function(e){return Object.keys(e).reduce((function(t,n){return e[t]>e[n]?t:n}))}},{key:"_getHighestScoringProtocol",value:function(){if(Object.keys(this.matchedProtocolScores).length){var e=this._largestKeyByValue(this.matchedProtocolScores);return this.matchedProtocols.get(e)}}}])&&f(t.prototype,n),r&&f(t,r),e}();function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g={STAGE_CHANGE:"event::hanging_protocol_stage_change",NEW_LAYOUT:"event::hanging_protocol_new_layout"},b="props",S="viewport",w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._commandsManager=t,this.protocols=[],this.ProtocolEngine=void 0,this.protocol=void 0,this.stage=void 0,this.matchDetails=[],this.hpAlreadyApplied=[],this.studies=[],this.customViewportSettings=[],this.customAttributeRetrievalCallbacks={},this.listeners={},Object.defineProperty(this,"EVENTS",{value:g,writable:!1,enumerable:!0,configurable:!1}),Object.assign(this,o.Z)}var t,n,r;return t=e,(n=[{key:"reset",value:function(){this.studies=[],this.protocols=[],this.hpAlreadyApplied=[],this.matchDetails=[]}},{key:"getState",value:function(){return[this.matchDetails,this.hpAlreadyApplied]}},{key:"getProtocols",value:function(){return this.protocols}},{key:"addProtocols",value:function(e){var t=this;e.forEach((function(e){-1===t.protocols.indexOf(e)&&t.protocols.push(e)}))}},{key:"run",value:function(e,t){this.studies.includes(e)||this.studies.push(e);var n=Object.assign({},e);if(this.ProtocolEngine=new p(this.protocols,this.customAttributeRetrievalCallbacks),t&&void 0!==t.id)this._setProtocol(t);else{var r=this.ProtocolEngine.run(n);this._setProtocol(r)}}},{key:"setHangingProtocolAppliedForViewport",value:function(e){this.hpAlreadyApplied[e]=!0}},{key:"addCustomViewportSetting",value:function(){var e;(e=this.customViewportSettings).push.apply(e,arguments)}},{key:"addCustomAttribute",value:function(e,t,n){this.customAttributeRetrievalCallbacks[e]={name:t,callback:n}}},{key:"nextProtocolStage",value:function(){console.log("ProtocolEngine::nextProtocolStage"),this._setCurrentProtocolStage(1)||console.log("ProtocolEngine::nextProtocolStage failed")}},{key:"previousProtocolStage",value:function(){console.log("ProtocolEngine::previousProtocolStage"),this._setCurrentProtocolStage(-1)||console.log("ProtocolEngine::previousProtocolStage failed")}},{key:"_setProtocol",value:function(e){this.stage=0,this.protocol=e,this._updateViewports(e)}},{key:"_getNumProtocolStages",value:function(){if(this.protocol&&this.protocol.stages&&this.protocol.stages.length)return this.protocol.stages.length}},{key:"_getCurrentStageModel",value:function(){return this.protocol.stages[this.stage]}},{key:"_updateViewports",value:function(){var e=this;if(this._getNumProtocolStages()){var t=this._getCurrentStageModel();if(t&&t.viewportStructure&&t.viewports&&t.viewports.length){var n=t.viewportStructure.properties;if(n){var r=n.columns,o=n.rows;this._broadcastChange(this.EVENTS.NEW_LAYOUT,{numRows:o,numCols:r}),t.viewports.forEach((function(t,n){e.hpAlreadyApplied.push(!1);var r=e._matchImages(t).bestMatch,o={viewportIndex:n,SeriesInstanceUID:r&&r.SeriesInstanceUID},i=t.viewportSettings.filter((function(e){return e.type===b})),s=e.customViewportSettings.filter((function(e){return e.type===b})),c=i.concat(s);c.length&&(o.renderedCallback=function(t,r){c.forEach((function(a){var o=a.commandName,i=a.options;i.viewportIndex=n,i.element=t,"setToolActive"!==o?e._commandsManager.runCommand(o,i):r.recordInteraction(i)}))});var l=t.viewportSettings.filter((function(e){return e.type===S})),u=e.customViewportSettings.filter((function(e){return e.type===S})),d=l.concat(u);if(d.length){var f={};d.forEach((function(e){var t=e.options;if(t){var n=a()(t);Object.entries(n).forEach((function(e){var t=y(e,2),n=t[0],r=t[1];f[n]=r}))}})),o.initialViewport=f}e.matchDetails[n]=o}))}}}}},{key:"_matchImages",value:function(e){var t=this;console.log("ProtocolEngine::matchImages");var n=e.studyMatchingRules,r=e.seriesMatchingRules,a=[],o=0,s=0;this.studies.forEach((function(e){var i=t.ProtocolEngine.findMatch(e,n);!0===i.requiredFailed||i.score<o||(o=i.score,e.series.forEach((function(n){var o=t.ProtocolEngine.findMatch(n,r);if(!(!0===o.requiredFailed||o.score<s)){s=o.score;var c={passed:[],failed:[]};c.passed=c.passed.concat(o.details.passed),c.passed=c.passed.concat(i.details.passed),c.failed=c.failed.concat(o.details.failed),c.failed=c.failed.concat(i.details.failed);var l=o.score+i.score,u={StudyInstanceUID:e.StudyInstanceUID,SeriesInstanceUID:n.SeriesInstanceUID,matchingScore:l,matchDetails:c,sortingInfo:{score:l,study:e.StudyInstanceUID,series:parseInt(n.SeriesNumber)}};a.push(u)}})))}));var c=(0,i.Z)({name:"score",reverse:!0},{name:"study",reverse:!0},{name:"series"});a.sort((function(e,t){return c(e.sortingInfo,t.sortingInfo)}));var l=a[0];return console.log("ProtocolEngine::matchImages bestMatch",l),{bestMatch:l,matchingScores:a}}},{key:"_isNextStageAvailable",value:function(){var e=this._getNumProtocolStages();return this.stage+1<e}},{key:"_isPreviousStageAvailable",value:function(){return this.stage-1>=0}},{key:"_setCurrentProtocolStage",value:function(e){return this.hpAlreadyApplied=[],!(-1===e&&!this._isPreviousStageAvailable()||1===e&&!this._isNextStageAvailable()||(this.stage+=e,console.log("ProtocolEngine::setCurrentProtocolStage stage = ".concat(this.stage)),this._updateViewports(),this._broadcastChange(this.EVENTS.STAGE_CHANGE,{matchDetails:this.matchDetails,hpAlreadyApplied:this.hpAlreadyApplied}),0))}},{key:"_broadcastChange",value:function(e,t){var n=Object.keys(this.listeners).length>0,r=Array.isArray(this.listeners[e]);n&&r&&this.listeners[e].forEach((function(e){e.callback(t)}))}}])&&h(t.prototype,n),r&&h(t,r),e}(),E={name:"HangingProtocolService",create:function(e){e.configuration;var t=e.commandsManager;return new w(t)}}},49811:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(2524),a=n(33464),o=n(28250);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=["id","SOPInstanceUID","FrameOfReferenceUID","referenceStudyUID","referenceSeriesUID","label","description","type","unit","area","mean","stdDev","length","shortestDiameter","longestDiameter","text","points","source"],d={MEASUREMENT_UPDATED:"event::measurement_updated",INTERNAL_MEASUREMENT_UPDATED:"event:internal_measurement_updated",MEASUREMENT_ADDED:"event::measurement_added",RAW_MEASUREMENT_ADDED:"event::raw_measurement_added",MEASUREMENT_REMOVED:"event::measurement_removed",MEASUREMENTS_CLEARED:"event::measurements_cleared",JUMP_TO_MEASUREMENT:"event:jump_to_measurement"},f={POLYLINE:"value_type::polyline",POINT:"value_type::point",BIDIRECTIONAL:"value_type::shortAxisLongAxis",ELLIPSE:"value_type::ellipse",MULTIPOINT:"value_type::multipoint",CIRCLE:"value_type::circle"},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_arrayOfObjects",(function(e){return Object.entries(e).map((function(e){return l({},e[0],e[1])}))})),this.sources={},this.mappings={},this.measurements={},this.listeners={},this._jumpToMeasurementCache={},Object.defineProperty(this,"EVENTS",{value:d,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this,"VALUE_TYPES",{value:f,writable:!1,enumerable:!0,configurable:!1}),Object.assign(this,o.Z)}var t,n,i;return t=e,(n=[{key:"getMeasurements",value:function(){var e=this,t=this._arrayOfObjects(this.measurements);return t&&t.map((function(t){return e.measurements[Object.keys(t)[0]]}))}},{key:"getMeasurement",value:function(e){var t=null,n=this.measurements[e];return n&&Object.keys(n).length>0&&(t=this.measurements[e]),t}},{key:"createSource",value:function(e,t){var n=this;if(!e)throw new Error("Source name not provided.");if(!t)throw new Error("Source version not provided.");var o=(0,a.Z)(),i={id:o,name:e,version:t,addOrUpdate:function(e,t){return n.addOrUpdate(i,e,t)},remove:function(e){return n.remove(e,i)},getAnnotation:function(e,t){return n.getAnnotation(i,e,t)}};return r.Z.info("New '".concat(e,"@").concat(t,"' source added.")),this.sources[o]=i,i}},{key:"getSource",value:function(e,t){return this.sources[this._getSourceId(e,t)]}},{key:"getSourceMappings",value:function(e,t){return this.mappings[this._getSourceId(e,t)]}},{key:"_getSourceId",value:function(e,t){var n=this.sources;return Object.keys(n).find((function(r){var a=n[r];return a.name===e&&a.version===t}))}},{key:"addMapping",value:function(e,t,n,a,o){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!n)throw new Error("Matching criteria not provided.");if(!t)throw new Error("Definition not provided.");if(!a)throw new Error("Mapping function to source schema not provided.");if(!o)throw new Error("Measurement mapping function not provided.");var i={matchingCriteria:n,definition:t,toSourceSchema:a,toMeasurementSchema:o};Array.isArray(this.mappings[e.id])?this.mappings[e.id].push(i):this.mappings[e.id]=[i],r.Z.info("New measurement mapping added to source '".concat(this._getSourceInfo(e),"'."))}},{key:"getAnnotation",value:function(e,t,n){if(this._isValidSource(e))if(t){var a=this._getMappingByMeasurementSource(n,t),o=this.getMeasurement(n);if(a)return a.toSourceSchema(o,t);var i=this._getMatchingMapping(e,t,o);if(i)return r.Z.info("Matching mapping found:",i),(0,i.toSourceSchema)(o,i.definition)}else r.Z.warn("No source definition provided. Exiting early.");else r.Z.warn("Invalid source. Exiting early.")}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.measurements[e]){var a=s(s({},t),{},{modifiedTimestamp:Math.floor(Date.now()/1e3)});return r.Z.info("Updating internal measurement representation...",a),this.measurements[e]=a,this._broadcastEvent(this.EVENTS.MEASUREMENT_UPDATED,{source:t.source,measurement:a,notYetUpdatedAtSource:n}),a.id}}},{key:"addRawMeasurement",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this._isValidSource(e)){var c=this._getSourceInfo(e);if(t)if(this._sourceHasMappings(e)){var l={};try{(l=o(n)).source=e}catch(e){return void r.Z.warn("Failed to map '".concat(c,"' measurement for definition ").concat(t,":"),e.message)}if(this._isValidMeasurement(l)){var u=n.id;u||(u=(0,a.Z)(),r.Z.warn("Measurement ID not found. Generating UID: ".concat(u)));var d=s(s({},l),{},{modifiedTimestamp:Math.floor(Date.now()/1e3),id:u});return this.measurements[u]?(r.Z.info("Measurement already defined. Updating measurement.",d),this.measurements[u]=d,this._broadcastEvent(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:d})):(r.Z.info("Measurement added.",d),this.measurements[u]=d,this._broadcastEvent(this.EVENTS.RAW_MEASUREMENT_ADDED,{source:e,measurement:d,data:n,dataSource:i})),d.id}r.Z.warn("Attempting to add or update a invalid measurement provided by '".concat(c,"'. Exiting early."))}else r.Z.warn("No measurement mappings found for '".concat(c,"' source. Exiting early."));else r.Z.warn("No source definition provided. Exiting early.")}else r.Z.warn("Invalid source. Exiting early.")}},{key:"addOrUpdate",value:function(e,t,n){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!t)throw new Error("No source definition provided.");var o=this._getSourceInfo(e);if(!this._sourceHasMappings(e))throw new Error("No measurement mappings found for '".concat(o,"' source. Exiting early."));var i={};try{(i=(0,this.mappings[e.id].find((function(e){return e.definition===t})).toMeasurementSchema)(n)).source=e}catch(e){throw new Error("Failed to map '".concat(o,"' measurement for definition ").concat(t,":"),e.message)}if(!this._isValidMeasurement(i))throw new Error("Attempting to add or update a invalid measurement provided by '".concat(o,"'. Exiting early."));var c=n.id;c||(c=(0,a.Z)(),r.Z.info("Measurement ID not found. Generating UID: ".concat(c)));var l=s(s({},i),{},{modifiedTimestamp:Math.floor(Date.now()/1e3),id:c});return this.measurements[c]?(r.Z.info("Measurement already defined. Updating measurement.",l),this.measurements[c]=l,this._broadcastEvent(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:l,notYetUpdatedAtSource:!1})):(r.Z.info("Measurement added.",l),this.measurements[c]=l,this._broadcastEvent(this.EVENTS.MEASUREMENT_ADDED,{source:e,measurement:l})),l.id}},{key:"remove",value:function(e,t){e&&this.measurements[e]?(delete this.measurements[e],this._broadcastEvent(this.EVENTS.MEASUREMENT_REMOVED,{source:t,measurement:e})):r.Z.warn("No id provided, or unable to find measurement by id.")}},{key:"clearMeasurements",value:function(){this.measurements={},this._jumpToMeasurementCache={},this._broadcastEvent(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"jumpToMeasurement",value:function(e,t){var n=this.measurements[t];if(n){this._addJumpToMeasurement(e,t);var a=this.EVENTS.JUMP_TO_MEASUREMENT,o=Object.keys(this.listeners).length>0,i=Array.isArray(this.listeners[a]);o&&i&&this.listeners[a].forEach((function(t){t.callback({viewportIndex:e,measurement:n})}))}else r.Z.warn("No id provided, or unable to find measurement by id.")}},{key:"_addJumpToMeasurement",value:function(e,t){this._jumpToMeasurementCache[e]=t}},{key:"getJumpToMeasurement",value:function(e){return this._jumpToMeasurementCache[e]}},{key:"removeJumpToMeasurement",value:function(e){delete this._jumpToMeasurementCache[e]}},{key:"_getMappingByMeasurementSource",value:function(e,t){var n=this.getMeasurement(e);if(this._isValidSource(n.source))return this.mappings[n.source.id].find((function(e){return e.definition===t}))}},{key:"clear",value:function(){this.measurements={},this._broadcastEvent(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"_getMatchingMapping",value:function(e,t,n){return this.mappings[e.id].filter((function(e){return e.definition===t})).find((function(e){var t=e.matchingCriteria;return n.points&&n.points.length===t.points}))}},{key:"_getSourceInfo",value:function(e){return"".concat(e.name,"@").concat(e.version)}},{key:"_isValidSource",value:function(e){return e&&this.sources[e.id]}},{key:"_sourceHasMappings",value:function(e){return Array.isArray(this.mappings[e.id])&&this.mappings[e.id].length}},{key:"_isValidMeasurement",value:function(e){return Object.keys(e).forEach((function(e){if(!u.includes(e))return r.Z.warn("Invalid measurement key: ".concat(e)),!1})),!0}}])&&c(t.prototype,n),i&&c(t,i),e}(),p={name:"MeasurementService",create:function(e){e.configuration;return new m}}},96088:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2524);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._commandsManager=t,this.services={},this.registeredServiceNames=[]}var t,n,o;return t=e,(n=[{key:"registerService",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?e.name?this.registeredServiceNames.includes(e.name)?r.Z.warn("Service name ".concat(e.name," has already been registered. Exiting before duplicating services.")):e.create?(this.services[e.name]=e.create({configuration:t,commandsManager:this._commandsManager}),this.registeredServiceNames.push(e.name)):r.Z.warn("Service create factory function not defined. Exiting early."):r.Z.warn("Service name not set. Exiting early."):r.Z.warn("Attempting to register a null/undefined service. Exiting early.")}},{key:"registerServices",value:function(e){var t=this;e.forEach((function(e){if(Array.isArray(e)){var n=a(e,2),r=n[0],o=n[1];t.registerService(r,o)}else t.registerService(e)}))}}])&&i(t.prototype,n),o&&i(t,o),e}()},27933:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(32005),a=n.n(r),o=n(28250);function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l={TOOL_BAR_MODIFIED:"event::toolBarService:toolBarModified",TOOL_BAR_STATE_MODIFIED:"event::toolBarService:toolBarStateModified"},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._commandsManager=t,this.EVENTS=l,this.listeners={},this.buttons={},this.unsubscriptions=[],this.buttonSections={},this.state={primaryToolId:"Wwwc",toggles:{},groups:{}},Object.assign(this,o.Z)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this.extensionManager=e}},{key:"reset",value:function(){this.unsubscriptions.forEach((function(e){return e()})),this.state={primaryToolId:"Wwwc",toggles:{},groups:{}},this.unsubscriptions=[]}},{key:"recordInteraction",value:function(e){var t,n=this._commandsManager,r=e.groupId,a=e.itemId,o=e.interactionType,i=e.commandName,s=e.commandOptions;switch(o){case"action":break;case"tool":this.state.primaryToolId=a,n.runCommand("setToolActive",s);break;case"toggle":this.state.toggles[a]=void 0===this.state.toggles[a]||!this.state.toggles[a],s&&(s.toggledState=this.state.toggles[a]);break;default:throw new Error("Invalid interaction type: ".concat(o))}i&&(t=n.runCommand(i,s)),t&&"function"==typeof t&&-1===this.unsubscriptions.indexOf(t)&&this.unsubscriptions.push(t),r&&(this.state.groups[r]=a),this._broadcastEvent(this.EVENTS.TOOL_BAR_STATE_MODIFIED,{})}},{key:"getButtons",value:function(){return this.buttons}},{key:"getActiveTools",value:function(){return[this.state.primaryToolId].concat(i(Object.keys(this.state.toggles)))}},{key:"setButton",value:function(e,t){this.buttons[e]&&(this.buttons[e]=a()(this.buttons[e],t),this._broadcastEvent(this.EVENTS.TOOL_BAR_MODIFIED,{buttons:this.buttons,button:this.buttons[e],buttonSections:this.buttonSections}))}},{key:"setButtons",value:function(e){this.buttons=e,this._broadcastEvent(this.EVENTS.TOOL_BAR_MODIFIED,{buttons:this.buttons,buttonSections:this.buttonSections})}},{key:"_buttonTypes",value:function(){var e={},t=this.extensionManager.modules.toolbarModule;return Array.isArray(t)&&t.length&&t.forEach((function(t){return t.module.forEach((function(t){e[t.name]=t}))})),e}},{key:"createButtonSection",value:function(e,t){this.buttonSections[e]=t,this._broadcastEvent(this.EVENTS.TOOL_BAR_MODIFIED,{})}},{key:"getButtonSection",value:function(e,t){var n=this,r=this.buttonSections[e],a=[];return r&&0!==r.length&&r.forEach((function(r){var o=n.buttons[r],i=n._mapButtonToDisplay(o,e,{},t);a.push(i)})),a}},{key:"addButtons",value:function(e){var t=this;e.forEach((function(e){t.buttons[e.id]||(t.buttons[e.id]=e)})),this._broadcastEvent(this.EVENTS.TOOL_BAR_MODIFIED,{})}},{key:"_mapButtonToDisplay",value:function(e,t,n,r){var a=e.id,o=e.type,i=e.component,s=this._buttonTypes()[o];if(s)return{id:a,Component:i||s.defaultComponent,componentProps:Object.assign({},e.props,r)}}}])&&c(t.prototype,n),r&&c(t,r),e}(),d={name:"ToolBarService",create:function(e){e.configuration;var t=e.commandsManager;return new u(t)}}},57512:function(e,t){"use strict";var n="UIDialogService",r={name:n,dismiss:function(e){var t=e.id;return a._dismiss({id:t})},dismissAll:function(){return a._dismissAll()},create:function(e){var t=e.id,n=e.content,r=e.contentProps,o=e.onStart,i=e.onDrag,s=e.onStop,c=e.centralize,l=void 0!==c&&c,u=e.preservePosition,d=void 0===u||u,f=e.isDraggable,m=void 0===f||f,p=e.showOverlay,y=void 0!==p&&p,v=e.onClickOutside,h=e.defaultPosition;return a._create({id:t,content:n,contentProps:r,onStart:o,onDrag:i,onStop:s,centralize:l,preservePosition:d,isDraggable:m,onClickOutside:v,showOverlay:y,defaultPosition:h})},setServiceImplementation:function(e){var t=e.dismiss,n=e.dismissAll,r=e.create;t&&(a._dismiss=t);n&&(a._dismissAll=n);r&&(a._create=r)}},a={_dismiss:function(){return console.warn("dismiss() NOT IMPLEMENTED")},_dismissAll:function(){return console.warn("dismissAll() NOT IMPLEMENTED")},_create:function(){return console.warn("create() NOT IMPLEMENTED")}};t.Z={name:n,create:function(e){e.configuration;return r}}},42586:function(e,t){"use strict";var n="UIModalService",r={name:n,hide:function(){return a._hide()},show:function(e){var t=e.content,n=void 0===t?null:t,r=e.contentProps,o=void 0===r?null:r,i=e.shouldCloseOnEsc,s=void 0===i||i,c=e.isOpen,l=void 0===c||c,u=e.closeButton,d=void 0===u||u,f=e.title,m=void 0===f?null:f,p=e.customClassName,y=void 0===p?null:p;return a._show({content:n,contentProps:o,shouldCloseOnEsc:s,isOpen:l,closeButton:d,title:m,customClassName:y})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(a._hide=t);n&&(a._show=n)}},a={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(){return console.warn("show() NOT IMPLEMENTED")}};t.Z={name:n,create:function(e){e.configuration;return r}}},34894:function(e,t){"use strict";var n="UINotificationService",r=[],a={name:n,hide:function(e){return o._hide({id:e})},show:function(e){var t=e.title,n=e.message,r=e.duration,a=void 0===r?5e3:r,i=e.position,s=void 0===i?"bottomRight":i,c=e.type,l=void 0===c?"info":c,u=e.autoClose,d=void 0===u||u;return o._show({title:t,message:n,duration:a,position:s,type:l,autoClose:d})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(o._hide=t);if(n)for(o._show=n;r.length>0;){var a=r.pop();o._show(a)}}},o={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(e){r.push(e),console.warn("show() NOT IMPLEMENTED")}};t.Z={name:n,create:function(e){e.configuration;return a}}},13527:function(e,t){"use strict";var n="UIViewportDialogService",r={name:n,hide:function(){return a._hide()},show:function(e){var t=e.viewportIndex,n=e.id,r=e.type,o=e.message,i=e.actions,s=e.onSubmit,c=e.onOutsideClick;return a._show({viewportIndex:t,id:n,type:r,message:o,actions:i,onSubmit:s,onOutsideClick:c})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(a._hide=t);n&&(a._show=n)}},a={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(){return console.warn("show() NOT IMPLEMENTED")}};t.Z={name:n,create:function(e){e.configuration;return r}}},27961:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="UserAuthenticationService",a={name:r,getState:function(){return o._getState()},setUser:function(e){return o._setUser(e)},getUser:function(){return o._getUser()},getAuthorizationHeader:function(){return o._getAuthorizationHeader()},handleUnauthenticated:function(){return o._handleUnauthenticated()},setServiceImplementation:function(e){var t=e.getState,n=e.setUser,r=e.getUser,a=e.getAuthorizationHeader,i=e.handleUnauthenticated,s=e.reset,c=e.set;t&&(o._getState=t);n&&(o._setUser=n);r&&(o._getUser=r);a&&(o._getAuthorizationHeader=a);i&&(o._handleUnauthenticated=i);s&&(o._reset=s);c&&(o._set=c)},reset:function(){return o._reset({})},set:function(e){return o._set(e)}},o={_getState:function(){return console.warn("getState() NOT IMPLEMENTED")},_setUser:function(){return console.warn("_setUser() NOT IMPLEMENTED")},_getUser:function(){return console.warn("_setUser() NOT IMPLEMENTED")},_getAuthorizationHeader:function(){},_handleUnauthenticated:function(){return console.warn("_handleUnauthenticated() NOT IMPLEMENTED")},_reset:function(){return console.warn("reset() NOT IMPLEMENTED")},_set:function(){return console.warn("set() NOT IMPLEMENTED")}};var i={name:r,create:function(e){e.configuration;return a}}},37765:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="ViewportGridService",a={name:r,getState:function(){return o._getState()},setActiveViewportIndex:function(e){return o._setActiveViewportIndex(e)},setDisplaysetForViewport:function(e){var t=e.viewportIndex,n=e.displaySetInstanceUID;return o._setDisplaysetForViewport({viewportIndex:t,displaySetInstanceUID:n})},setLayout:function(e){var t=e.numCols,n=e.numRows;return o._setLayout({numCols:t,numRows:n})},setCachedLayout:function(e){var t=e.numCols,n=e.numRows,r=e.viewports;return o._setLayout({numCols:t,numRows:n,viewports:r})},setServiceImplementation:function(e){var t=e.getState,n=e.setActiveViewportIndex,r=e.setDisplaysetForViewport,a=e.setCachedLayout,i=e.setLayout,s=e.reset,c=e.set;t&&(o._getState=t);n&&(o._setActiveViewportIndex=n);r&&(o._setDisplaysetForViewport=r);i&&(o._setLayout=i);s&&(o._reset=s);a&&(o._setCachedLayout=a);c&&(o._set=c)},reset:function(){return o._reset({})},set:function(e){return o._set(e)}},o={_getState:function(){return console.warn("getState() NOT IMPLEMENTED")},_setActiveViewportIndex:function(){return console.warn("setActiveViewportIndex() NOT IMPLEMENTED")},_setDisplaysetForViewport:function(){return console.warn("setDisplaysetForViewport() NOT IMPLEMENTED")},_setLayout:function(){return console.warn("setLayout() NOT IMPLEMENTED")},_reset:function(){return console.warn("reset() NOT IMPLEMENTED")},_setCachedLayout:function(){return console.warn("setCachedLayout() NOT IMPLEMENTED")},_set:function(){return console.warn("set() NOT IMPLEMENTED")}};var i={name:r,create:function(e){e.configuration;return a}}},28250:function(e,t,n){"use strict";var r=n(33464);t.Z={subscribe:function(e,t){var n=this;if(this._isValidEvent(e)){var a=(0,r.Z)(),o={id:a,callback:t};return console.info("Subscribing to '".concat(e,"'.")),Array.isArray(this.listeners[e])?this.listeners[e].push(o):this.listeners[e]=[o],{unsubscribe:function(){return n._unsubscribe(e,a)}}}throw new Error("Event ".concat(e," not supported."))},_broadcastEvent:function(e,t){var n=Object.keys(this.listeners).length>0,r=Array.isArray(this.listeners[e]);n&&r&&this.listeners[e].forEach((function(e){e.callback(t)}))},_unsubscribe:function(e,t){if(!this.listeners[e])return;var n=this.listeners[e];Array.isArray(n)?this.listeners[e]=n.filter((function(e){return e.id!==t})):this.listeners[e]=void 0},_isValidEvent:function(e){return Object.values(this.EVENTS).includes(e)}}},33464:function(e,t){"use strict";t.Z=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},78034:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r,a,o=n(50542),i=n.n(o);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:100},n=[],r=null,a=[],o=!1,i=null,s=e.prototype.handleKey;function c(e,t,n){var r=this;if(r.recording)if("keydown"==n.type){1===e.length&&o&&u();for(var i=0;i<t.length;++i)l(t[i]);l(e)}else"keyup"==n.type&&a.length>0&&u();else s.apply(r,arguments)}function l(e){for(var t=0;t<a.length;++t)if(a[t]===e)return;a.push(e),1===e.length&&(o=!0)}function u(){n.push(a),a=[],o=!1,m()}function d(e){for(var t=0;t<e.length;++t)e[t].sort((function(e,t){return e.length>1&&1===t.length?-1:1===e.length&&t.length>1||e>t?1:-1})),e[t]=e[t].join("+")}function f(){r&&(d(n),r(n)),n=[],r=null,a=[]}function m(){clearTimeout(i),i=setTimeout(f,t.timeout)}e.prototype.record=function(e){var t=this;t.recording=!0,r=function(){t.recording=!1,e.apply(t,arguments)}},e.prototype.stopRecord=function(){this.recording=!1},e.prototype.startRecording=function(){this.recording=!0},e.prototype.handleKey=function(){var e=this;c.apply(e,arguments)},e.init()}(i()),r=i(),a=r.prototype.stopCallback,r.prototype.stopCallback=function(e,t,n){return!!this.paused||a.call(this,e,t,n)},r.prototype.pause=function(){this.paused=!0},r.prototype.unpause=function(){this.paused=!1},r.init();var s=i()},98526:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{ZP:function(){return Ee}});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"set",value:function(t,n,r){var a=e.getPathComponents(n),o=null!==a?a.length:0,i=!1;if(o>0&&e.isValidObject(t)){for(var s=0,c=o-1,l=t;s<c;){var u=a[s];if(u in l){if(!e.isValidObject(l[u]))break}else l[u]={};l=l[u],s++}s===c&&(l[a[c]]=r,i=!0)}return i}},{key:"get",value:function(t,n){var r,a=e.getPathComponents(n),o=null!==a?a.length:0;if(o>0&&e.isValidObject(t)){for(var i=0,s=o-1,c=t;i<s;){var l=a[i],u=e.isValidObject(c[l]);if(!(l in c)||!u)break;c=c[l],i++}i===s&&a[s]in c&&(r=c[a[s]])}return r}},{key:"isValidObject",value:function(e){return"object"===r(e)&&null!==e&&e instanceof Object}},{key:"getPathComponents",value:function(e){return"string"==typeof e?e.split("."):null}}],(n=null)&&a(t.prototype,n),o&&a(t,o),e}(),i={},s={},c=[];s={createAndAddStack:function(e,t,n,r){var a=t.images,o=t.displaySetInstanceUID,i=t.StudyInstanceUID,s=t.frameRate,c=t.isClip,l=t.initialImageIdIndex;if(a){var u={StudyInstanceUID:i,displaySetInstanceUID:o,imageIds:n.getImageIdsForDisplaySet(t),frameRate:s,isClip:c,initialImageIdIndex:l};return e[o]=u,u}}};var l={clearStacks:function(){i={}},makeAndAddStack:function(e,t){return s.createAndAddStack(i,e,t,c)},findStack:function(e){return i[e]},findOrCreateStack:function(e,t){var n=this.findStack(e.displaySetInstanceUID);return n&&n.imageIds||(n=this.makeAndAddStack(e,t)),n},getAllStacks:function(){return i},addStackUpdatedCallback:function(e){if("function"!=typeof e)throw new Error("callback must be provided as a function");c.push(e)},getConfiguration:function(){return s},setConfiguration:function(e){s=e}},u=function(e){var t="/";if(!e)return t;var n=window.location.origin,r=n.split("/");if(r.length>4){var a=n.indexOf(r[3]);t+=n.substring(a)+e}else t+=e;return t.replace(/\/\/+/g,"/")},d=n(33464),f=n(28266),m=function(e){return e.sort((function(e,t){return e.seriesNumber!==t.seriesNumber?e.seriesNumber-t.seriesNumber:Date.parse(e.seriesDate)-Date.parse(t.seriesDate)}))};var p=n(29684),y=n.n(p),v=n(60952),h=n.n(v),g=n(75935),b=n(76643),S=n(9159);function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(e){if(e)return"function"==typeof e.getImageId?e.getImageId():e.url},D=function(e){return(Array.isArray(e)?e:[e]).some((function(e){return!e}))},x=function(e){return e&&e.images&&e.images[0]},k=function(e){return O(e)},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.ZP.getAuthorizationHeader();return fetch(e,t).then((function(e){return e.arrayBuffer()}))},C=function(e){return y().loadAndCacheImage(e).then((function(e){return e&&e.data&&e.data.byteArray.buffer}))},T=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b.ZP.getAuthorizationHeader(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:S.Z.getHTTPErrorHandler(),i={url:e,headers:a,errorInterceptor:o},s=new g.hi.DICOMwebClient(i);return s.retrieveInstance({studyInstanceUID:t,seriesInstanceUID:n,sopInstanceUID:r})},N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getLocalData",value:function(e,t){if(e&&e.localFile){var n=x(e),r=k(n);if(D(r)&&(r=function(e,t){var n=e.find((function(e){return e.displaySets.some((function(e){return e.displaySetInstanceUID===t}))})).series,r=((void 0===n?[]:n)[0]||{}).instances,a=(void 0===r?[]:r)[0];return O(a)}(t,e.displaySetInstanceUID)),!D(r))return h().wadouri.loadFileRequest(r)}}},{key:"getDataByImageType",value:function(e){var t=x(e);if(t){var n=k(t),r=P;switch(function(e){var t=/^\w+\:/,n=t.exec(e);return 0===t.lastIndex&&n&&n[0]&&n[0].replace(":","")||""}(n)){case"dicomfile":r=C.bind(this,n);break;case"wadors":var a=t.getData().wadoRoot,o=t.getStudyInstanceUID(),i=t.getSeriesInstanceUID(),s=t.getSOPInstanceUID();if(D([a,o,i,s]))return;r=T.bind(this,a,o,i,s);break;case"wadouri":if(n.substring(n.indexOf(":")+1),function(e){throw new TypeError('"'+e+'" is read-only')}("imageId"),D(n))return;r=P.bind(this,n)}return r()}}},{key:"getDataByDatasetType",value:function(e){var t=e.StudyInstanceUID,n=e.SeriesInstanceUID,r=e.SOPInstanceUID,a=e.authorizationHeaders,o=e.wadoRoot,i=e.wadoUri;return D(o)?D(i)?void 0:P(i,{headers:a}):T(o,t,n,r,a)}},{key:"getLoaderIterator",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalData(t,n);case 2:return e.next=4,this.getDataByImageType(t);case 4:return e.next=6,this.getDataByDatasetType(t);case 6:case"end":return e.stop()}}),e,this)}))},{key:"findDicomDataPromise",value:function(e,t){var n,r=w(this.getLoaderIterator(e,t));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a)return a}}catch(e){r.e(e)}finally{r.f()}throw new Error("Invalid dicom data loader")}}])&&I(t.prototype,n),r&&I(t,r),e}()),R=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),a=[],o=0;o<r.length;o+=n){for(var i=r.slice(o,o+n),s=new Array(i.length),c=0;c<i.length;c++)s[c]=i.charCodeAt(c);var l=new Uint8Array(s);a.push(l)}var u=new Blob(a,{type:t});return u},M=n(72124);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){return e[0].toLowerCase()+e.slice(1)}var L=function(e){return e?M.parse(e):{}},_={getQueryFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;if(t){var n=L(t),r={};return Object.entries(n).forEach((function(e){var t=A(e,2),n=t[0],a=t[1];r[U(n)]=a})),r}}},V={parse:L,queryString:_,paramString:{isValidPath:function(e){var t="/".concat(":");return e.indexOf(t)<0},parseParam:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return window.atob(e)}catch(t){return e}}(e);if(t&&"string"==typeof t)return t.split(";")},replaceParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="".concat(":").concat(t);return n?e.replace(r,n):e}}};function q(){var e,t,n=new Promise((function(n,r){t=n,e=r}));return Object.freeze({promise:n,resolve:t,reject:e})}var F=n(78034);function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){H(o,r,a,i,s,"next",e)}function s(e){H(o,r,a,i,s,"throw",e)}i(void 0)}))}}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=t,this.size=0,this.awaiting=null}var t,n,r;return t=e,(n=[{key:"bind",value:function(e){return Y(this,e)}},{key:"bindSafe",value:function(e,t){var n=Y(this,e);return function(){var e=Z(regeneratorRuntime.mark((function e(){var r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.apply(void 0,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),t(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}}])&&W(t.prototype,n),r&&W(t,r),e}();function Y(e,t){var n=G.bind(null,e);return function(){var r=Z(regeneratorRuntime.mark((function r(){var a,o,i,s,c=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.size>=e.limit)){r.next=2;break}throw new Error("Queue limit reached");case 2:for(a=c.length,o=new Array(a),i=0;i<a;i++)o[i]=c[i];return s=J(e.awaiting,t,o),e.awaiting=s.then(n,n),e.size++,r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()}function G(e){e.size>0&&0==--e.size&&(e.awaiting=null)}function J(e,t,n){return K.apply(this,arguments)}function K(){return(K=Z(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",n.apply(void 0,B(r)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=n(53806),Q=n.n(X);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(re(a)){if(a[1].length>0){te(a[1],t.bind(null,a[0]));continue}a=a[0]}t(a)}}function ne(e,t){var n=t.shift(),r=function(e,t){var n=function(e,t){if("string"==typeof t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(a===t||re(a)&&a[0]===t)return n}return-2}return-1}(e,t);-2===n&&(n=e.push(t)-1);return n}(e,n);if(r>=0){if(t.length>0){var a=e[r];return re(a)||(a=function(e){return[e+"",[]]}(n),e[r]=a),ne(a[1],t)}return!0}return!1}function re(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&Array.isArray(e[1])}var ae={addToList:function(e){if(Array.isArray(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length>0&&ne(e,n),e}return null},getItem:function e(t,n){if(Array.isArray(t)){var r=null,a="number"==typeof n?n:-1;if("string"==typeof n){var o=n.indexOf("/");o>0?(a=parseInt(n.slice(0,o),10),o+1<n.length&&(r=n.slice(o+1,n.length))):a=parseInt(n,10)}if(a>=0&&a<t.length){var i=t[a];return re(i)?null!==r?e(i[1],r):i[0]:i}}},forEach:function(e,t){return Array.isArray(e)?("function"==typeof t&&te(e,t),e):null},print:function(e){var t="";if(Array.isArray(e)){var n=[];te(e,(function(){for(var e=n.length,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];for(var i=0,s=a.length;i<s;++i)i<e&&a[i]===n[i]||(t+="  ".repeat(i)+a[i]+"\n");n=a}))}return t}};function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=Symbol("Type"),se=Symbol("Task"),ce=Symbol("List");function le(e){return he(ce,e)}function ue(e,t){return ve(se,{list:le(e)?e:null,next:de(t)?t:null,failed:!1,awaiting:null,progress:0})}function de(e){return he(se,e)}function fe(e){if(le(e)){var t=ue(e,e.head);return e.head=t,be(e,pe(e)),t}return null}function me(e){de(e)&&(e.progress=1,e.awaiting=null,Object.freeze(e),le(e.list)&&be(e.list,pe(e.list)))}function pe(e){var t=Object.seal({total:0,partial:0,progress:0,failures:0});if(le(e))for(var n=e.head;de(n);)t.total++,ge(n.progress)&&(t.partial+=n.progress,1===n.progress&&n.failed&&t.failures++),n=n.next;return t.total>0&&(t.progress=t.partial/t.total),Object.freeze(t)}function ye(e,t){var n=fe(e);return de(n)?(n.awaiting=Promise.resolve(t).then((function(){me(n)}),(function(){n.failed=!0,me(n)})),n):null}function ve(e,t){return Object.seal(Object.defineProperty(t,ie,{value:e}))}function he(e,t){return null!==t&&"object"===oe(t)&&t[ie]===e}function ge(e){return"number"==typeof e&&e>=0&&e<=1}function be(e,t){le(e)&&Array.isArray(e.observers)&&e.observers.length>0&&e.observers.slice().forEach((function(n){if("function"==typeof n)try{n(t,e)}catch(e){}}))}var Se={createList:function(){return ve(ce,{head:null,named:Object.create(null),observers:[]})},isList:le,createTask:ue,isTask:de,increaseList:fe,update:function(e,t){de(e)&&ge(t)&&t<1&&e.progress!==t&&(e.progress=t,le(e.list)&&be(e.list,pe(e.list)))},finish:me,getOverallProgress:pe,waitOn:ye,addDeferred:function(e){var t=q(),n=ye(e,t.promise);return Object.freeze({deferred:t,task:n})},setTaskName:function(e,t,n){return!(!function(e,t){if(le(e)&&de(t))for(var n=e.head;de(n);){if(n===t)return!0;n=n.next}return!1}(e,t)||null===e.named||"object"!==oe(e.named)||"string"!=typeof n)&&(e.named[n]=t,!0)},getTaskByName:function(e,t){if(le(e)&&null!==e.named&&"object"===oe(e.named)&&"string"==typeof t){var n=e.named[t];if(de(n))return n}return null},addObserver:function(e,t){return!(!le(e)||!Array.isArray(e.observers)||"function"!=typeof t)&&(e.observers.push(t),!0)},removeObserver:function(e,t){if(le(e)&&Array.isArray(e.observers)&&e.observers.length>0){var n=e.observers.indexOf(t);if(n>=0)return e.observers.splice(n,1),!0}return!1}},we=Object.freeze(["SEG","KO","PR","SR","RTSTRUCT"]);var Ee={guid:d.Z,ObjectPath:o,absoluteUrl:u,sortBy:f.Z,sortBySeriesDate:m,writeScript:function(e,t){var n=document.createElement("script");n.src=u(e),n.onload=function(){"function"==typeof t&&t(n)},document.body.appendChild(n)},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MMM-YYYY";return Q()(e).format(t)},formatPN:function(e){if(e)return e.replace("^",", ").replace(/\^/g," ").trim()},b64toBlob:R,StackManager:l,DicomLoaderService:N,urlUtil:V,makeDeferred:q,makeCancelable:function(e){var t=!1,n=Promise.resolve(e).then((function(e){if(t)throw Object.freeze({isCanceled:t});return e}),(function(e){if(t)throw Object.freeze({isCanceled:t,error:e});throw e}));return Object.assign(Object.create(n),{then:n.then.bind(n),cancel:function(){t=!0}})},hotkeys:F.Z,Queue:$,isDicomUid:function(e){return"string"==typeof e&&/^\d+(?:\.\d+)*$/.test(e.trim())},resolveObjectPath:function e(t,n,r){if(null!==t&&"object"===ee(t)&&"string"==typeof n){var a,o=n.indexOf(".");return o>=0?e(t[n.slice(0,o)],n.slice(o+1,n.length),r):void 0===(a=t[n])&&void 0!==r?r:a}},hierarchicalListUtils:ae,progressTrackingUtils:Se,isLowPriorityModality:function(e){return we.includes(e)}}},28266:function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments),t=e.length;return function(n,r){var a,o,i,s,c,l,u;for(u=0;u<t&&(l=0,a=n[s="string"==typeof(i=e[u])?i:i.name],o=r[s],void 0!==i.primer&&(a=i.primer(a),o=i.primer(o)),c=i.reverse?-1:1,a<o&&(l=-1*c),a>o&&(l=1*c),0===l);u++);return l}}n.d(t,{Z:function(){return r}})},52938:function(e,t,n){"use strict";n.d(t,{tk:function(){return Je},zx:function(){return ft},hE:function(){return wt},bC:function(){return K},hd:function(){return ji},Vq:function(){return Kt},Tu:function(){return w},bI:function(){return k},kL:function(){return rn},SV:function(){return vn},h4:function(){return vc},JO:function(){return Pr},us:function(){return F},II:function(){return Jr},OF:function(){return ya},wt:function(){return wa},u_:function(){return ln},DY:function(){return V},P_:function(){return Da},hs:function(){return Xa},wT:function(){return ve},aW:function(){return Eo},eX:function(){return xo},Oh:function(){return To},oW:function(){return jo},SI:function(){return Vo},X7:function(){return zo},YL:function(){return Zo},$S:function(){return ui},hA:function(){return Mi},Zt:function(){return es},ux:function(){return He},i1:function(){return Ks},uY:function(){return Os},mN:function(){return ke},mQ:function(){return As},_e:function(){return Us},CW:function(){return je},ZO:function(){return Fs},eJ:function(){return zs},vQ:function(){return X},zG:function(){return B},dd:function(){return L},md:function(){return Ze},en:function(){return De},O_:function(){return Ue}});var r=n(32735),a=n(60216),o=n.n(a),i=n(89294),s=n.n(i),c=n(40841),l=n.n(c),u=n(33464);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,r.createContext)(null),S=function(e){var t=e.children,n=e.service,a=v((0,r.useState)(!1),2),o=a[0],i=a[1],c=v((0,r.useState)([]),2),m=c[0],y=c[1],h=v((0,r.useState)(null),2),g=h[0],S=h[1],w=v((0,r.useState)(null),2),I=w[0],O=w[1],D=v((0,r.useState)([]),2),x=D[0],k=D[1];(0,r.useEffect)((function(){k(m.map((function(e){return p({id:e.id},P(e.id))})))}),[m]);var P=function(e){var t=document.querySelector("#root"),n=t.offsetLeft+t.offsetWidth/2,r=t.offsetTop+t.offsetHeight/2,a=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();return{x:n-a.width/2,y:r-a.height/2}};(0,r.useEffect)((function(){n&&n.setServiceImplementation({create:C,dismiss:T,dismissAll:N})}),[C,T,n]),(0,r.useEffect)((function(){return M(g)}),[M,g]);var C=(0,r.useCallback)((function(e){var t=e.id;return t||(t=(0,u.Z)()),y((function(n){return[].concat(f(n),[p(p({},e),{},{id:t})])})),S(t),t}),[]),T=(0,r.useCallback)((function(e){var t=e.id;return y((function(e){return e.filter((function(e){return e.id!==t}))}))}),[]),N=function(){y([])},R=function(){return m&&m.length<1},M=(0,r.useCallback)((function(e){y((function(t){var n=t.find((function(t){return t.id===e}));return n?[].concat(f(t.filter((function(t){return t.id!==e}))),[n]):t}))}),[]),A=function(e){var t=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();O({x:t.x,y:t.y})},j=function(e){return e&&"function"==typeof e};return r.createElement(b.Provider,{value:{create:C,dismiss:T,dismissAll:N,isEmpty:R}},!R()&&r.createElement("div",{className:"w-full h-full absolute",onKeyDown:function(e){"Escape"===e.key&&N()}},m.map((function(e){var t=e.id,n=e.content,a=e.contentProps,c=e.defaultPosition,u=e.centralize,f=void 0!==u&&u,m=e.preservePosition,p=void 0===m||m,y=e.isDraggable,v=void 0===y||y,h=e.onStart,g=e.onStop,b=e.onDrag,S=e.onClickOutside,w=e.showOverlay,O=p&&I||c;f&&(O=x.find((function(e){return e.id===t})));var D,k=r.createElement(s(),{key:t,disabled:!v,position:O,defaultPosition:O,bounds:"parent",onStart:function(e){var t=e||"undefined"!=typeof window&&window.event,n=t.target||t.srcElement;return!["SVG","BUTTON","PATH","INPUT","SPAN","LABEL"].includes(n.tagName.toUpperCase())&&(j(h)?h(e):void 0)},onStop:function(e){if(i(!1),j(g))return g(e)},onDrag:function(e){if(i(!0),M(t),A(t),j(b))return b(e)}},r.createElement("div",{id:"draggableItem-".concat(t),className:l()("DraggableItem",o&&"dragging",v&&"draggable"),style:{zIndex:"999",position:"absolute"},onClick:function(){return M(t)}},r.createElement(n,d({},e,a))));return w&&(D=k,k=r.createElement("div",{className:l()("fixed z-50 left-0 top-0 w-full h-full overflow-auto","bg-black bg-opacity-50"),key:t},D)),"function"==typeof S&&(k=r.createElement(E,{key:t,onClickOutside:S},k)),k}))),t)};S.defaultProps={service:null},S.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node,o().func]).isRequired,service:o().shape({setServiceImplementation:o().func})};var w=S;function E(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){function n(n){t.current&&!t.current.contains(n.target)&&e.onClickOutside()}return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[t]),r.createElement("div",{ref:t},e.children)}var I=n(43504),O=n(25977),D="undefined"!=typeof window&&!(!("ontouchstart"in window)&&!navigator.maxTouchPoints);function x(e){var t=e.children,n=O.PD;return console.log("using... touch backend?",D),r.createElement(I.W,{backend:n,opts:{}},t)}x.propTypes={children:o().any};var k=x,P=n(38942);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=(0,r.createContext)(null),U=j.Provider,L=function(){return(0,r.useContext)(j)},_=function(e){var t=e.children,n=e.modal,a=e.service,o={content:null,contentProps:null,shouldCloseOnEsc:!0,isOpen:!0,closeButton:!0,title:null,customClassName:""},i=(0,P.$G)("Modals").t,s=M((0,r.useState)(o),2),c=s[0],u=s[1],d=(0,r.useCallback)((function(e){return u(N(N({},c),e))}),[c]),f=(0,r.useCallback)((function(){return u(o)}),[o]);(0,r.useEffect)((function(){a&&a.setServiceImplementation({hide:f,show:d})}),[f,a,d]);var m=c.content,p=c.contentProps,y=c.isOpen,v=c.title,h=c.customClassName,g=c.shouldCloseOnEsc,b=c.closeButton;return r.createElement(U,{value:{show:d,hide:f}},m&&r.createElement(n,{className:l()(h,m.className),shouldCloseOnEsc:g,isOpen:y,title:i(v),closeButton:b,onClose:f},r.createElement(m,C({},p,{show:d,hide:f}))),t)};_.defaultProps={service:null},_.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,modal:o().oneOfType([o().arrayOf(o().node),o().node,o().func]).isRequired,service:o().shape({setServiceImplementation:o().func})};var V=_,q=(j.Consumer,(0,r.createContext)());function F(e){var t=e.StudyInstanceUIDs,n=(e.reducer,e.initialState,e.children),a=(0,r.useMemo)((function(){return{StudyInstanceUIDs:t}}),[t]);return r.createElement(q.Provider,{value:a},n)}var B=function(){return(0,r.useContext)(q)};function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={isCineEnabled:!1,cines:{}},G={isPlaying:!1,frameRate:24},J=(0,r.createContext)(Y);function K(e){var t=e.children,n=e.service,a=z((0,r.useReducer)((function(e,t){switch(t.type){case"SET_CINE":var n=t.payload,r=n.id,a=n.frameRate,o=n.isPlaying,i=void 0===o?void 0:o,s=e.cines;return s[r]||(s[r]=W({id:r},G)),s[r].frameRate=a||s[r].frameRate,s[r].isPlaying=void 0!==i?i:s[r].isPlaying,W(W({},e),{cines:s});case"SET_IS_CINE_ENABLED":return W(W({},e),{isCineEnabled:t.payload});default:return t.payload}}),Y),2),o=a[0],i=a[1],s=(0,r.useCallback)((function(){return o}),[o]),c=(0,r.useCallback)((function(e){return i({type:"SET_IS_CINE_ENABLED",payload:e})}),[i]),l=(0,r.useCallback)((function(e){var t=e.id,n=e.frameRate,r=e.isPlaying;return i({type:"SET_CINE",payload:{id:t,frameRate:n,isPlaying:r}})}),[i]);(0,r.useEffect)((function(){n&&n.setServiceImplementation({getState:s,setIsCineEnabled:c,setCine:l})}),[s,n,l,c]);var u={getState:s,setCine:l,setIsCineEnabled:c};return r.createElement(J.Provider,{value:[o,u]},t)}K.propTypes={children:o().any,service:o().shape({setServiceImplementation:o().func}).isRequired};var X=function(){return(0,r.useContext)(J)},Q="info",ee="warning",te="success",ne="error";function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){var t,n=e.options,a=e.onClose,o=function(){return a(n.id)};(0,r.useEffect)((function(){n.autoClose&&setTimeout((function(){return o()}),n.duration)}),[]);var i=(re(t={},Q,"bg-primary-active"),re(t,ee,"bg-yellow-600"),re(t,te,"bg-green-600"),re(t,ne,"bg-red-600"),t);return r.createElement("div",{className:l()("".concat(n.visible?"":"duration-300 transition-all ease-in-out h-0 opacity-0 pt-0 mb-0 pb-0"," sb-item"),i[n.type])},r.createElement("span",{className:"sb-closeBtn",onClick:o},r.createElement("span",{className:"sb-closeIcon"},"x")),n.title&&r.createElement("div",{className:"sb-title"},n.title),n.message&&r.createElement("div",{className:"sb-message"},n.message))},oe=function(){var e,t=pe(),n=t.snackbarItems,a=t.hide;return r.createElement(r.Fragment,null,(e={topLeft:[],topCenter:[],topRight:[],bottomLeft:[],bottomCenter:[],bottomRight:[]},n.forEach((function(t){return e[t.position].push(t)})),n&&r.createElement("div",null,Object.keys(e).map((function(t){return e[t].length?r.createElement("div",{key:t,className:"fixed z-50 p-6 box-border h-auto sb-".concat(t)},e[t].map((function(e,t){return r.createElement("div",{key:e.id+t},function(e){return r.createElement(ae,{key:e.itemId,options:e,onClose:a})}(e))}))):null})))))};function ie(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||de(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=(0,r.createContext)(null),pe=function(){return(0,r.useContext)(me)},ye=function(e){var t=e.children,n=e.service,a={title:"",message:"",duration:5e3,autoClose:!0,position:"bottomRight",type:Q},o=ue((0,r.useState)(1),2),i=o[0],s=o[1],c=ue((0,r.useState)([]),2),l=c[0],u=c[1];(0,r.useEffect)((function(){n&&n.setServiceImplementation({hide:f,show:d})}),[n,f,d]);var d=(0,r.useCallback)((function(e){if(!e||!e.title&&!e.message)return console.warn("Snackbar cannot be rendered without required parameters: title | message"),null;var t=ce(ce(ce({},a),e),{},{id:i,visible:!0});u((function(e){return[].concat(ie(e),[t])})),s(i+1)}),[i,a]),f=(0,r.useCallback)((function(e){u((function(t){return t.map((function(t){return t.id===e&&(t.visible=!1),t}))})),setTimeout((function(){u((function(t){return ie(t.filter((function(t){return t.id!==e})))}))}),1e3)}),[u]),m=function(){s(1),u((function(){return[]}))};return"undefined"!=typeof window&&(window.snackbar={show:d,hide:f,hideAll:m}),r.createElement(me.Provider,{value:{show:d,hide:f,hideAll:m,snackbarItems:l}},!!l&&r.createElement(oe,null),t)};ye.defaultProps={service:null},ye.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node,o().func]).isRequired,service:o().shape({setServiceImplementation:o().func})};var ve=ye;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee={viewportIndex:null,message:void 0,type:"info",actions:void 0,onSubmit:function(){console.log("btn value?")},onOutsideClick:function(){console.warn("default: onOutsideClick")},onDismiss:function(){console.log("dismiss? -1")}},Ie=(0,r.createContext)(null),Oe=Ie.Provider,De=function(){return(0,r.useContext)(Ie)},xe=function(e){var t=e.children,n=e.service,a=Se((0,r.useState)(Ee),2),o=a[0],i=a[1],s=(0,r.useCallback)((function(e){return i(ge(ge({},o),e))}),[o]),c=(0,r.useCallback)((function(){return i(Ee)}),[]);return(0,r.useEffect)((function(){n&&n.setServiceImplementation({hide:c,show:s})}),[c,n,s]),r.createElement(Oe,{value:[o,{show:s,hide:c}]},t)};xe.propTypes={children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired,service:o().shape({setServiceImplementation:o().func})};var ke=xe;function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me={numRows:null,numCols:null,viewports:[],activeViewportIndex:0},Ae=(0,r.createContext)(Me);function je(e){var t=e.children,n=e.service,a=Pe((0,r.useReducer)((function(e,t){switch(t.type){case"SET_ACTIVE_VIEWPORT_INDEX":return Ne(Ne({},e),{activeViewportIndex:t.payload});case"SET_DISPLAYSET_FOR_VIEWPORT":var n=t.payload,r=n.viewportIndex,a=n.displaySetInstanceUID,o=e.viewports.slice();return o[r]={displaySetInstanceUID:a},Ne(Ne(Ne({},e),{viewports:o}),{},{cachedLayout:null});case"SET_LAYOUT":for(var i=t.payload,s=i.numCols,c=i.numRows,l=s*c,u=e.viewports.slice(),d=e.activeViewportIndex>=l?0:e.activeViewportIndex;u.length<l;)u.push({});for(;u.length>l;)u.pop();return Ne(Ne(Ne({},e),{activeViewportIndex:d,numCols:s,numRows:c,viewports:u}),{},{cachedLayout:null});case"RESET":return{numCols:null,numRows:null,activeViewportIndex:0,viewports:[{displaySetInstanceUID:null}],cachedLayout:null};case"SET_CACHED_LAYOUT":return Ne(Ne({},e),{},{cachedLayout:t.payload});case"SET":return Ne(Ne({},e),t.payload);default:return t.payload}}),Me),2),o=a[0],i=a[1],s=(0,r.useCallback)((function(){return o}),[o]),c=(0,r.useCallback)((function(e){return i({type:"SET_ACTIVE_VIEWPORT_INDEX",payload:e})}),[i]),l=(0,r.useCallback)((function(e){var t=e.viewportIndex,n=e.displaySetInstanceUID;return i({type:"SET_DISPLAYSET_FOR_VIEWPORT",payload:{viewportIndex:t,displaySetInstanceUID:n}})}),[i]),u=(0,r.useCallback)((function(e){var t=e.numCols,n=e.numRows;return i({type:"SET_LAYOUT",payload:{numCols:t,numRows:n}})}),[i]),d=(0,r.useCallback)((function(){return i({type:"RESET",payload:{}})}),[i]),f=(0,r.useCallback)((function(e){return i({type:"SET_CACHED_LAYOUT",payload:e})}),[i]),m=(0,r.useCallback)((function(e){return i({type:"SET",payload:e})}),[i]);(0,r.useEffect)((function(){n&&n.setServiceImplementation({getState:s,setActiveViewportIndex:c,setDisplaysetForViewport:l,setLayout:u,reset:d,setCachedLayout:f,set:m})}),[s,n,c,l,u,d,f,m]);var p={getState:s,setActiveViewportIndex:c,setDisplaysetForViewport:l,setLayout:u,setCachedLayout:f,reset:d,set:m};return r.createElement(Ae.Provider,{value:[o,p]},t)}je.propTypes={children:o().any,service:o().shape({setServiceImplementation:o().func}).isRequired};var Ue=function(){return(0,r.useContext)(Ae)};function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be={user:null,enabled:!1},ze=(0,r.createContext)(Be);function He(e){var t=e.children,n=e.service,a=Le((0,r.useReducer)((function(e,t){switch(t.type){case"SET_USER":return qe(qe({},e),{user:t.payload.user});case"RESET":return{user:null};case"SET":return qe(qe({},e),t.payload);default:return t.payload}}),Be),2),o=a[0],i=a[1],s=(0,r.useCallback)((function(){return o}),[o]),c=(0,r.useCallback)((function(e){return i({type:"SET_USER",payload:{user:e}})}),[i]),l=(0,r.useCallback)((function(){return o.user}),[o]),u=(0,r.useCallback)((function(){return i({type:"RESET",payload:{}})}),[i]),d=(0,r.useCallback)((function(e){return i({type:"SET",payload:e})}),[i]);(0,r.useEffect)((function(){n&&n.setServiceImplementation({getState:s,setUser:c,getUser:l,reset:u,set:d})}),[s,n,c,l,u,d]),n&&n.setServiceImplementation({getState:s,setUser:c,getUser:l,reset:u,set:d});var f={getState:s,setUser:c,getUser:l,getAuthorizationHeader:n.getAuthorizationHeader,handleUnauthenticated:n.handleUnauthenticated,reset:u,set:d};return r.createElement(ze.Provider,{value:[o,f]},t)}ze.Consumer;He.propTypes={children:o().any,service:o().shape({setServiceImplementation:o().func}).isRequired};var Ze=function(){return(0,r.useContext)(ze)},We=n(26251),$e=function(e){var t=e.href,n=e.children,a=e.showIcon,o=void 0!==a&&a;return r.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},r.createElement(ps,{variant:"subtitle",component:"p",className:"flex items-center text-primary-active"},n,!!o&&r.createElement(Pr,{name:"external-link",className:"w-5 text-white ml-2"})))},Ye=function(e){var t=e.title,n=e.value,a=e.link;return r.createElement("div",{className:"flex mb-4"},r.createElement(ps,{variant:"subtitle",component:"p",className:"text-white w-48"},t),a?r.createElement($e,{href:a},n):r.createElement(ps,{variant:"subtitle",component:"p",className:"text-white w-48"},n))},Ge=function(e){var t=e.buildNumber,n=e.versionNumber,a=(0,We.Z)(),o=a.os,i=a.version,s=a.name,c="".concat(s[0].toUpperCase()).concat(s.substr(1)," ").concat(i),l=function(e){return r.createElement("div",{className:"border-b-2 border-black pb-3 mb-3"},r.createElement(ps,{variant:"h6",className:"text-primary-light"},e))};return r.createElement("div",null,l("Important Links"),r.createElement("div",{className:"flex mb-8"},r.createElement($e,{href:"https://community.ohif.org/",showIcon:!0},"Visit the forum"),r.createElement("span",{className:"ml-4"},r.createElement($e,{href:"https://github.com/OHIF/Viewers/issues/new/choose",showIcon:!0},"Report an issue")),r.createElement("span",{className:"ml-4"},r.createElement($e,{href:"https://ohif.org/",showIcon:!0},"More details"))),l("Version Information"),r.createElement("div",{className:"flex flex-col"},r.createElement(Ye,{title:"Repository URL",value:"https://github.com/OHIF/Viewers/tree/v3-stable",link:"https://github.com/OHIF/Viewers/tree/v3-stable"}),r.createElement(Ye,{title:"Version number",value:n}),r.createElement(Ye,{title:"Build number",value:t}),r.createElement(Ye,{title:"Browser",value:c}),r.createElement(Ye,{title:"OS",value:o})))};Ge.propTypes={buildNumber:o().string,versionNumber:o().string};var Je=Ge,Ke=["children","variant","color","size","rounded","disabled","type","fullWidth","startIcon","endIcon","name","className","onClick"];function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var et="default",tt=!1,nt=!1,rt="medium",at="medium",ot="button",it="contained",st={none:"",small:"rounded",medium:"rounded-md",large:"rounded-lg",full:"rounded-full"},ct={text:{default:"text-primary-light hover:bg-primary-light hover:text-white active:opacity-80 focus:bg-primary-light focus:text-white",primary:"text-primary-main hover:bg-primary-main hover:text-white active:opacity-80 focus:bg-primary-main focus:text-white",secondary:"text-secondary-light hover:bg-secondary-light hover:text-white active:opacity-80 focus:bg-secondary-light focus:text-white",white:"text-white hover:bg-white hover:text-black active:opacity-80 focus:bg-white focus:text-black",black:"text-black hover:bg-black hover:text-white focus:bg-black focus:text-white active:opacity-80"},outlined:{default:"border bg-trasparent border-primary-light text-primary-light hover:bg-primary-light hover:text-black focus:text-black focus:bg-primary-light active:opacity-80",primary:"border bg-transparent border-primary-main text-primary-main hover:opacity-80 active:opacity-100 focus:opacity-80",secondary:"border bg-transparent border-secondary-light text-secondary-light hover:opacity-80 active:opacity-100 focus:opacity-80",white:"border bg-transparent border-white text-white hover:opacity-80 active:opacity-100 focus:opacity-80",black:"border bg-black border-primary-main text-white hover:bg-primary-main focus:bg-primary-main hover:border-black focus:border-black"},contained:{default:"bg-primary-light text-black hover:opacity-80 active:opacity-100 focus:opacity-80",primary:"bg-primary-main text-white hover:opacity-80 active:opacity-100 focus:opacity-80",secondary:"bg-secondary-light text-white hover:opacity-80 active:opacity-100 focus:opacity-80",white:"bg-white text-black hover:opacity-80 active:opacity-100 focus:opacity-80",black:"bg-black text-white hover:opacity-80 active:opacity-100 focus:opacity-80",light:"border bg-primary-light border-primary-light text-black hover:opacity-80 active:opacity-100 focus:opacity-80"},disabled:{default:"cursor-not-allowed opacity-50 bg-primary-light text-black",primary:"cursor-not-allowed opacity-50 bg-primary-main text-white",secondary:"cursor-not-allowed opacity-50 bg-secondary-light text-white",white:"cursor-not-allowed opacity-50 bg-white text-black",black:"cursor-not-allowed opacity-50 bg-black text-white",light:"cursor-not-allowed opacity-50 border bg-primary-light border-primary-light text-black"}},lt={small:"py-2 px-2 text-sm min-w-md",medium:"py-2 px-2 text-lg min-w-md",large:"py-2 px-6 text-xl min-w-md",initial:""},ut={true:"flex w-full",false:"inline-flex"},dt=function(e){var t=e.children,n=e.variant,a=void 0===n?it:n,o=e.color,i=void 0===o?et:o,s=e.size,c=void 0===s?at:s,u=e.rounded,d=void 0===u?rt:u,f=e.disabled,m=void 0===f?tt:f,p=e.type,y=void 0===p?ot:p,v=e.fullWidth,h=void 0===v?nt:v,g=e.startIcon,b=e.endIcon,S=e.name,w=e.className,E=e.onClick,I=Qe(e,Ke),O=g&&r.createElement("div",{className:"mr-2"},r.cloneElement(g,{className:l()("w-4 h-4 fill-current")})),D=b&&r.createElement("div",{className:"ml-2"},r.cloneElement(b,{className:l()("w-4 h-4 fill-current")})),x=(0,r.useRef)(null);return r.createElement("button",Xe({className:l()(w,"leading-none font-sans text-center justify-center items-center outline-none transition duration-300 ease-in-out focus:outline-none",ct[a][i],st[d],lt[c],ut[h]),disabled:m,ref:x,onClick:function(e){x.current.blur(),m||E(e)},type:y,"data-cy":"".concat(S,"-btn")},I),O,t,D)};dt.propTypes={children:o().node,size:o().oneOf(["small","medium","large","initial","inherit"]),rounded:o().oneOf(["none","small","medium","large","full"]),variant:o().oneOf(["text","outlined","contained"]),color:o().oneOf(["default","primary","secondary","white","black","inherit","light"]),fullWidth:o().bool,disabled:o().bool,type:o().string,name:o().string,startIcon:o().node,endIcon:o().node,className:o().string,onClick:o().func.isRequired};var ft=dt,mt=["children","className","disabled","fullWidth","color","orientation","rounded","size","variant"];function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vt={vertical:{none:"",small:"first:rounded-t last:rounded-b",medium:"first:rounded-t-md last:rounded-b-md",large:"first:rounded-t-lg last:rounded-b-lg",full:"first:rounded-t-full last:rounded-b-full"},horizontal:{none:"",small:"first:rounded-l last:rounded-r",medium:"first:rounded-l-md last:rounded-r-md",large:"first:rounded-l-lg last:rounded-r-lg",full:"first:rounded-l-full last:rounded-r-full"}},ht={text:{vertical:"border-t-0 border-l-0 border-r-0 last:border-b-0",horizontal:"border-l-0 border-t-0 border-b-0 last:border-r-0"},outlined:{vertical:"border border-b-0 last:border-b",horizontal:"border border-r-0 last:border-r"},contained:{vertical:"border-t-0 border-l-0 border-r-0 last:border-b-0",horizontal:"border-l-0 border-t-0 border-b-0 last:border-r-0"}},gt={text:{default:"border-primary-light",primary:"border-primary-main",secondary:"border-secondary-light",white:"border-white",black:"border-primary-main"},outlined:{default:"",primary:"",secondary:"",white:"",black:"border-primary-main group-hover:bg-primary-main group-hover:border-black"},contained:{default:"border-white",primary:"border-white",secondary:"border-white",white:"border-black",black:"border-primary-main"}},bt={vertical:"flex-col",horizontal:"flex-row"},St=function(e){var t=e.children,n=e.className,a=e.disabled,o=void 0!==a&&a,i=e.fullWidth,s=void 0!==i&&i,c=e.color,u=void 0===c?"default":c,d=e.orientation,f=void 0===d?"horizontal":d,m=e.rounded,p=void 0===m?"medium":m,y=e.size,v=void 0===y?"medium":y,h=e.variant,g=void 0===h?"outlined":h,b=yt(e,mt),S=(0,r.useRef)(null),w=l()("border outline-none",ht[g]&&ht[g][f],gt[g]&&gt[g][u],vt[f]&&vt[f][p]);return r.createElement("div",pt({role:"group",className:l()("group",n,bt[f],s?"flex":"inline-flex"),ref:S},b),r.Children.map(t,(function(e){return r.isValidElement(e)?r.cloneElement(e,{className:l()(w,e.props.className),disabled:e.props.disabled||o,color:e.props.color||u,fullWidth:s,rounded:"none",size:e.props.size||v,variant:e.props.variant||g}):null})))};St.propTypes={children:o().node.isRequired,className:o().string,color:o().oneOf(["default","inherit","primary","secondary","white","black"]),disabled:o().bool,fullWidth:o().bool,orientation:o().oneOf(["vertical","horizontal"]),rounded:o().oneOf(["none","small","medium","large","full"]),size:o().oneOf(["small","medium","large","inherit"]),variant:o().oneOf(["text","outlined","contained"])};var wt=St,Et=function(e){var t=e.items;return r.createElement("div",{className:"relative bg-secondary-dark rounded z-50 block w-48",onContextMenu:function(e){return e.preventDefault()}},t.map((function(e,t){return r.createElement("div",{key:t,onClick:function(){return e.action(e)},className:"flex px-4 py-3 cursor-pointer items-center transition duration-300 hover:bg-primary-dark border-b border-primary-dark last:border-b-0"},r.createElement(ps,null,e.label))})))};Et.propTypes={items:o().arrayOf(o().shape({label:o().string.isRequired,actionType:o().string.isRequired,action:o().func.isRequired})).isRequired};var It=Et,Ot=n(40001),Dt=n.n(Ot);function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pt=function(e){var t=e.isPlaying,n=e.minFrameRate,a=e.maxFrameRate,o=e.stepFrameRate,i=e.frameRate,s=e.onFrameRateChange,c=e.onPlayPauseChange,l=e.onClose,u=xt((0,r.useState)(i),2),d=u[0],f=u[1],m=Dt()(s,300);return r.createElement("div",{className:"flex flex-row items-center justify-center h-10 border rounded-full CinePlayer border-primary-light"},r.createElement(Vr,{variant:"text",color:"inherit",size:"initial",className:"ml-4 mr-3 text-primary-active",onClick:function(){return c(!t)}},r.createElement(Pr,{width:"15px",height:"15px",name:{false:{icon:"old-play"},true:{icon:"old-stop"}}[t].icon})),r.createElement("div",{className:"flex flex-col justify-center h-full pt-2 pl-1 pr-1 mr-3"},r.createElement("input",{type:"range",name:"frameRate",min:n,max:a,step:o,value:d,onChange:function(e){var t=e.target,n=parseFloat(t.value);m(n),f(n)}}),r.createElement("p",{className:"-mt-2 text-sm text-primary-light"},"".concat(d.toFixed(1)," fps"))),r.createElement(Vr,{color:"inherit",size:"initial",className:"mr-3 border rounded-full text-primary-active border-primary-active",onClick:l},r.createElement(Pr,{name:"close",width:"15px",height:"15px"})))},Ct=function(){};Pt.defaultProps={isPlaying:!1,minFrameRate:1,maxFrameRate:90,stepFrameRate:1,frameRate:24,onPlayPauseChange:Ct,onFrameRateChange:Ct,onClose:Ct},Pt.propTypes={minFrameRate:o().number.isRequired,maxFrameRate:o().number.isRequired,stepFrameRate:o().number.isRequired,frameRate:o().number.isRequired,isPlaying:o().bool.isRequired,onPlayPauseChange:o().func,onFrameRateChange:o().func,onClose:o().func};var Tt=Pt,Nt=n(53806),Rt=n.n(Nt),Mt=n(46740);n(5639);function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ut=Rt()(),Lt=[{text:"Today",start:Ut,end:Ut},{text:"Last 7 days",start:Rt()().subtract(7,"day"),end:Ut},{text:"Last 30 days",start:Rt()().subtract(1,"month"),end:Ut}],_t=function(){for(var e=Rt()().year(),t=[],n=0;n<20;n++){var a=e-n;t.push(r.createElement("option",{key:a,value:a},a))}return t},Vt=function(e){var t=e.id,n=e.onChange,a=e.startDate,i=e.endDate,s=At((0,r.useState)(null),2),c=s[0],l=s[1],u=(0,r.useCallback)(_t,[]),d=a?Rt()(a,"YYYYMMDD"):null,f=i?Rt()(i,"YYYYMMDD"):null;return r.createElement(Mt.DateRangePicker,{startDate:d,startDateId:"date-range-".concat(t,"-start-date"),endDate:f,endDateId:"date-range-".concat(t,"-end-date"),onDatesChange:function(e){var t=e.startDate,r=e.endDate;n({startDate:t?t.format("YYYYMMDD"):void 0,endDate:r?r.format("YYYYMMDD"):void 0})},focusedInput:c,onFocusChange:function(e){return l(e)},renderCalendarInfo:function(){return r.createElement("div",{className:"PresetDateRangePicker_panel flex justify-between"},Lt.map((function(e){var t=e.text,a=e.start,o=e.end;return r.createElement("button",{key:t,type:"button",className:"m-0 py-2 px-3 bg-primary-main border-0 rounded text-white text-base transition duration-300 hover:opacity-80",onClick:function(){return n({startDate:a?a.format("YYYYMMDD"):void 0,endDate:o?o.format("YYYYMMDD"):void 0,preset:!0})}},t)})))},renderMonthElement:function e(t){var n=t.month,a=t.onMonthSelect,i=t.onYearSelect;e.propTypes={month:o().object,onMonthSelect:o().func,onYearSelect:o().func};var s=function(){};return r.createElement("div",{className:"flex justify-center"},r.createElement("div",{className:"my-0 mx-1"},r.createElement("select",{className:"DateRangePicker_select",value:n.month(),onChange:function(e){a(n,e.target.value)},onBlur:s},Rt().months().map((function(e,t){return r.createElement("option",{key:t,value:t},e)})))),r.createElement("div",{className:"my-0 mx-1"},r.createElement("select",{className:"DateRangePicker_select",value:n.year(),onChange:function(e){i(n,e.target.value)},onBlur:s},u())))},startDatePlaceholderText:"Start Date",endDatePlaceholderText:"End Date",phrases:{closeDatePicker:"Close",clearDates:"Clear dates"},isOutsideRange:function(e){return!(0,Mt.isInclusivelyBeforeDay)(e,Rt()())},hideKeyboardShortcutsPanel:!0,numberOfMonths:1,showClearDates:!1,anchorDirection:"left"})};Vt.defaultProps={id:"",startDate:null,endDate:null},Vt.propTypes={id:o().string,startDate:o().string,endDate:o().object,onChange:o().func.isRequired};var qt=Vt,Ft=function(e){var t=e.actions,n=e.className,a=e.onSubmit,o=e.value;return r.createElement("div",{className:l()("flex items-center justify-end","border-t-2 border-solid border-black rounded-b","p-6","bg-primary-dark",n)},t.map((function(e,t){var n=0===t,i="primary"===e.type;return r.createElement(ft,{key:t,className:l()({"ml-2":!n},e.classes),color:i?"primary":void 0,onClick:function(t){return a({action:e,value:o,event:t})},style:{transition:"all .15s ease",height:34}},e.text)})))};Ft.propTypes={className:o().string,onSubmit:o().func.isRequired,actions:o().arrayOf(o().shape({id:o().string.isRequired,text:o().string.isRequired,value:o().any,type:o().oneOf(["primary","secondary","cancel"]).isRequired,classes:o().arrayOf(o().string)})).isRequired},Ft.defaultProps={onSubmit:function(){},actions:[]};var Bt=Ft,zt=function(e){var t=e.text,n=e.className;return r.createElement("div",{className:l()("relative flex-auto","bg-primary-dark",n)},r.createElement("div",{className:"p-6"},r.createElement(ps,{variant:"body",className:"my-4 leading-relaxed"},t)))};zt.propTypes={text:o().string,className:o().string};var Ht=zt,Zt=function(e){var t=e.onClick;return r.createElement(Pr,{"data-cy":"close-button",onClick:t,name:"close",className:"cursor-pointer text-primary-active w-6 h-6"})};Zt.propTypes={onClick:o().func};var Wt=function(e){var t=e.title,n=e.noCloseButton,a=e.onClose;return r.createElement("div",{className:l()("bg-secondary-main","flex items-center justify-between","border-b-2 border-solid border-black rounded-t","p-4")},r.createElement(ps,{variant:"h6",className:"text-primary-active"},t),!n&&r.createElement(Zt,{onClick:a}))};Wt.propTypes={className:o().string,title:o().string,noCloseButton:o().bool,onClose:o().func},Wt.defaultProps={noCloseButton:!1};var $t=Wt;function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt=function(e){var t=e.title,n=e.text,a=e.onClose,o=e.noCloseButton,i=e.actions,s=e.onShow,c=e.onSubmit,u=e.header,d=e.body,f=e.footer,m=e.value,p=Yt((0,r.useState)(m),2),y=p[0],v=p[1];return(0,r.useEffect)((function(){s&&s()}),[s]),r.createElement("div",{className:l()("bg-secondary-light","flex flex-col","border-0 rounded-lg shadow-lg","outline-none focus:outline-none","relative","w-full")},r.createElement(u,{title:t,noCloseButton:o,onClose:a,value:y,setValue:v}),r.createElement(d,{text:n,value:y,setValue:v}),r.createElement(f,{actions:i,onSubmit:c,value:y,setValue:v}))};Jt.propTypes={title:o().string,text:o().string,onClose:o().func,noCloseButton:o().bool,header:o().oneOfType([o().node,o().func]),body:o().oneOfType([o().node,o().func]),footer:o().oneOfType([o().node,o().func]),onSubmit:o().func.isRequired,value:o().object,actions:o().arrayOf(o().shape({id:o().string.isRequired,text:o().string.isRequired,value:o().any,type:o().oneOf(["primary","secondary","cancel"]).isRequired})).isRequired},Jt.defaultProps={header:$t,footer:Bt,body:Ht,value:{}};var Kt=Jt;function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var en=function(e){var t=e.id,n=e.children,a=e.showDropdownIcon,i=e.list,s=Xt((0,r.useState)(!1),2),c=s[0],u=s[1],d=(0,r.useRef)(null),f=(0,r.useCallback)((function(e){var t=e.id,n=e.title,a=e.icon,o=e.onClick;return r.createElement("div",{key:n,className:l()("flex px-4 py-2 cursor-pointer items-center transition duration-300 hover:bg-secondary-main border-b last:border-b-0 border-secondary-main"),onClick:function(){u(!1),o()},"data-cy":t},!!a&&r.createElement(Pr,{name:a,className:"text-white w-4 mr-2"}),r.createElement(ps,null,n))}),[]);f.defaultProps={icon:""},f.propTypes={id:o().string,title:o().string.isRequired,icon:o().string,onClick:o().func.isRequired};var m=function(e){d.current&&!d.current.contains(e.target)&&u(!1)};return(0,r.useEffect)((function(){document.addEventListener("click",m),c||document.removeEventListener("click",m)}),[c]),r.createElement("div",{"data-cy":"dropdown",ref:d,className:"relative"},r.createElement("div",{className:"cursor-pointer flex items-center",onClick:function(){u((function(e){return!e}))}},r.createElement("div",{className:"flex text-white items-center"},n,a&&r.createElement(Pr,{name:"chevron-down",className:"text-white ml-1"}))),r.createElement("div",{className:l()("absolute top-100 right-0 mt-2 z-10 origin-top-right transition duration-300 transform bg-primary-dark border border-secondary-main rounded shadow",{"scale-0":!c,"scale-100":c}),"data-cy":"".concat(t,"-dropdown")},i.map((function(e,t){return r.createElement(f,{id:e.id,title:e.title,icon:e.icon,onClick:e.onClick,key:t})}))))};en.defaultProps={showDropdownIcon:!0},en.propTypes={id:o().string,children:o().node.isRequired,showDropdownIcon:o().bool,list:o().arrayOf(o().shape({title:o().string.isRequired,icon:o().string,onClick:o().func.isRequired})).isRequired};var tn=en,nn=function(e){var t=e.className,n=e.isLoading;return r.createElement("div",{className:l()("flex-col inline-flex items-center",t)},r.createElement(Pr,{name:"magnifier",className:"mb-4"}),r.createElement(ps,{className:"text-primary-light",variant:"h5"},n?"Loading...":"No studies available"))};nn.defaultProps={className:""},nn.propTypes={className:o().string};var rn=nn,an=n(74656),on=n(83089),sn=n.n(on);"undefined"!=typeof document&&sn().setAppElement(document.getElementById("root"));var cn=function(e){var t=e.closeButton,n=e.shouldCloseOnEsc,a=e.isOpen,o=e.title,i=e.onClose,s=e.children,c=L().hide;return r.createElement(sn(),{className:"relative w-11/12 lg:w-10/12 xl:w-1/2 max-h-full outline-none  text-white",overlayClassName:"fixed top-0 left-0 right-0 bottom-0 z-50 bg-overlay flex items-start justify-center py-16",shouldCloseOnEsc:n,onRequestClose:function(){c()},isOpen:a,title:o},o&&r.createElement("header",{className:"flex items-center p-4 border-b-2 border-black bg-secondary-dark rounded-tl rounded-tr"},r.createElement(ps,{variant:"h4",className:"flex flex-grow text-primary-light font-light"},o),t&&r.createElement(Pr,{onClick:i,name:"close",className:"cursor-pointer text-primary-active w-6 h-6"})),r.createElement("section",{className:"ohif-scrollbar modal-content overflow-y-auto px-4 py-6 rounded-bl rounded-br bg-primary-dark"},s))};cn.defaultProps={shouldCloseOnEsc:!0},cn.propTypes={closeButton:o().bool,shouldCloseOnEsc:o().bool,isOpen:o().bool,title:o().string,onClose:o().func,children:o().oneOfType([o().arrayOf(o().node),o().node]).isRequired};var ln=cn;function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn=function(e){e.error,e.componentStack,e.context,e.resetErrorBoundary,e.fallbackRoute;var t="Something went wrong".concat(!1,".");return r.createElement("div",{className:"ErrorFallback bg-primary-dark w-full h-full",role:"alert"},r.createElement("p",{className:"text-primary-light text-xl"},t),r.createElement("p",{className:"text-primary-light text-base"},"Sorry, something went wrong there. Try again."),!1)},pn=function(){};mn.propTypes={error:o().object.isRequired,resetErrorBoundary:o().func,componentStack:o().string},mn.defaultProps={resetErrorBoundary:pn};var yn=function(e){var t,n=e.context,a=e.onReset,o=e.onError,i=e.fallbackComponent,s=e.children,c=e.fallbackRoute,l=e.isPage,u=dn((0,r.useState)(!0),2),d=u[0],f=u[1],m=l?i:(t=i,function(e){return r.createElement(ln,{closeButton:!0,shouldCloseOnEsc:!0,isOpen:d,title:"Something went wrong",onClose:function(){f(!1),c&&"undefined"!=typeof window&&(window.location=c)}},r.createElement(t,e))});return r.createElement(an.SV,{fallbackRender:function(e){return r.createElement(m,un({},e,{context:n,fallbackRoute:c}))},onReset:function(){return a.apply(void 0,arguments)},onError:function(e,t){console.error("".concat(n," Error Boundary"),e,t,n),o(e,t,n)}},s)};yn.propTypes={context:o().string,onReset:o().func,onError:o().func,fallbackComponent:o().oneOfType([o().node,o().func]),children:o().node.isRequired,fallbackRoute:o().string},yn.defaultProps={context:"OHIF",onReset:pn,onError:pn,fallbackComponent:mn,fallbackRoute:null};var vn=yn,hn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M7.86 2l2.62-2H0l2.62 2 2.62 2 2.62-2z",fill:"currentColor",fillRule:"evenodd"}))};hn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 4",width:"10.48",height:"4"};var gn=function(e){return r.createElement("svg",e,r.createElement("g",{fillRule:"nonzero",fill:"currentcolor"},r.createElement("path",{d:"M17.207 10.793a1 1 0 0 1 .083 1.32l-.083.094-5 5a1 1 0 0 1-1.497-1.32l.083-.094 4.292-4.293-4.292-4.293a1 1 0 0 1-.083-1.32l.083-.094a1 1 0 0 1 1.32-.083l.094.083 5 5z"}),r.createElement("path",{d:"M17.5 11.5a1 1 0 0 1-.883.993l-.117.007H6a1 1 0 0 1-.117-1.993L6 10.5h10.5a1 1 0 0 1 1 1z"})))};gn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};var bn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zM8 16H4v4h4v-4zm6 0h-4v4h4v-4zm-6-6H4v4h4v-4zm16-8v22H0V2h3v1c0 1.103.897 2 2 2s2-.897 2-2V2h10v1c0 1.103.897 2 2 2s2-.897 2-2V2h3zm-2 6H2v14h20V8zm-2-7a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V1zM6 3a1 1 0 1 1-2 0V1a1 1 0 1 1 2 0v2z",fill:"currentColor",fillRule:"evenodd"}))};bn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var Sn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("circle",{cx:"9.5",cy:"9.5",r:"9.5"}),r.createElement("path",{d:"M5.188 5.187l8.625 8.625m0-8.625l-8.625 8.625",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})))};Sn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19"};var wn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M6 22V6h16v7.543C22 17.65 16 16 16 16s1.518 6-2.638 6H6zm18-7.614V4H4v20h10.189C17.352 24 24 16.777 24 14.386zM14 16H9v-1h5v1zm5-4H9v1h10v-1zm0-3H9v1h10V9zm2-7H2v19H0V0h21v2z"}))};wn.defaultProps={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"};var En=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M5.188 5.187l8.625 8.625m0-8.625l-8.625 8.625",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"currentColor",fillRule:"evenodd"}))};En.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"};var In=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"none",stroke:"currentColor",strokeDasharray:"1.5 3.8",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14z"}))};In.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"};var On=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"currentColor"}),r.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.556 5.333L7.824 11.11a.941.941 0 0 1-.703.444.895.895 0 0 1-.75-.324L4.444 8.993"})))};On.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"};var Dn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",d:"M10 13L5 7.737 5.7 7l4.3 4.526L14.3 7l.7.737z"}))};Dn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"};var xn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7 10l5.263-5 .737.7L8.474 10 13 14.3l-.737.7z"}))};xn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};var kn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 10l-5.263 5L7 14.3l4.526-4.3L7 5.7l.737-.7z"}))};kn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"};var Pn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(0 1)"},r.createElement("circle",{cx:"10",cy:"5.833",r:"2.917"}),r.createElement("path",{d:"M19.48 5.56C18.51 4.46 14.635.417 10 .417 5.365.417 1.49 4.46.52 5.56a.418.418 0 0 0 0 .547c.97 1.1 4.845 5.143 9.48 5.143 4.635 0 8.51-4.043 9.48-5.143a.418.418 0 0 0 0-.547z"})))};Pn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 13"};var Cn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},r.createElement("path",{d:"M18.891 6.764a20.3 20.3 0 0 1 3.65 3.402S17.822 16.125 12 16.125a9.459 9.459 0 0 1-2.75-.426m-4.155-2.141a20.304 20.304 0 0 1-3.637-3.392S6.177 4.208 12 4.208a9.225 9.225 0 0 1 2.291.298m-5.958 5.66A3.666 3.666 0 0 1 12 6.5m3.666 3.666A3.666 3.666 0 0 1 12 13.833",opacity:".5"}),r.createElement("path",{d:"M20.938 1.229L3.063 19.104"})))};Cn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 20"};var Tn=function(e){return r.createElement("svg",e,r.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{strokeWidth:"1.5",d:"M6.5 7V4"}),r.createElement("path",{d:"M6.5 8.5"}),r.createElement("path",{strokeWidth:"1.5",d:"M6.489 9.25a.246.246 0 0 0-.172.078.246.246 0 0 0-.065.177.254.254 0 0 0 .25.245h.009a.247.247 0 0 0 .237-.255.253.253 0 0 0-.246-.245"})))};Tn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13"};var Nn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"}))};Nn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};var Rn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("path",{d:"M6 17H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h15a1 1 0 0 1 1 1v5"}),r.createElement("rect",{width:"17",height:"17",x:"6",y:"6",rx:"1"})))};Rn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"};var Mn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm-.001 5.75c.69 0 1.251.56 1.251 1.25s-.561 1.25-1.251 1.25a1.25 1.25 0 0 1 0-2.5zM14 18h-4v-1c.484-.179 1-.201 1-.735v-4.467c0-.534-.516-.618-1-.797v-1h3v6.265c0 .535.517.558 1 .735V18z"}))};Mn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};var An=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{d:"M8 .117a7.884 7.884 0 1 0 0 15.768A7.885 7.885 0 1 0 8 .116zm0 1a6.885 6.885 0 1 1 0 13.77 6.885 6.885 0 0 1 0-13.77z"}),r.createElement("path",{d:"M7.385 6.27c.575 0 1.048.434 1.108.993l.007.122v4.307a.5.5 0 0 1-.992.09l-.008-.09V7.385a.116.116 0 0 0-.079-.11l-.036-.006H6.154a.5.5 0 0 1-.09-.992l.09-.008h1.23zm-.308-3.078l.101.007a.809.809 0 0 1-.101 1.609.808.808 0 0 1-.101-1.609l.1-.007z"}),r.createElement("path",{d:"M9.846 11.194a.5.5 0 0 1 .09.991l-.09.009H6.154a.5.5 0 0 1-.09-.992l.09-.008h3.692z"})))};An.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"};var jn=function(e){return r.createElement("svg",e,r.createElement("g",{fillRule:"evenodd"},r.createElement("circle",{cx:"12",cy:"12",r:"12",fill:"currentColor",fillOpacity:".2"}),r.createElement("path",{fill:"currentcolor",fillRule:"nonzero",d:"M17.207 10.793a1 1 0 0 1 .083 1.32l-.083.094-5 5a1 1 0 0 1-1.497-1.32l.083-.094 4.292-4.293-4.292-4.293a1 1 0 0 1-.083-1.32l.083-.094a1 1 0 0 1 1.32-.083l.094.083 5 5z"}),r.createElement("path",{fill:"currentcolor",fillRule:"nonzero",d:"M17.5 11.5a1 1 0 0 1-.883.993l-.117.007H6a1 1 0 0 1-.117-1.993L6 10.5h10.5a1 1 0 0 1 1 1z"})))};jn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};var Un=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{d:"M10.5.81C4.87.81.308 5.372.308 11.001c0 5.629 4.563 10.192 10.192 10.192 5.63 0 10.192-4.563 10.192-10.192C20.692 5.372 16.13.809 10.5.809zm0 1a9.192 9.192 0 1 1-9.192 9.192A9.192 9.192 0 0 1 10.5 1.809z"}),r.createElement("path",{d:"M9.692 8.885c.677 0 1.234.514 1.301 1.174l.007.133v5.654a.5.5 0 0 1-.992.09l-.008-.09v-5.654a.31.31 0 0 0-.237-.3l-.07-.007H8.076a.5.5 0 0 1-.09-.992l.09-.008h1.615zm-.404-4.039l.114.007a.904.904 0 1 1-.227 0l.113-.007z"}),r.createElement("path",{d:"M12.923 15.348a.5.5 0 0 1 .09.992l-.09.008H8.077a.5.5 0 0 1-.09-.992l.09-.008h4.846z"})))};Un.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"21",height:"22",viewBox:"0 0 21 22"};var Ln=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M5.364 28.917a5.357 5.357 0 0 0 3.797 1.57 5.347 5.347 0 0 0 3.798-1.572l7.552-7.554a5.325 5.325 0 0 0 1.574-3.797 5.336 5.336 0 0 0-1.574-3.796l-2.297-2.298-2.009 2.009 2.297 2.298c.478.478.741 1.113.741 1.788 0 .674-.264 1.309-.741 1.786l-7.553 7.555a2.533 2.533 0 0 1-3.576 0l-2.297-2.298a2.53 2.53 0 0 1 0-3.576l3.775-3.776-2.009-2.009-3.776 3.776a5.378 5.378 0 0 0 0 7.595l2.299 2.3zM26.695 2.992"}),r.createElement("path",{d:"M26.695 2.992a5.328 5.328 0 0 0-3.797-1.575h-.002a5.34 5.34 0 0 0-3.798 1.573l-7.551 7.553a5.331 5.331 0 0 0-1.576 3.799c0 1.434.558 2.784 1.574 3.797l2.297 2.297 2.01-2.009-2.298-2.297a2.515 2.515 0 0 1-.741-1.788c0-.676.265-1.311.742-1.788l7.553-7.555a2.51 2.51 0 0 1 1.789-.74h.001c.674 0 1.309.264 1.786.74l2.297 2.299a2.51 2.51 0 0 1 .74 1.788 2.52 2.52 0 0 1-.74 1.788l-3.776 3.777 2.009 2.009 3.776-3.777a5.34 5.34 0 0 0 1.574-3.797c0-1.435-.56-2.784-1.574-3.797l-2.295-2.296z"}))};Ln.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor"};var _n=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("circle",{cx:"2.5",cy:"2.498",r:"2"}),r.createElement("path",{d:"M8.5 2.498h15"}),r.createElement("circle",{cx:"2.5",cy:"10.498",r:"2"}),r.createElement("path",{d:"M8.5 10.498h15"}),r.createElement("circle",{cx:"2.5",cy:"18.498",r:"2"}),r.createElement("path",{d:"M8.5 18.498h15"})))};_n.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"26",height:"23",viewBox:"0 0 26 23"};var Vn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M18 10V6A6 6 0 0 0 6 6v4H3v14h18V10h-3zM8 10V6c0-2.206 1.794-4 4-4s4 1.794 4 4v4H8z"}))};Vn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};var qn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M23.85 22.43c0 .713-.58 1.294-1.293 1.294h-8.308c-.713 0-1.293-.58-1.293-1.293v-8.308c0-.713.58-1.293 1.293-1.293h8.308c.712 0 1.293.58 1.293 1.293v8.308zm-1.327-8.273h-8.24v8.24h8.24v-8.24zm1.327-4.22c0 .713-.58 1.293-1.293 1.293h-8.308c-.713 0-1.293-.58-1.293-1.293V1.63c0-.712.58-1.292 1.293-1.292h8.308c.712 0 1.293.58 1.293 1.292v8.308zm-1.327-8.274h-8.24v8.24h8.24v-8.24zM11.23 22.43c0 .713-.58 1.294-1.293 1.294H1.63c-.712 0-1.292-.58-1.292-1.293v-8.308c0-.713.58-1.293 1.292-1.293h8.308c.713 0 1.293.58 1.293 1.293v8.308zm-1.327-8.273h-8.24v8.24h8.24v-8.24zm1.327-4.22c0 .713-.58 1.293-1.293 1.293H1.63c-.712 0-1.292-.58-1.292-1.293V1.63C.338.918.918.338 1.63.338h8.308c.713 0 1.293.58 1.293 1.292v8.308zm-1.327-.034v-8.24h-8.24v8.24h8.24z",fill:"currentColor"}))};qn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var Fn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#3A3F99",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",transform:"translate(2 2)"},r.createElement("circle",{cx:"53.419",cy:"53.419",r:"53.419",fill:"#06081D"}),r.createElement("circle",{cx:"49.411",cy:"49.411",r:"23.862"}),r.createElement("path",{d:"M66.282 66.282L81.29 81.29"})))};Fn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"111",height:"111",viewBox:"0 0 111 111"};var Bn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{fill:"#F3DC43",stroke:"#F3DC43",d:"M1.217 6.076L5.54 1.751a1.002 1.002 0 0 1 1.415 0l4.324 4.325a.999.999 0 0 1 0 1.414l-4.324 4.325c-.39.39-1.024.39-1.415 0L1.217 7.49a1 1 0 0 1 0-1.414z"}),r.createElement("g",{stroke:"#000"},r.createElement("path",{strokeWidth:"1.5",d:"M6.5 7V4"}),r.createElement("path",{d:"M6.5 8.5"}),r.createElement("path",{strokeWidth:"1.5",d:"M6.489 9.25a.246.246 0 0 0-.172.078.246.246 0 0 0-.065.177.254.254 0 0 0 .25.245h.009a.247.247 0 0 0 .237-.255.253.253 0 0 0-.246-.245"}))))};Bn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13"};var zn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M1.439 16.873L0 24l7.128-1.437L24.001 5.691l-5.69-5.69L1.439 16.873zm4.702 3.848l-3.582.724.721-3.584 2.861 2.86zM21.172 5.689L7.555 19.307l-2.86-2.861L15.52 5.62l2.846 2.846 1.414-1.414-2.846-2.846 1.377-1.377 2.861 2.86z"}))};zn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};var Hn=function(e){return r.createElement("svg",e,r.createElement("path",{fill:"currentColor",d:"M12 0C6.917 0 3.535 4.949 8.267 13.678c1.596 2.945-1.725 3.641-5.09 4.418C.104 18.805-.01 20.331 0 23l.004 1h23.99l.004-.969c.012-2.688-.093-4.223-3.177-4.935-3.438-.794-6.639-1.49-5.09-4.418C20.45 4.766 16.982 0 12 0m0 1c1.89 0 3.39.764 4.225 2.15 1.354 2.251.866 5.824-1.377 10.06-.577 1.092-.673 2.078-.283 2.932.937 2.049 4.758 2.632 6.032 2.928 2.303.534 2.412 1.313 2.401 3.93H1c-.01-2.615.09-3.396 2.401-3.93 1.157-.266 5.138-.919 6.049-2.94.387-.858.284-1.843-.304-2.929C6.915 9.086 6.402 5.437 7.741 3.189 8.581 1.777 10.094 1 12 1"}))};Hn.defaultProps={xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 24 24"};var Zn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M20 5.906H6.818M12.273.452L6.818 5.906l5.455 5.455m-11.364 0V.452",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}))};Zn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"12",viewBox:"0 0 20 12"};var Wn=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M0 5.906h13.182M7.727.452l5.455 5.454-5.455 5.455m11.364 0V.452",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}))};Wn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"12",viewBox:"0 0 20 12"};var $n=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{d:"M11.5-1l-.164.005A2.501 2.501 0 0 0 9 1.5v1.08l-.064.02c-.278.084-.554.179-.825.282l-.201.079-.861-.86a2.5 2.5 0 0 0-3.535 0L2.1 3.516l-.121.131A2.5 2.5 0 0 0 2.1 7.052l.862.861-.078.199a13.56 13.56 0 0 0-.282.824L2.582 9 1.5 9.001a2.5 2.5 0 0 0-2.5 2.5v1l.005.164A2.5 2.5 0 0 0 1.5 15.001L2.577 15l.02.066c.085.277.179.552.282.824l.078.199-.862.862a2.5 2.5 0 0 0 0 3.535l1.421 1.417.13.121c.981.85 2.47.81 3.404-.123l.861-.864.2.08c.271.103.546.198.824.283l.065.018V22.5a2.5 2.5 0 0 0 2.5 2.5h1l.164-.005A2.501 2.501 0 0 0 15 22.5v-1.078l.064-.018c.278-.085.553-.179.825-.282l.198-.08.864.863a2.499 2.499 0 0 0 3.534 0L21.9 20.49l.121-.131a2.5 2.5 0 0 0-.121-3.404l-.862-.863.08-.2c.104-.272.198-.547.284-.826L21.42 15h1.08a2.5 2.5 0 0 0 2.5-2.5v-1l-.005-.164A2.501 2.501 0 0 0 22.5 9h-1.079l-.018-.065c-.085-.278-.18-.553-.283-.825l-.08-.199.862-.86a2.5 2.5 0 0 0 0-3.536L20.484 2.1l-.13-.122a2.503 2.503 0 0 0-3.404.123l-.862.861-.198-.078a13.368 13.368 0 0 0-.825-.283L15 2.583V1.5A2.5 2.5 0 0 0 12.5-1h-1zm1 1.5a1 1 0 0 1 .993.883l.007.117v2.251c.868.175 1.714.447 2.52.81l.4.19 1.59-1.589a1 1 0 0 1 1.32-.083l.094.083 1.418 1.414a1 1 0 0 1 .083 1.32l-.083.094-1.589 1.588c.394.794.698 1.629.905 2.49l.095.432H22.5a1 1 0 0 1 .993.883l.007.117v1a1 1 0 0 1-.883.993l-.117.007h-2.246c-.176.87-.449 1.717-.814 2.525l-.19.401 1.589 1.59a1 1 0 0 1 .083 1.32l-.083.094-1.414 1.414a1 1 0 0 1-1.32.083l-.094-.083-1.591-1.589c-.793.394-1.628.697-2.488.904l-.432.096V22.5a1 1 0 0 1-.883.993l-.117.007h-1a1 1 0 0 1-.993-.883L10.5 22.5v-2.25a11.852 11.852 0 0 1-2.522-.81l-.4-.19-1.589 1.59a1 1 0 0 1-1.32.083l-.094-.083-1.419-1.414a1 1 0 0 1-.083-1.32l.083-.094 1.59-1.59a11.805 11.805 0 0 1-.904-2.489l-.096-.432H1.5a1 1 0 0 1-.993-.883L.5 12.5v-1a1 1 0 0 1 .883-.993L1.5 10.5h2.25c.175-.868.447-1.714.81-2.52l.19-.401L3.16 5.99a1 1 0 0 1-.083-1.32l.083-.094 1.415-1.415a1 1 0 0 1 1.32-.083l.094.083 1.59 1.587a11.787 11.787 0 0 1 2.489-.905l.432-.095V1.5a1 1 0 0 1 .883-.993L11.5.5h1z"}),r.createElement("path",{d:"M12 6.001a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 1.5a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9z"})))};$n.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"-1 -1 26 26"};var Yn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{d:"M8.69 11.516l-1.18-1.242-3.01 3.168-3.01-3.168-1.18 1.242 4.19 4.41zM8.69 4.684L7.51 5.926 4.499 2.758 1.49 5.926.31 4.684 4.5.274z"})))};Yn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16"};var Gn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{d:"M8.69 11.516l-1.18-1.242-3.01 3.168-3.01-3.168-1.18 1.242 4.19 4.41z"}),r.createElement("path",{fill:"transparent",d:"M8.69 4.684L7.51 5.926 4.499 2.758 1.49 5.926.31 4.684 4.5.274z"})))};Gn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16"};var Jn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("path",{fill:"transparent",d:"M8.69 11.516l-1.18-1.242-3.01 3.168-3.01-3.168-1.18 1.242 4.19 4.41z"}),r.createElement("path",{d:"M8.69 4.684L7.51 5.926 4.499 2.758 1.49 5.926.31 4.684 4.5.274z"})))};Jn.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"9",height:"16",viewBox:"0 0 9 16"};var Kn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"currentColor"}),r.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.556 5.333L7.824 11.11a.941.941 0 0 1-.703.444.895.895 0 0 1-.75-.324L4.444 8.993"})))};Kn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"};var Xn=function(e){return r.createElement("svg",e,r.createElement("title",null,"Unlink"),r.createElement("path",{d:"M304.083 388.936c4.686 4.686 4.686 12.284 0 16.971l-65.057 65.056c-54.709 54.711-143.27 54.721-197.989 0-54.713-54.713-54.719-143.27 0-197.989l65.056-65.057c4.686-4.686 12.284-4.686 16.971 0l22.627 22.627c4.686 4.686 4.686 12.284 0 16.971L81.386 311.82c-34.341 34.341-33.451 88.269.597 120.866 32.577 31.187 84.788 31.337 117.445-1.32l65.057-65.056c4.686-4.686 12.284-4.686 16.971 0l22.627 22.626zm-56.568-243.245l64.304-64.304c34.346-34.346 88.286-33.453 120.882.612 31.18 32.586 31.309 84.785-1.335 117.43l-65.056 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.686 4.686 12.284 4.686 16.971 0l65.056-65.057c54.711-54.709 54.721-143.271 0-197.99-54.71-54.711-143.27-54.72-197.989 0l-65.057 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.685 4.685 12.283 4.685 16.97-.001zm238.343 362.794l22.627-22.627c4.686-4.686 4.686-12.284 0-16.971L43.112 3.515c-4.686-4.686-12.284-4.686-16.971 0L3.515 26.142c-4.686 4.686-4.686 12.284 0 16.971l465.373 465.373c4.686 4.686 12.284 4.686 16.97-.001z"}))};Xn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"};var Qn=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",transform:"translate(1 1)"},r.createElement("ellipse",{cx:"8.558",cy:"8.091",rx:"7.814",ry:"7.636"}),r.createElement("path",{d:"M14.419 13.818l5.86 5.727"})))};Qn.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 22"};var er=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",transform:"translate(1 1)"},r.createElement("path",{d:"M5.983 2.556a1.905 1.905 0 0 0 1.109-.432L8.944.432c.314-.26.703-.41 1.11-.432h2.903c.403.023.788.175 1.099.432l1.852 1.692c.314.259.703.41 1.11.432h3.426a2.134 2.134 0 0 1 1.917 2.149v8.712a1.916 1.916 0 0 1-1.917 1.916H2.556a1.916 1.916 0 0 1-1.917-1.916V4.705a2.136 2.136 0 0 1 1.917-2.15h3.427z"}),r.createElement("circle",{cx:"11.5",cy:"7.986",r:"3.514"}),r.createElement("path",{d:"M19.167 5.43a.32.32 0 0 1 .32.32.32.32 0 1 1-.32-.32"})))};er.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 18"};var tr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},r.createElement("path",{fill:"currentColor",d:"M9.313 8.52a.793.793 0 0 1-.792.793H2.188a.792.792 0 0 1-.792-.792V2.188c0-.438.354-.792.791-.792h6.334c.437 0 .792.354.792.791v6.334z"}),r.createElement("path",{d:"M19.604 8.52a.792.792 0 0 1-.791.793h-6.334a.792.792 0 0 1-.791-.792V2.188c0-.438.354-.792.791-.792h6.334a.79.79 0 0 1 .791.791v6.334zM9.313 18.813a.792.792 0 0 1-.792.791H2.188a.791.791 0 0 1-.792-.791v-6.334a.79.79 0 0 1 .791-.791h6.334c.437 0 .792.354.792.791v6.334zm10.291 0a.79.79 0 0 1-.791.791h-6.334a.79.79 0 0 1-.791-.791v-6.334a.79.79 0 0 1 .791-.791h6.334a.79.79 0 0 1 .791.791v6.334z"})))};tr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 21"};var nr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M-4.5-11.5h29v29h-29z"}),r.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M2.75.583A2.424 2.424 0 0 0 .333 3 2.424 2.424 0 0 0 2.75 5.417 2.424 2.424 0 0 0 5.167 3 2.424 2.424 0 0 0 2.75.583zm14.5 0A2.424 2.424 0 0 0 14.833 3a2.424 2.424 0 0 0 2.417 2.417A2.424 2.424 0 0 0 19.667 3 2.424 2.424 0 0 0 17.25.583zm-7.25 0A2.424 2.424 0 0 0 7.583 3 2.424 2.424 0 0 0 10 5.417 2.424 2.424 0 0 0 12.417 3 2.424 2.424 0 0 0 10 .583z"})))};nr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 6"};var rr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},r.createElement("path",{d:"M10.882 19.529V1m8.647 9.882H2.235m6.177-7.414L10.88 1l2.484 2.484M13.364 18.31l-2.468 2.468-2.484-2.484M3.468 13.364L1 10.896l2.484-2.484M18.31 8.412l2.468 2.468-2.484 2.484"})))};rr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var ar=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},r.createElement("circle",{cx:"10",cy:"10",r:"10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),r.createElement("path",{fill:"currentColor",d:"M17.484 3.367A9.965 9.965 0 0 1 20 10c0 5.523-4.477 10-10 10a9.96 9.96 0 0 1-6.633-2.516z"})))};ar.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var or=function(e){return r.createElement("svg",e,r.createElement("path",{d:"M9.593 21.252H1v-8.593m0 8.593L20.642 1.61",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}))};or.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var ir=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor"},r.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{strokeWidth:"1.5",d:"M21.729 1.664c.448 0 .895.171 1.237.513l1.819 1.817a1.75 1.75 0 0 1 .112 2.353l-18.8 18.81c-.37.37-.854.554-1.338.554-.485 0-.97-.185-1.339-.554L1.804 23.54a1.886 1.886 0 0 1-.554-1.339c0-.484.185-.968.554-1.338L20.492 2.177c.341-.342.79-.513 1.237-.513z"}),r.createElement("path",{d:"M6.145 20.914l1.571 1.563m.853-3.987l1.574 1.56m.85-3.984l1.572 1.561m.852-3.985l1.575 1.559m.849-3.984l1.566 1.57m.728-3.864l1.565 1.571m.859-3.995l1.566 1.57"})),r.createElement("path",{strokeWidth:"1.5",d:"M11.873 7.904L8.089 4.121a1 1 0 0 0-1.414 0L4.907 5.889a1 1 0 0 0 0 1.414l3.784 3.783M16 18.382l3.783 3.783c.391.39 1.024.39 1.415 0l1.767-1.767c.39-.39.39-1.024 0-1.415L19.182 15.2"})))};ir.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27"};var sr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",transform:"translate(1 1)"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.833 14.625v8.333M24 18.792h-8.333"}),r.createElement("ellipse",{cx:"10.5",cy:"7",strokeWidth:"1.5",rx:"6.5",ry:"10",transform:"rotate(89 10.5 7)"})))};sr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 25"};var cr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(1 1)"},r.createElement("rect",{width:"24.749",height:"7.779",x:"-.375",y:"8.111",strokeWidth:"1.5",rx:"1",transform:"rotate(-45.001 12 12)"}),r.createElement("path",{d:"M5.617 12.884l2.015 1.984m.553-4.553l2.5 2.5m-.063-4.936l1.75 1.75m.686-4.187l2.5 2.5m.054-5.054l2.015 1.986M3.063 15.438l2.5 2.5"})))};cr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26"};var lr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("rect",{width:"14.286",height:"14.286",y:"5.714",rx:"2"}),r.createElement("path",{strokeLinecap:"round",d:"M3.01 2.857h11.98a2 2 0 0 1 2 2v12.286"}),r.createElement("path",{strokeLinecap:"round",d:"M5.714 0h11.982a2 2 0 0 1 2 2v12.286"})))};lr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var ur=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("circle",{cx:"8.75",cy:"8.749",r:"8.333"}),r.createElement("path",{d:"M19.583 19.582l-4.94-4.94M4.583 8.749h8.334M8.75 4.582v8.334"})))};ur.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var dr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5"},r.createElement("path",{d:"M7.632 4.316H3a2 2 0 0 0-2 2v9.263a2 2 0 0 0 2 2h4.632"}),r.createElement("path",{strokeDasharray:"1 3.1",d:"M15.368 4.316H20a2 2 0 0 1 2 2v9.263a2 2 0 0 1-2 2h-4.632"}),r.createElement("path",{d:"M11.5 1.553v18.789"})))};dr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 22"};var fr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},r.createElement("rect",{width:"20",height:"18",stroke:"currentColor",strokeWidth:"1.5",rx:"2"}),r.createElement("path",{fill:"currentColor",d:"M10 18H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h8v3a6 6 0 0 0-.225 11.996L10 15v3zm0-15a6 6 0 1 1 0 12z"})))};fr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 20"};var mr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},r.createElement("rect",{width:"14.444",height:"11.111",x:"5.556",y:"10",fill:"currentColor",rx:"2"}),r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},r.createElement("path",{d:"M8.889 3.333H4.444A4.445 4.445 0 0 0 0 7.778v4.444"}),r.createElement("path",{d:"M5.556 0l3.333 3.333-3.333 3.334"}))))};mr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 23"};var pr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("circle",{cx:"11",cy:"10.999",r:"10.542",strokeLinecap:"round",strokeLinejoin:"round"}),r.createElement("path",{fill:"currentColor",d:"M8.542 8.724l5.762 2.306-5.762 2.88V8.725z"})))};pr.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var yr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",transform:"translate(1 1)"},r.createElement("path",{d:"M10 0v3.333m0 13.334V20M0 10h3.333m13.334 0H20"}),r.createElement("circle",{cx:"10",cy:"10",r:"6.667"}),r.createElement("path",{d:"M10 9.583a.417.417 0 1 1 0 .835.417.417 0 0 1 0-.835"})))};yr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22"};var vr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5"},r.createElement("path",{d:"M3.5 15.5l18.188-.062M3.14 15.334l9.786-13.977"}),r.createElement("path",{strokeDasharray:"1 2.7",d:"M17.194 12.65c.903-3.897-.636-6.269-4.62-7.115"})))};vr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 23 17"};var hr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},r.createElement("path",{d:"M12.308 7.923h6.923V1"}),r.createElement("path",{d:"M18.705 7.923A9.232 9.232 0 0 0 .9 9.464a9.231 9.231 0 0 0 16.316 7.292"})))};hr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 21"};var gr=function(e){return r.createElement("svg",e,r.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round"},r.createElement("path",{d:"M16.606 11v7.576m3.788-3.788h-7.576",strokeLinejoin:"round",strokeWidth:"2"}),r.createElement("path",{strokeWidth:"1.5",d:"M9.03 14.788H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h13.892a2 2 0 0 1 2 2v4.506"})))};gr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 20"};var br=function(e){return r.createElement("svg",e,r.createElement("title",null,"Trash"),r.createElement("path",{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}))};br.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"};var Sr=function(e){return r.createElement("svg",e,r.createElement("title",null,"Play"),r.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))};Sr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"};var wr=function(e){return r.createElement("svg",e,r.createElement("title",null,"Stop"),r.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}))};wr.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"};var Er={"arrow-down":hn,calendar:bn,cancel:Sn,clipboard:wn,close:En,"dotted-circle":In,"circled-checkmark":On,"chevron-down":Dn,"chevron-left":xn,"chevron-right":kn,"eye-visible":Pn,"eye-hidden":Cn,"external-link":Nn,"group-layers":Rn,info:Mn,"info-link":An,"arrow-left":gn,"launch-arrow":jn,"launch-info":Un,link:Ln,"list-bullets":_n,lock:Vn,"logo-ohif-small":qn,magnifier:Fn,exclamation:Tn,"notificationwarning-diamond":Bn,pencil:zn,profile:Hn,"push-left":Zn,"push-right":Wn,settings:$n,"sorting-active-down":Gn,"sorting-active-up":Jn,sorting:Yn,tracked:Kn,unlink:Xn,"tool-zoom":Qn,"tool-capture":er,"tool-layout":tr,"tool-more-menu":nr,"tool-move":rr,"tool-window-level":ar,"tool-annotate":or,"tool-bidirectional":ir,"tool-elipse":sr,"tool-length":cr,"tool-stack-scroll":lr,"tool-magnify":ur,"tool-flip-horizontal":dr,"tool-invert":fr,"tool-rotate-right":mr,"tool-cine":pr,"tool-probe":yr,"tool-angle":vr,"tool-reset":hr,"tool-rectangle":gr,"old-trash":br,"old-play":Sr,"old-stop":wr};var Ir=["name"];function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kr=function(e){var t,n,a=e.name,o=xr(e,Ir);return r.createElement(r.Fragment,null,(t=a,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){Dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o),t&&Er[t]?r.createElement(Er[t],n):r.createElement("div",null,"Missing Icon")))};kr.propTypes={name:o().string.isRequired};var Pr=kr,Cr=["children","variant","color","size","rounded","disabled","type","fullWidth","onClick","className","name","id"];function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Rr={none:"",small:"rounded",medium:"rounded-md",large:"rounded-lg",full:"rounded-full"},Mr={true:"cursor-not-allowed",false:""},Ar={text:{default:"text-white hover:bg-primary-light hover:text-black active:opacity-80 focus:bg-primary-light focus:text-black",primary:"text-primary-main hover:bg-primary-main hover:text-white active:opacity-80 focus:bg-primary-main focus:text-white",secondary:"text-secondary-light hover:bg-secondary-light hover:text-white active:opacity-80 focus:bg-secondary-light focus:text-white",white:"text-white hover:bg-white hover:text-black active:opacity-80 focus:bg-white focus:text-black",black:"text-black hover:bg-black hover:text-white focus:bg-black focus:text-white active:opacity-80"},outlined:{default:"border bg-trasparent border-primary-light text-white hover:opacity-80 active:opacity-100 focus:opacity-80",primary:"border bg-transparent border-primary-main text-primary-main hover:opacity-80 active:opacity-100 focus:opacity-80",secondary:"border bg-transparent border-secondary-light text-secondary-light hover:opacity-80 active:opacity-100 focus:opacity-80",white:"border bg-transparent border-white text-white hover:opacity-80 active:opacity-100 focus:opacity-80",black:"border bg-black border-primary-main text-white hover:bg-primary-main focus:bg-primary-main hover:border-black focus:border-black"},contained:{default:"bg-primary-light text-black hover:opacity-80 active:opacity-100 focus:opacity-80",primary:"bg-primary-main text-white hover:opacity-80 active:opacity-100 focus:opacity-80",secondary:"bg-secondary-light text-white hover:opacity-80 active:opacity-100 focus:opacity-80",white:"bg-white text-black hover:opacity-80 active:opacity-100 focus:opacity-80",black:"bg-black text-white hover:opacity-80 active:opacity-100 focus:opacity-80"}},jr={small:"py-2 px-2 text-base",medium:"py-3 px-3 text-lg",large:"py-4 px-4 text-xl",initial:"",toolbar:"text-lg"},Ur={small:"w-4 h-4",medium:"w-5 h-5",large:"w-6 h-6",toolbar:"w-5 h-5"},Lr={true:"flex w-full",false:"inline-flex"},_r=function(e){var t=e.children,n=e.variant,a=e.color,o=e.size,i=e.rounded,s=e.disabled,c=e.type,u=e.fullWidth,d=e.onClick,f=e.className,m=(e.name,e.id),p=Nr(e,Cr),y=(0,r.useRef)(null);return r.createElement("button",Tr({className:l()("text-center items-center justify-center transition duration-300 ease-in-out outline-none font-bold focus:outline-none",Ar[n][a],Rr[i],jr[o],Lr[u],Mr[s],f),style:{padding:"toolbar"===o?"10px":null},ref:y,onClick:function(e){y.current.blur(),d(e)},type:c,"data-cy":m},p),r.cloneElement(t,{className:l()(Ur[o],"fill-current")}))};_r.defaultProps={onClick:function(){},color:"default",disabled:!1,fullWidth:!1,rounded:"medium",size:"medium",type:"button",variant:"contained"},_r.propTypes={children:o().node.isRequired,size:o().oneOf(["small","medium","large","initial","toolbar"]),rounded:o().oneOf(["none","small","medium","large","full"]),variant:o().oneOf(["text","outlined","contained"]),color:o().oneOf(["default","primary","secondary","white","black","inherit"]),fullWidth:o().bool,disabled:o().bool,type:o().string,id:o().string,className:o().node,onClick:o().func};var Vr=_r,qr=["children","className","text"];function Fr(){return(Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Br(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zr=function(e){var t=e.children,n=e.className,a=e.text,o=Br(e,qr);return r.createElement("label",Fr({className:l()("",n)},o),a,t)};zr.propTypes={children:o().node};var Hr=zr,Zr=["id","label","containerClassName","labelClassName","className","transparent","type","value","onChange","onFocus","autoFocus","onKeyPress","onKeyDown","readOnly","disabled"];function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yr={true:"bg-transparent",false:"bg-black"},Gr=function(e){var t=e.id,n=e.label,a=e.containerClassName,o=void 0===a?"":a,i=e.labelClassName,s=void 0===i?"":i,c=e.className,u=void 0===c?"":c,d=e.transparent,f=void 0!==d&&d,m=e.type,p=void 0===m?"text":m,y=e.value,v=e.onChange,h=e.onFocus,g=e.autoFocus,b=e.onKeyPress,S=e.onKeyDown,w=e.readOnly,E=e.disabled,I=$r(e,Zr);return r.createElement("div",{className:l()("flex flex-col flex-1",o)},r.createElement(Hr,{className:s,text:n}),r.createElement("input",Wr({"data-cy":"input-".concat(t),className:l()(n&&"mt-2",u,"shadow transition duration-300 appearance-none border border-primary-main hover:border-gray-500 focus:border-gray-500 focus:outline-none rounded w-full py-2 px-3 text-sm text-white leading-tight focus:outline-none",Yr[f],{"cursor-not-allowed":E}),disabled:E,readOnly:w,autoFocus:g,type:p,value:y,onChange:v,onFocus:h,onKeyPress:b,onKeyDown:S},I)))};Gr.propTypes={label:o().string,containerClassName:o().string,labelClassName:o().string,className:o().string,transparent:o().bool,type:o().string,value:o().any,onChange:o().func,onFocus:o().func,autoFocus:o().bool,readOnly:o().bool,onKeyPress:o().func,onKeyDown:o().func,disabled:o().bool};var Jr=Gr,Kr=function(e){var t=e.id,n=e.label,a=e.isSortable,o=e.sortDirection,i=e.onLabelClick,s=e.value,c=e.onChange,l=s.startDate,u=s.endDate;return r.createElement(sa,{label:n,isSortable:a,sortDirection:o,onLabelClick:function(e){e.preventDefault(),i(e)}},r.createElement("div",{className:"relative"},r.createElement(qt,{id:t,startDate:l,endDate:u,onChange:c})))};Kr.defaultProps={value:{},onLabelClick:function(){}},Kr.propTypes={id:o().string,label:o().string.isRequired,isSortable:o().bool.isRequired,sortDirection:o().oneOf(["ascending","descending","none"]).isRequired,onLabelClick:o().func.isRequired,value:o().shape({startDate:o().string,endDate:o().string}),onChange:o().func.isRequired};var Xr=Kr;function Qr(e){return{1:"w-1/24",2:"w-2/24",3:"w-3/24",4:"w-4/24",5:"w-5/24",6:"w-6/24",7:"w-7/24",8:"w-8/24",9:"w-9/24",10:"w-10/24",11:"w-11/24",12:"w-12/24",13:"w-13/24",14:"w-14/24",15:"w-15/24",16:"w-16/24",17:"w-17/24",18:"w-18/24",19:"w-19/24",20:"w-20/24",21:"w-21/24",22:"w-22/24",23:"w-23/24",24:"w-24/24"}[e]}function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ra=function(e){var t=e.inputMeta,n=e.values,a=e.onValuesChange,o=e.sorting,i=e.onSortingChange,s=e.isSortingEnabled,c=o.sortBy,u=o.sortDirection,d=function(e){var t=e.name,o=e.displayName,l=e.inputProps,d=e.isSortable,f=e.inputType,m=d&&s,p=c!==t?"none":u,y=function(){!function(e){if(s){var t="descending";c===e&&("ascending"===u?t="descending":"descending"===u&&(t="ascending")),i({sortBy:"none"!==t?e:"",sortDirection:t})}}(t)},v=function(e){a(ta(ta({},n),{},na({},t,e)))};switch(f){case"Text":return r.createElement(da,{id:t,key:t,label:o,isSortable:m,sortDirection:p,onLabelClick:y,value:n[t],onChange:v});case"MultiSelect":return r.createElement(la,{id:t,key:t,label:o,isSortable:m,sortDirection:p,onLabelClick:y,value:n[t],onChange:v,options:l.options});case"DateRange":return r.createElement(Xr,{id:t,key:t,label:o,isSortable:m,sortDirection:p,onLabelClick:y,value:n[t],onChange:function(e){var r=e.startDate,o=e.endDate;a(ta(ta({},n),{},na({},t,{startDate:r,endDate:o})))}});case"None":return r.createElement(sa,{key:t,label:o,isSortable:m,sortDirection:p,onLabelClick:y})}};return r.createElement("div",{className:"container m-auto relative flex flex-col"},r.createElement("div",{className:"flex flex-row w-full"},t.map((function(e){return r.createElement("div",{key:e.name,className:l()("pl-4 first:pl-12",Qr(e.gridCol))},d(e))}))))};ra.propTypes={inputMeta:o().arrayOf(o().shape({name:o().string.isRequired,displayName:o().string.isRequired,inputType:o().oneOf(["Text","MultiSelect","DateRange","None"]).isRequired,isSortable:o().bool.isRequired,gridCol:o().oneOf([1,2,3,4,5,6,7,8,9,10,11,12]).isRequired,option:o().arrayOf(o().shape({value:o().string,label:o().string}))})).isRequired,values:o().object.isRequired,onValuesChange:o().func.isRequired,sorting:o().shape({sortBy:o().string,sortDirection:o().oneOf(["ascending","descending","none"])}).isRequired,onSortingChange:o().func.isRequired,isSortingEnabled:o().bool.isRequired};var aa=ra,oa={descending:"sorting-active-up",ascending:"sorting-active-down",none:"sorting"},ia=function(e){var t=e.label,n=e.isSortable,a=e.sortDirection,o=e.onLabelClick,i=e.className,s=e.children,c=(0,P.$G)("StudyList").t,u=function(e){n&&o(e)};return r.createElement("label",{className:l()("flex flex-col flex-1 text-white text-lg pl-1 select-none",i)},r.createElement("span",{role:"button",className:"flex flex-row items-center cursor-pointer focus:outline-none",onClick:u,onKeyDown:u,tabIndex:"0"},c(t),n&&r.createElement(Pr,{name:oa[a],className:l()("mx-2 w-2","none"!==a?"text-primary-light":"text-primary-main")})),r.createElement("span",null,s))};ia.defaultProps={className:""},ia.propTypes={label:o().string.isRequired,isSortable:o().bool.isRequired,sortDirection:o().oneOf(["ascending","descending","none"]).isRequired,onLabelClick:o().func.isRequired,className:o().string,children:o().node};var sa=ia,ca=function(e){var t=e.id,n=e.label,a=e.isSortable,o=e.sortDirection,i=e.onLabelClick,s=e.value,c=e.placeholder,l=e.options,u=e.onChange;return r.createElement(sa,{label:n,isSortable:a,sortDirection:o,onLabelClick:i},r.createElement(Aa,{id:t,placeholder:c,className:"mt-2",options:l,value:s,isMulti:!0,isClearable:!1,isSearchable:!1,closeMenuOnSelect:!1,hideSelectedOptions:!1,onChange:function(e,t){switch(t){case"select-option":case"remove-value":case"deselect-option":case"clear":u(e)}}}))};ca.defaultProps={value:[],placeholder:"",options:[]},ca.propTypes={id:o().string,label:o().string.isRequired,isSortable:o().bool.isRequired,sortDirection:o().oneOf(["ascending","descending","none"]).isRequired,onLabelClick:o().func.isRequired,onChange:o().func.isRequired,placeholder:o().string,options:o().arrayOf(o().shape({value:o().string,label:o().string})),value:o().arrayOf(o().string)};var la=ca,ua=function(e){var t=e.id,n=e.label,a=e.isSortable,o=e.sortDirection,i=e.onLabelClick,s=e.value,c=e.onChange;return r.createElement(sa,{label:n,isSortable:a,sortDirection:o,onLabelClick:i},r.createElement(Jr,{id:t,className:"border-primary-main mt-2 bg-black",type:"text",containerClassName:"mr-2",value:s,onChange:function(e){c(e.target.value)}}))};ua.defaultProps={value:"",isSortable:!1,onLabelClick:function(){},sortDirection:"none"},ua.propTypes={id:o().string,label:o().string.isRequired,isSortable:o().bool,sortDirection:o().oneOf(["ascending","descending","none"]),onLabelClick:o().func,value:o().any,onChange:o().func.isRequired};var da=ua;function fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pa(e){var t=e.onSelection,n=fa((0,r.useState)(),2),a=n[0],o=n[1],i=a%3,s=Math.floor(a/3),c=function(e){var t=e%3,n=Math.floor(e/3);return t<=i&&n<=s};return r.createElement("div",{style:{display:"grid",gridTemplateColumns:"20px 20px 20px",gridTemplateRows:"20px 20px 20px",backgroundColor:"#090c29"},className:"p-2"},[0,1,2,3,4,5,6,7,8].map((function(e){return r.createElement("div",{key:e,style:{border:"1px solid white",backgroundColor:c(e)?"#5acce6":"#0b1a42"},className:"cursor-pointer",onClick:function(){var n=e%3,r=Math.floor(e/3);t({numRows:r+1,numCols:n+1})},onMouseEnter:function(){return o(e)},onMouseLeave:function(){return o(-1)}})})))}pa.defaultProps={onSelection:function(){}},pa.propTypes={onSelection:o().func.isRequired};var ya=pa;function va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ha(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ga=function(e){var t=e.id,n=e.index,a=e.label,o=e.displayText,i=e.isActive,s=e.onClick,c=e.onEdit,u=va((0,r.useState)(!1),2),d=u[0],f=u[1];return r.createElement("div",{className:l()("group flex cursor-pointer bg-black border outline-none border-transparent transition duration-300",{"rounded overflow-hidden border-primary-light":i}),onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},onClick:function(e){return s({id:t,isActive:i,event:e})},role:"button",tabIndex:"0","data-cy":"measurement-item"},r.createElement("div",{className:l()("text-center w-6 py-1 text-base transition duration-300",{"bg-primary-light text-black active":i,"bg-primary-dark text-primary-light group-hover:bg-secondary-main":!i})},n),r.createElement("div",{className:"relative flex flex-col flex-1 px-2 py-1"},r.createElement("span",{className:"mb-1 text-base text-primary-light"},a),o.map((function(e){return r.createElement("span",{key:e,className:"pl-2 text-base text-white border-l border-primary-light",dangerouslySetInnerHTML:{__html:e}})})),r.createElement(Pr,{className:l()("text-white w-4 absolute cursor-pointer transition duration-300",{"invisible opacity-0 mr-2":!i&&!d},{"visible opacity-1":!i&&d}),name:"pencil",style:{top:4,right:4,transform:i||d?"":"translateX(100%)"},onClick:function(e){e.stopPropagation(),c({id:t,isActive:i,event:e})}})))};ga.propTypes={id:o().oneOfType([o().number.isRequired,o().string.isRequired]),index:o().number.isRequired,label:o().string,displayText:o().array.isRequired,isActive:o().bool,onClick:o().func,onEdit:o().func},ga.defaultProps={isActive:!1};var ba=ga,Sa=function(e){var t=e.data,n=e.title,a=e.amount,o=e.onClick,i=e.onEdit,s=(0,P.$G)("MeasurementTable").t;return r.createElement("div",null,r.createElement("div",{className:"flex justify-between px-2 py-1 bg-secondary-main"},r.createElement("span",{className:"text-base font-bold tracking-widest text-white uppercase"},s(n)),r.createElement("span",{className:"text-base font-bold text-white"},a)),r.createElement("div",{className:"overflow-hidden ohif-scrollbar max-h-112"},0!==t.length&&t.map((function(e,t){return r.createElement(ba,{key:e.id,id:e.id,index:t+1,label:e.label,isActive:e.isActive,displayText:e.displayText,onClick:o,onEdit:i})})),0===t.length&&r.createElement("div",{className:"flex transition duration-300 bg-black border border-transparent cursor-default group"},r.createElement("div",{className:"w-6 py-1 text-base text-center transition duration-300 bg-primary-dark text-primary-light group-hover:bg-secondary-main"}),r.createElement("div",{className:"flex items-center justify-between flex-1 px-2 py-4"},r.createElement("span",{className:"flex items-center flex-1 mb-1 text-base text-primary-light"},s("No tracked measurements"))))))};Sa.defaultProps={amount:null,data:[],onClick:function(){},onEdit:function(){}},Sa.propTypes={title:o().string.isRequired,amount:o().oneOfType([o().string,o().number]),data:o().arrayOf(o().shape({id:o().oneOfType([o().string,o().number]),label:o().string,displayText:o().arrayOf(o().string),isActive:o().bool})),onClick:o().func,onEdit:o().func};var wa=Sa,Ea=function(e){var t=e.className,n=e.children,a=e.isSticky;return r.createElement("div",{className:l()("flex flex-row items-center bg-secondary-dark px-3 border-b-4 border-black z-20",a&&"sticky top-0",!a&&"relative",t),style:{paddingTop:"4px",paddingBottom:"4px",minHeight:"52px"}},n)};Ea.propTypes={className:o().string,children:o().node,isSticky:o().bool};var Ia=Ea,Oa=function(e){var t=e.id,n=e.type,a=e.message,o=e.actions,i=e.onSubmit,s=e.onOutsideClick,c=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=c.current,t=function(t){e.contains(t.target)||s()};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[s]);var u={error:{icon:"info",color:"text-red-700"},warning:{icon:"notificationwarning-diamond",color:"text-yellow-500"},info:{icon:"info",color:"text-primary-main"},success:{icon:"info",color:"text-green-500"}}[n]||{icon:"",color:""},d=u.icon,f=u.color;return r.createElement("div",{ref:c,className:"flex flex-col p-2 mx-2 mt-2 rounded bg-common-bright","data-cy":t},r.createElement("div",{className:"flex flex-grow"},r.createElement(Pr,{name:d,className:l()("w-5",f)}),r.createElement("span",{className:"ml-2 text-base text-black"},a)),r.createElement("div",{className:"flex justify-end mt-2"},o.map((function(e,t){var n=0===t,a="primary"===e.type;return r.createElement(ft,{"data-cy":e.id,key:t,className:l()({"ml-2":!n}),color:a?"primary":void 0,onClick:function(){i(e.value)}},e.text)}))))};Oa.defaultProps={type:"info",onOutsideClick:function(){}},Oa.propTypes={type:o().string,message:o().string.isRequired,actions:o().arrayOf(o().shape({text:o().string.isRequired,value:o().any.isRequired,type:o().oneOf(["primary","secondary","cancel"]).isRequired})).isRequired,onSubmit:o().func.isRequired,onOutsideClick:o().func};var Da=Oa,xa=n(46317),ka=n(18794);function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Na=function(e){var t=e.selectProps.value,n=t[t.length-1],a=e.data.label;return n.label!==a&&(a+=", "),r.createElement("span",null,a)},Ra=function(e){return r.createElement("div",null,r.createElement(ka.y.Option,e,r.createElement("input",{type:"checkbox",checked:e.isSelected,className:"w-6 h-6 mr-2",onChange:function(e){return null}}),r.createElement("label",null,e.value," ")))},Ma=function(e){var t=e.id,n=e.className,a=e.closeMenuOnSelect,o=e.hideSelectedOptions,i=e.isClearable,s=e.isDisabled,c=e.isMulti,u=e.isSearchable,d=e.onChange,f=e.options,m=e.placeholder,p=e.noIcons,y=e.menuPlacement,v=e.value,h=c?{Option:Ra,MultiValue:Na}:{};h=p?Ca(Ca({},h),{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null}}):h;var g=[];return v&&Array.isArray(v)&&v.forEach((function(e){var t=f.find((function(t){return t.value===e}));t&&g.push(JSON.parse(JSON.stringify(t)))})),r.createElement(xa.ZP,{inputId:"input-".concat(t),className:l()(n,"flex flex-col flex-1 customSelect__wrapper"),classNamePrefix:"customSelect",isDisabled:s,isClearable:i,isMulti:c,isSearchable:u,menuPlacement:y,closeMenuOnSelect:a,hideSelectedOptions:o,components:h,placeholder:m,options:f,value:v&&Array.isArray(v)?g:v,onChange:function(e,t){var n=t.action,r=e.length?e.reduce((function(e,t){return e.concat([t.value])}),[]):e;d(r,n)}})};Ma.defaultProps={className:"",closeMenuOnSelect:!0,hideSelectedOptions:!0,isClearable:!0,isDisabled:!1,isMulti:!1,isSearchable:!0,noIcons:!1,menuPlacement:"auto",value:[]},Ma.propTypes={className:o().string,closeMenuOnSelect:o().bool,hideSelectedOptions:o().bool,isClearable:o().bool,isDisabled:o().bool,isMulti:o().bool,isSearchable:o().bool,noIcons:o().bool,menuPlacement:o().oneOf(["auto","bottom","top"]),onChange:o().func.isRequired,options:o().arrayOf(o().shape({value:o().string,label:o().string})),placeholder:o().string,value:o().oneOfType([o().arrayOf(o().string),o().any])};var Aa=Ma;function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Va(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qa=function(e){var t=e.title,n=e.amount,a=e.data,o=_a((0,r.useState)(null),2),i=o[0],s=o[1],c=["#932a13","#821393","#2b7fc4","#12c457","#7f7d2e","#7f2e4a","#866943","#65ae7f","#334b5f","#3cb0dc","#292ac9","#629753"];return r.createElement("div",null,r.createElement("div",{className:"flex justify-between px-2 py-1 bg-secondary-main"},r.createElement("span",{className:"text-base font-bold text-white tracking-widest uppercase"},t),r.createElement("div",{className:"flex"},r.createElement("span",{className:"text-base font-bold text-white"},n),r.createElement(Pr,{name:"eye-hidden",className:"w-6 text-white ml-2 cursor-pointer transition duration-300 hover:opacity-80",onClick:function(){return alert("TBD")}}))),r.createElement("div",{className:"overflow-y-auto overflow-x-hidden ohif-scrollbar max-h-64"},!!a.length&&a.map((function(e,n){var a=n,o=n+1,u=!!i&&i[t]===n,d=function(){s((function(e){return Ua(Ua({},e),{},La({},t,e&&e[t]===a?null:a))}))};return r.createElement("div",{key:n,className:l()("group flex cursor-default bg-black border border-transparent transition duration-300 rounded overflow-hidden",{"border-primary-light":u}),onClick:d,onKeyDown:d,role:"button",tabIndex:"0"},r.createElement("div",{className:l()("text-center w-6 py-1 text-base transition duration-300",{"bg-primary-light text-black":u,"bg-primary-dark text-primary-light group-hover:bg-secondary-main":!u})},o),r.createElement("div",{className:"px-2 py-1 flex flex-1 items-center justify-between"},r.createElement("span",{className:"text-base text-primary-light mb-1 flex items-center flex-1"},r.createElement("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:c[n]}}),"Label short description"),r.createElement(Pr,{className:l()("text-white w-6 cursor-pointer transition duration-300 hover:opacity-80"),name:"eye-visible",onClick:function(e){e.stopPropagation(),alert("Toggle")}})))}))))};qa.defaultProps={amount:null,data:[]},qa.propTypes={title:o().string.isRequired,amount:o().oneOfType([o().string,o().number]),data:o().array};function Fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(n),!0).forEach((function(t){za(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Za(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wa={maxWidth:"".concat(248,"px"),width:"".concat(248,"px")},$a={open:{left:{marginLeft:"0px"},right:{marginRight:"0px"}},closed:{left:{marginLeft:"-".concat(188,"px")},right:{marginRight:"-".concat(188,"px")}}},Ya={open:{left:"border-r-4",right:"border-l-4"},closed:{left:"border-r-4 items-end",right:"border-l-4 items-start"}},Ga={left:"push-left",right:"push-right"},Ja={left:{right:5},right:{left:5}},Ka=function(e){var t=e.side,n=e.className,a=e.defaultComponentOpen,o=e.childComponents,i=(0,P.$G)("SidePanel").t,s=Ha((0,r.useState)(a),2),c=s[0],u=s[1],d=c?"open":"closed",f=Object.assign({},$a[d][t],Wa),m=function(e,t){return Array.isArray(e)?e.find((function(e){return e.name===t})):e}(o,c);return r.createElement("div",{className:l()(n,"transition-all duration-300 ease-in-out h-100 bg-primary-dark border-black flex flex-col justify-start box-content",Ya[d][t]),style:f},c?r.createElement(r.Fragment,null,r.createElement("div",{className:"px-3 border-b border-secondary-light"},r.createElement(ft,{variant:"text",color:"inherit",rounded:"none",onClick:function(){u(null)},name:m.name,className:"flex flex-row items-center px-3 h-12 relative w-full"},r.createElement(Pr,{name:Ga[t],className:l()("text-primary-active absolute","left"===t&&"order-last"),style:Ba({},Ja[t])}),r.createElement("span",{className:"flex-1 text-primary-active"},i(m.label)))),r.createElement(m.content,null)):r.createElement(r.Fragment,null,(Array.isArray(o)?o:[o]).map((function(e,t){return r.createElement(ft,{key:t,variant:"text",color:"inherit",onClick:function(){u(e.name)},style:{minWidth:"".concat(56,"px"),width:"".concat(56,"px")},name:e.name,className:"flex flex-col text-xs px-1 py-1 text-white border-transparent border-b"},r.createElement(Pr,{name:e.iconName,className:"text-primary-active"}),r.createElement("span",{className:"mt-2 text-white text-xs"},i(e.iconLabel)))}))))};Ka.defaultProps={defaultComponentOpen:null},Ka.propTypes={side:o().oneOf(["left","right"]).isRequired,className:o().string,defaultComponentOpen:o().string,childComponents:o().oneOfType([o().shape({iconName:o().string.isRequired,iconLabel:o().string.isRequired,name:o().string.isRequired,label:o().string.isRequired,content:o().func}),o().arrayOf(o().shape({iconName:o().string.isRequired,iconLabel:o().string.isRequired,name:o().string.isRequired,label:o().string.isRequired,content:o().func}))])};var Xa=Ka,Qa=n(25920);function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return to(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oo="flex items-center rounded-md border-transparent border-2 cursor-pointer",io="h-full flex flex-1 items-center rounded-md rounded-tr-none rounded-br-none",so="h-full flex items-center justify-center rounded-tr-md rounded-br-md w-4",co="w-5 h-5",lo="w-4 h-full stroke-1",uo="border-l pt-2 pb-2",fo="absolute z-10 top-0 mt-12",mo=function(e){var t=e.isExpanded,n=e.primary;return l()(oo,!t&&!n.isActive&&"hover:bg-primary-dark hover:border-primary-dark")},po="h-full flex flex-row items-center",yo=function(e){var t=e.primary,n=e.isExpanded;return l()(io,t.isActive&&!n?"bg-primary-light rounded-tr-md rounded-br-md active":n?"bg-primary-dark":"bg-secondary-dark hover:bg-primary-dark")},vo=function(e){var t=e.isExpanded,n=e.primary;return l()(so,t?"bg-primary-light rounded-tr-md rounded-br-md":n.isActive?"bg-secondary-dark":"hover:bg-primary-dark bg-secondary-dark")},ho=function(e){var t=e.primary,n=e.isExpanded;return l()(co,t.isActive&&!n?"text-primary-dark":"text-common-bright")},go=function(e){var t=e.isExpanded;return l()(lo,t?"text-primary-dark":"text-primary-active hover:text-common-bright")},bo=function(e){var t=e.primary,n=e.isExpanded,r=e.isHovering;return l()(uo,r||n||t.isActive?"border-transparent":"border-primary-active")},So=function(e){var t=e.isExpanded;return l()(fo,t?"block":"hidden")},wo=function(e){var t=e.isRadio,n=e.isAction,a=e.bState,o=e.groupId,i=e.primary,s=e.secondary,c=e.items,l=e.renderer,u=e.onInteraction,d=(0,P.$G)("Buttons").t,f=a.primaryToolId,m=a.toggles,p=eo((0,r.useState)({primary:i,items:function e(r){return r.map((function(r,a){return ro(ro({},r),{},{index:a,onClick:function(){u({groupId:o,itemId:r.id,interactionType:r.type,commandName:r.commandName,commandOptions:r.commandOptions}),v((function(o){return ro(ro({},o),{},{primary:n?o.primary:ro(ro({},r),{},{index:a}),isExpanded:!1,items:e(c).filter((function(e){return!(t&&!n)||e.index!==a}))})}))}})}))}(c).filter((function(e){return!(t&&!n)||e.id!==i.id})),isHovering:!1,isExpanded:!1}),2),y=p[0],v=p[1],h="tool"===y.primary.type&&f===y.primary.id||"toggle"===y.primary.type&&!0===m[y.primary.id];return r.createElement(Qa.default,{onOutsideClick:function(){return v((function(e){return ro(ro({},e),{},{isExpanded:!1})}))}},r.createElement("div",{name:"SplitButton",className:"relative"},r.createElement("div",{className:mo(ro(ro({},y),{},{primary:{isActive:h}})),style:{height:"40px"},onMouseEnter:function(){return v((function(e){return ro(ro({},e),{},{isHovering:!0})}))},onMouseLeave:function(){return v((function(e){return ro(ro({},e),{},{isHovering:!1})}))}},r.createElement("div",{className:po},r.createElement("div",{onClick:function(){u({groupId:o,itemId:y.primary.id,interactionType:y.primary.type,commandName:y.primary.commandName,commandOptions:y.primary.commandOptions})},className:yo(ro(ro({},y),{},{primary:{isActive:h}})),"data-tool":y.primary.id,"data-cy":"".concat(o,"-split-button-primary")},r.createElement(Gi,{isDisabled:!y.primary.tooltip,content:y.primary.tooltip},r.createElement("div",{className:"flex items-center justify-center w-full h-full",style:{padding:"10px"}},r.createElement(Pr,{name:y.primary.icon,className:ho(ro(ro({},y),{},{primary:{isActive:h}}))})))),r.createElement("div",{className:bo(ro(ro({},y),{},{primary:{isActive:h}}))}),r.createElement("div",{className:vo(ro(ro({},y),{},{primary:{isActive:h}})),onClick:function(){return v((function(e){return ro(ro({},e),{},{isExpanded:!e.isExpanded})}))},"data-cy":"".concat(o,"-split-button-secondary")},r.createElement(Gi,{isDisabled:y.isExpanded||!s.tooltip,content:s.tooltip,className:"h-full"},r.createElement(Pr,{name:s.icon,className:go(ro(ro({},y),{},{primary:{isActive:h}}))}))))),r.createElement("div",{className:So(ro({},y)),"data-cy":"".concat(o,"-list-menu")},r.createElement(Hi,{items:y.items,renderer:function(e){return l(ro(ro({},e),{},{t:d}))}}))))};wo.defaultProps={isRadio:!1,isAction:!1,primary:{label:null,tooltip:null},secondary:{icon:"chevron-down",label:null,isActive:!0,tooltip:"More Measure Tools"},items:[],renderer:function(e){var t=e.icon,n=e.label,a=e.isActive,o=e.t;return r.createElement("div",{className:l()("flex flex-row items-center p-3 h-8 w-full hover:bg-primary-dark",a&&"bg-primary-dark")},r.createElement("span",{className:"mr-4 text-base whitespace-pre text-common-bright"},r.createElement(Pr,{name:t,className:"w-5 h-5 text-common-bright"})),r.createElement("span",{className:"mr-5 text-base whitespace-pre text-common-bright"},o(n)))}},wo.propTypes={primary:o().shape({id:o().string.isRequired,icon:o().string,label:o().string,type:o().oneOf(["tool","action","toggle"]).isRequired,tooltip:o().string}),secondary:o().shape({id:o().string,icon:o().string,label:o().string,tooltip:o().string,isActive:o().bool}),renderer:o().func,items:o().arrayOf(o().shape({id:o().string.isRequired,icon:o().string,label:o().string,type:o().oneOf(["tool","action","toggle"]).isRequired,tooltip:o().string,isActive:o().bool})),onInteraction:o().func.isRequired};var Eo=wo,Io=function(e){var t=0;return e.forEach((function(e){e.isTracked&&t++})),t},Oo=function(e){var t=e.tabs,n=e.activeTabName,a=e.expandedStudyInstanceUIDs,o=e.onClickTab,i=e.onClickStudy,s=e.onClickThumbnail,c=e.onDoubleClickThumbnail,u=e.onClickUntrack,d=e.activeDisplaySetInstanceUID,f=(0,P.$G)("StudyBrowser").t;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flex flex-row items-center justify-center h-16 p-4 border-b w-100 border-secondary-light bg-primary-dark","data-cy":"studyBrowser-panel"},r.createElement(wt,{variant:"outlined",color:"inherit",className:"border rounded-md border-secondary-light"},t.map((function(e){var t=e.name,a=e.label,i=e.studies,s=n===t,c=!i.length;return r.createElement(ft,{key:t,className:l()("text-white text-base border-none bg-black p-2 min-w-18",s&&"bg-primary-main"),size:"initial",onClick:function(){o(t)},disabled:c},f(a))})))),r.createElement("div",{className:"flex flex-col flex-1 overflow-auto"},t.find((function(e){return e.name===n})).studies.map((function(e){var t=e.studyInstanceUid,n=e.date,o=e.description,l=e.numInstances,f=e.modalities,m=e.displaySets,p=a.includes(t);return r.createElement(r.Fragment,{key:t},r.createElement(Po,{date:n,description:o,numInstances:l,modalities:f,trackedSeries:Io(m),isActive:p,onClick:function(){i(t)},"data-cy":"thumbnail-list"}),p&&m&&r.createElement(Ni,{thumbnails:m,activeDisplaySetInstanceUID:d,onThumbnailClick:s,onThumbnailDoubleClick:c,onClickUntrack:u}))}))))};Oo.propTypes={onClickTab:o().func.isRequired,onClickStudy:o().func,onClickThumbnail:o().func,onDoubleClickThumbnail:o().func,onClickUntrack:o().func,activeTabName:o().string.isRequired,expandedStudyInstanceUIDs:o().arrayOf(o().string).isRequired,activeDisplaySetInstanceUID:o().string,tabs:o().arrayOf(o().shape({name:o().string.isRequired,label:o().string.isRequired,studies:o().arrayOf(o().shape({studyInstanceUid:o().string.isRequired,date:o().string,numInstances:o().number,modalities:o().string,description:o().string,displaySets:o().arrayOf(o().shape({displaySetInstanceUID:o().string.isRequired,imageSrc:o().string,imageAltText:o().string,seriesDate:o().string,seriesNumber:o().number,numInstances:o().number,description:o().string,componentType:o().oneOf(["thumbnail","thumbnailTracked","thumbnailNoImage"]).isRequired,isTracked:o().bool,viewportIdentificator:o().arrayOf(o().string),dragData:o().shape({type:o().string.isRequired})}))})).isRequired}))};var Do=function(){};Oo.defaultProps={onClickTab:Do,onClickStudy:Do,onClickThumbnail:Do,onDoubleClickThumbnail:Do,onClickUntrack:Do};var xo=Oo,ko=function(e){var t=e.date,n=e.description,a=e.numInstances,o=e.modalities,i=e.trackedSeries,s=e.isActive,c=e.onClick;return r.createElement("div",{className:l()(s?"bg-secondary-dark":"bg-black hover:bg-secondary-main","first:border-0 border-t border-secondary-light cursor-pointer select-none outline-none"),onClick:c,onKeyDown:c,role:"button",tabIndex:"0"},r.createElement("div",{className:"flex flex-col flex-1 px-4 pb-2"},r.createElement("div",{className:"flex flex-row items-center justify-between pt-2 pb-2"},r.createElement("div",{className:"text-base text-white"},t),r.createElement("div",{className:"flex flex-row items-center text-base text-blue-300"},r.createElement(Pr,{name:"group-layers",className:"w-4 mx-2 text-blue-300"}),a)),r.createElement("div",{className:"flex flex-row py-1"},r.createElement("div",{className:"pr-5 text-xl text-blue-300"},o),r.createElement("div",{className:"text-base text-blue-300 break-words truncate-2-lines"},n))),!!i&&r.createElement("div",{className:"flex flex-2"},r.createElement("div",{className:l()("flex flex-row bg-secondary-main text-base text-white py-1 pl-2 pr-4 mt-2 ",s?"flex-1 border-t border-secondary-light justify-center":"rounded-sm mx-4 mb-4")},r.createElement(Pr,{name:"tracked",className:"w-4 mr-2 text-primary-light"}),i," Tracked Series")))};ko.propTypes={date:o().string.isRequired,description:o().string.isRequired,modalities:o().string.isRequired,numInstances:o().number.isRequired,trackedSeries:o().number,isActive:o().bool,onClick:o().func.isRequired};var Po=ko,Co=function(e){var t=e.seriesTableColumns,n=e.seriesTableDataSource,a=e.children,o=(0,P.$G)("StudyList").t;return r.createElement("div",{className:"w-full bg-black py-4 pl-12 pr-2"},r.createElement("div",{className:"block"},a),r.createElement("div",{className:"mt-4"},r.createElement(ti,null,r.createElement(si,null,r.createElement(li,null,Object.keys(t).map((function(e){return r.createElement(oi,{key:e},o(t[e]))})))),r.createElement(ri,null,n.map((function(e,t){return r.createElement(li,{key:t},Object.keys(e).map((function(t){var n=e[t];return r.createElement(oi,{key:t,className:"truncate"},n)})))}))))))};Co.propTypes={seriesTableDataSource:o().arrayOf(o().object).isRequired,seriesTableColumns:o().object.isRequired,children:o().node.isRequired};var To=Co;function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){Mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ao=function(e){var t=e.filtersMeta,n=e.filterValues,a=e.onChange,o=e.clearFilters,i=e.isFiltering,s=e.numOfStudies,c=(0,P.$G)("StudyList").t,l={sortBy:n.sortBy,sortDirection:n.sortDirection},u=s>0&&s<=100;return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("div",{className:"bg-primary-dark"},r.createElement("div",{className:"container relative flex flex-col pt-5 m-auto"},r.createElement("div",{className:"flex flex-row justify-between px-12 mb-5"},r.createElement("div",{className:"flex flex-row"},r.createElement(ps,{variant:"h4",className:"mr-6 text-primary-light"},c("Study list"))),r.createElement("div",{className:"flex flex-row"},i&&r.createElement(ft,{rounded:"full",variant:"outlined",color:"primary",className:"mx-8 text-primary-active border-primary-active",startIcon:r.createElement(Pr,{name:"cancel"}),onClick:o},c("Clear filters")),r.createElement(ps,{variant:"h4",className:"mr-2","data-cy":"num-studies"},s>100?">100":s),r.createElement(ps,{variant:"h6",className:"self-end pb-1 text-common-light"},c("Studies"))))))),r.createElement("div",{className:"sticky z-10 border-b-4 border-black",style:{top:"52px"}},r.createElement("div",{className:"pt-3 pb-3 bg-primary-dark "},r.createElement(aa,{inputMeta:t,values:n,onValuesChange:a,sorting:l,onSortingChange:function(e){a(Ro(Ro({},n),e))},isSortingEnabled:u})),s>100&&r.createElement("div",{className:"container m-auto"},r.createElement("div",{className:"py-1 text-base text-center rounded-b bg-primary-main"},r.createElement("p",{className:"text-white"},c("Filter list to 100 studies or less to enable sorting"))))))};Ao.propTypes={filtersMeta:o().arrayOf(o().shape({name:o().string.isRequired,displayName:o().string.isRequired,inputType:o().oneOf(["Text","MultiSelect","DateRange","None"]).isRequired,isSortable:o().bool.isRequired,gridCol:o().oneOf([1,2,3,4,5,6,7,8,9,10,11,12]).isRequired,option:o().arrayOf(o().shape({value:o().string,label:o().string}))})).isRequired,filterValues:o().object.isRequired,numOfStudies:o().number.isRequired,onChange:o().func.isRequired,clearFilters:o().func.isRequired,isFiltering:o().bool.isRequired};var jo=Ao;function Uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _o=function(e){var t=e.onChangePage,n=e.currentPage,a=e.perPage,o=e.onChangePerPage,i=(0,P.$G)("StudyList").t,s=function(e){t(e<1?1:e)},c=[{value:"25",label:"25"},{value:"50",label:"50"},{value:"100",label:"100"}],l=Uo((0,r.useState)(c.find((function(e){return e.value===a}))),2),u=l[0],d=l[1];return r.createElement("div",{className:"bg-black py-10"},r.createElement("div",{className:"container m-auto relative px-8"},r.createElement("div",{className:"flex justify-between"},r.createElement("div",{className:"flex items-center"},r.createElement(Aa,{id:"rows-per-page",className:"relative mr-3 w-16 border-primary-main",options:c,value:u,isMulti:!1,isClearable:!1,isSearchable:!1,closeMenuOnSelect:!1,hideSelectedOptions:!0,onChange:function(e){d(e),o(e.value)}}),r.createElement(ps,{className:"text-base opacity-60"},i("Results per page"))),r.createElement("div",{className:""},r.createElement("div",{className:"flex items-center"},r.createElement(ps,{className:"opacity-60 mr-4 text-base"},"Page ",n),r.createElement(wt,{color:"primary"},r.createElement(ft,{size:"initial",className:"border-primary-main px-4 py-2 text-base",color:"white",onClick:function(){return s(1)}},"<<"),r.createElement(ft,{size:"initial",className:"border-primary-main py-2 px-2 text-base",color:"white",onClick:function(){return s(n-1)}},i("< Previous")),r.createElement(ft,{size:"initial",className:"border-primary-main py-2 px-4 text-base",color:"white",onClick:function(){return s(n+1)}},i("Next >"))))))))};_o.propTypes={onChangePage:o().func.isRequired,currentPage:o().number.isRequired,perPage:o().number.isRequired,onChangePerPage:o().func.isRequired};var Vo=_o,qo=function(e){var t=e.tableData,n=t.row,a=t.expandedContent,o=t.onClickRow,i=t.isExpanded;return r.createElement(r.Fragment,null,r.createElement("tr",{className:"select-none"},r.createElement("td",{className:l()("border-0 p-0",{"border-b border-secondary-light bg-primary-dark":i})},r.createElement("div",{className:l()("w-full transition border-transparent duration-300",{"border border-primary-light rounded overflow-hidden mb-2 hover:border-secondary-light":i})},r.createElement("table",{className:l()("w-full p-4")},r.createElement("tbody",null,r.createElement("tr",{className:l()("cursor-pointer hover:bg-secondary-main transition duration-300 bg-black",{"bg-primary-dark":!i},{"bg-secondary-dark":i}),onClick:o},n.map((function(e,t){var n=e.content,a=e.title,o=e.gridCol;return r.createElement("td",{key:t,className:l()("px-4 py-2 text-base truncate",{"border-b border-secondary-light":!i},Qr(o)||""),style:{maxWidth:0},title:a},r.createElement("div",{className:"flex"},0===t&&r.createElement("div",null,r.createElement(Pr,{name:i?"chevron-down":"chevron-right",className:"mr-4 inline-flex"})),r.createElement("div",{className:l()({"overflow-hidden":!0},{truncate:!0})},n)))}))),i&&r.createElement("tr",{className:"w-full bg-black select-text max-h-0 overflow-hidden"},r.createElement("td",{colSpan:n.length},a))))))))};qo.propTypes={tableData:o().shape({row:o().arrayOf(o().shape({key:o().string.isRequired,content:o().node,title:o().string,gridCol:o().number.isRequired})).isRequired,expandedContent:o().node.isRequired,onClickRow:o().func.isRequired,isExpanded:o().bool.isRequired})};var Fo=qo,Bo=function(e){var t=e.tableDataSource;return r.createElement("div",{className:"bg-black"},r.createElement("div",{className:"container m-auto relative"},r.createElement("table",{className:"w-full text-white"},r.createElement("tbody",{"data-cy":"study-list-results"},t.map((function(e,t){return r.createElement(Fo,{tableData:e,key:t})}))))))};Bo.propTypes={tableDataSource:o().arrayOf(o().shape({row:o().array.isRequired,expandedContent:o().node.isRequired,onClickRow:o().func.isRequired,isExpanded:o().bool.isRequired}))};var zo=Bo,Ho=function(e){var t=e.date,n=e.modality,a=e.description;return r.createElement("div",{className:"p-2"},r.createElement("div",{className:"leading-none"},r.createElement("span",{className:"mr-2 text-base text-white"},t),r.createElement("span",{className:"px-1 text-base font-bold text-black rounded-sm bg-common-bright"},n)),r.createElement("div",{className:"pt-2 text-base leading-none truncate text-primary-light ellipse"},a))};Ho.propTypes={date:o().string.isRequired,modality:o().string.isRequired,description:o().string.isRequired};var Zo=Ho,Wo=function(e){return r.createElement("svg",e,r.createElement("title",null,"Open Health Imaging Foundation"),r.createElement("g",{fill:"#FFF",fillRule:"nonzero"},r.createElement("path",{d:"M37.709 17.613c2.593 0 4.473-2 4.473-5.206 0-3.206-1.88-5.205-4.473-5.205s-4.474 1.999-4.474 5.205c0 3.207 1.88 5.206 4.474 5.206zm0-1.148c-1.841 0-3.286-1.425-3.286-4.058 0-2.632 1.445-4.057 3.286-4.057 1.84 0 3.285 1.425 3.285 4.057 0 2.633-1.445 4.058-3.285 4.058zm7.54 3.86v-4.019h.1c.257.416.752 1.327 2.217 1.327 1.9 0 3.226-1.524 3.226-3.94 0-2.394-1.326-3.918-3.246-3.918-1.485 0-1.94.91-2.197 1.306h-.139V9.874h-1.128v10.45h1.168zm2.158-3.741c-1.405 0-2.177-1.188-2.177-2.91 0-1.702.752-2.85 2.177-2.85 1.485 0 2.217 1.247 2.217 2.85 0 1.623-.752 2.91-2.217 2.91zm8.353 1.049c1.544 0 2.672-.772 3.028-1.92l-1.128-.317c-.297.792-.985 1.188-1.9 1.188-1.37 0-2.316-.886-2.37-2.514h5.517v-.495c0-2.83-1.682-3.8-3.266-3.8-2.058 0-3.424 1.623-3.424 3.958 0 2.336 1.346 3.9 3.543 3.9zm1.96-4.573h-4.33c.079-1.182.915-2.236 2.251-2.236 1.267 0 2.079.95 2.079 2.236zm4.136 4.414v-4.572c0-1.326.822-2.078 1.94-2.078 1.084 0 1.742.707 1.742 1.9v4.75h1.168v-4.83c0-1.939-1.034-2.87-2.573-2.87-1.148 0-1.861.515-2.217 1.287h-.1V9.874H60.69v7.6h1.167zm12.292 0v-4.532h5.404v4.532h1.227V7.34h-1.227v4.513h-5.404V7.34h-1.227v10.134h1.227zm12.113.159c1.544 0 2.673-.772 3.029-1.92l-1.128-.317c-.297.792-.985 1.188-1.9 1.188-1.371 0-2.316-.886-2.37-2.514h5.517v-.495c0-2.83-1.683-3.8-3.266-3.8-2.059 0-3.425 1.623-3.425 3.958 0 2.336 1.346 3.9 3.543 3.9zm1.96-4.573h-4.33c.08-1.182.916-2.236 2.252-2.236 1.266 0 2.078.95 2.078 2.236zm5.206 4.592c1.326 0 2.019-.712 2.256-1.207h.06v1.03h1.167v-5.008c0-2.415-1.84-2.692-2.81-2.692-1.148 0-2.455.396-3.049 1.781l1.109.396c.257-.554.866-1.148 1.98-1.148 1.073 0 1.602.569 1.602 1.544v.04c0 .563-.574.514-1.96.692-1.41.183-2.948.495-2.948 2.237 0 1.484 1.148 2.335 2.593 2.335zm.178-1.049c-.93 0-1.604-.415-1.604-1.227 0-.89.812-1.168 1.722-1.286.495-.06 1.821-.198 2.02-.436v1.069c0 .95-.753 1.88-2.138 1.88zm6.61.871V7.34h-1.167v10.134h1.168zm4.711.1c.436 0 .713-.08.871-.14l-.237-1.048c-.1.02-.257.059-.515.059-.514 0-1.01-.158-1.01-1.148v-4.434h1.624v-.99h-1.623v-1.82h-1.168v1.82h-1.148v.99h1.148v4.75c0 1.327 1.069 1.96 2.058 1.96zm3.662-.1v-4.572c0-1.326.846-2.078 2-2.078 1.098 0 1.76.692 1.76 1.9v4.75h1.169v-4.83c0-1.954-1.04-2.87-2.593-2.87-1.198 0-1.88.5-2.237 1.287h-.099v-3.72h-1.168v10.133h1.168zm12.371 0V7.34h-1.227v10.134h1.227zm3.464 0v-4.75c0-1.113.811-1.9 1.722-1.9.886 0 1.504.579 1.504 1.445v5.205h1.188v-4.948c0-.98.613-1.702 1.682-1.702.831 0 1.544.44 1.544 1.563v5.087h1.168v-5.087c0-1.786-.96-2.612-2.316-2.612-1.089 0-1.885.5-2.276 1.286h-.08c-.375-.811-1.039-1.286-2.038-1.286-.99 0-1.722.475-2.039 1.286h-.099V9.874h-1.128v7.6h1.168zm13.182.178c1.326 0 2.019-.712 2.257-1.207h.059v1.03h1.168v-5.008c0-2.415-1.841-2.692-2.81-2.692-1.149 0-2.455.396-3.05 1.781l1.11.396c.257-.554.865-1.148 1.979-1.148 1.073 0 1.603.569 1.603 1.544v.04c0 .563-.574.514-1.96.692-1.41.183-2.949.495-2.949 2.237 0 1.484 1.148 2.335 2.593 2.335zm.178-1.049c-.93 0-1.603-.415-1.603-1.227 0-.89.812-1.168 1.722-1.286.495-.06 1.821-.198 2.019-.436v1.069c0 .95-.752 1.88-2.138 1.88zm8.511 3.88c1.821 0 3.286-.831 3.286-2.791V9.874h-1.128v1.207h-.119c-.257-.396-.732-1.306-2.217-1.306-1.92 0-3.246 1.524-3.246 3.86 0 2.375 1.386 3.72 3.226 3.72 1.485 0 1.96-.87 2.217-1.286h.1v1.544c0 1.267-.891 1.84-2.119 1.84-1.38 0-1.865-.727-2.177-1.147l-.93.653c.475.796 1.41 1.524 3.107 1.524zm-.04-4.177c-1.464 0-2.216-1.108-2.216-2.691 0-1.544.732-2.791 2.217-2.791 1.425 0 2.177 1.148 2.177 2.79 0 1.683-.772 2.692-2.177 2.692zm6.058-7.7c.455 0 .83-.355.83-.79 0-.436-.375-.793-.83-.793-.456 0-.832.357-.832.792 0 .436.376.792.832.792zm.574 8.868v-7.6h-1.168v7.6h1.168zm3.305 0v-4.572c0-1.326.821-2.078 1.94-2.078 1.083 0 1.742.707 1.742 1.9v4.75h1.167v-4.83c0-1.939-1.034-2.87-2.573-2.87-1.148 0-1.86.515-2.217 1.287h-.099V9.874h-1.128v7.6h1.168zm10.055 3.009c1.82 0 3.286-.831 3.286-2.791V9.874h-1.129v1.207h-.118c-.258-.396-.733-1.306-2.217-1.306-1.92 0-3.246 1.524-3.246 3.86 0 2.375 1.385 3.72 3.226 3.72 1.485 0 1.96-.87 2.217-1.286h.099v1.544c0 1.267-.89 1.84-2.118 1.84-1.38 0-1.866-.727-2.177-1.147l-.93.653c.474.796 1.41 1.524 3.107 1.524zm-.04-4.177c-1.464 0-2.216-1.108-2.216-2.691 0-1.544.732-2.791 2.216-2.791 1.425 0 2.178 1.148 2.178 2.79 0 1.683-.772 2.692-2.178 2.692zm10.768 1.168v-4.532h4.394v-1.089h-4.394V8.429h4.85V7.34h-6.077v10.134h1.227zm9.877.159c2.058 0 3.444-1.564 3.444-3.92 0-2.375-1.386-3.938-3.444-3.938-2.059 0-3.444 1.563-3.444 3.939 0 2.355 1.385 3.919 3.444 3.919zm0-1.05c-1.564 0-2.276-1.345-2.276-2.87 0-1.524.712-2.89 2.276-2.89 1.563 0 2.276 1.366 2.276 2.89 0 1.525-.713 2.87-2.276 2.87zm7.68.99c1.148 0 1.9-.613 2.256-1.385h.08v1.286h1.167v-7.6h-1.168v4.493c0 1.425-1.089 2.078-1.96 2.078-.97 0-1.662-.713-1.662-1.821v-4.75h-1.168v4.83c0 1.939 1.03 2.87 2.455 2.87zm6.808-.099v-4.572c0-1.326.822-2.078 1.94-2.078 1.084 0 1.742.707 1.742 1.9v4.75h1.168v-4.83c0-1.939-1.034-2.87-2.573-2.87-1.148 0-1.86.515-2.217 1.287h-.1V9.874h-1.127v7.6h1.167zm9.857.159c1.465 0 1.96-.91 2.217-1.327h.139v1.168h1.128V7.34h-1.168v3.741h-.099c-.257-.396-.712-1.306-2.197-1.306-1.92 0-3.246 1.524-3.246 3.919 0 2.415 1.326 3.939 3.226 3.939zm.159-1.05c-1.465 0-2.217-1.286-2.217-2.91 0-1.602.732-2.85 2.217-2.85 1.425 0 2.177 1.149 2.177 2.85 0 1.723-.772 2.91-2.177 2.91zm7.858 1.07c1.326 0 2.019-.713 2.256-1.208h.06v1.03h1.167v-5.008c0-2.415-1.84-2.692-2.81-2.692-1.148 0-2.455.396-3.048 1.781l1.108.396c.257-.554.866-1.148 1.98-1.148 1.073 0 1.603.569 1.603 1.544v.04c0 .563-.574.514-1.96.692-1.41.183-2.95.495-2.95 2.237 0 1.484 1.149 2.335 2.594 2.335zm.178-1.05c-.93 0-1.603-.415-1.603-1.227 0-.89.811-1.168 1.722-1.286.494-.06 1.82-.198 2.019-.436v1.069c0 .95-.753 1.88-2.138 1.88zm8.016.97c.436 0 .713-.079.871-.138l-.238-1.05c-.098.02-.257.06-.514.06-.515 0-1.01-.158-1.01-1.148v-4.434h1.623v-.99h-1.623v-1.82h-1.167v1.82H224.2v.99h1.148v4.75c0 1.327 1.068 1.96 2.058 1.96zm3.088-8.966c.455 0 .831-.356.831-.792 0-.435-.376-.792-.831-.792-.455 0-.831.357-.831.792 0 .436.376.792.83.792zm.574 8.867v-7.6H229.9v7.6h1.168zm5.225.159c2.059 0 3.444-1.564 3.444-3.92 0-2.375-1.385-3.938-3.444-3.938-2.058 0-3.444 1.563-3.444 3.939 0 2.355 1.386 3.919 3.444 3.919zm0-1.05c-1.563 0-2.276-1.345-2.276-2.87 0-1.524.713-2.89 2.276-2.89 1.564 0 2.277 1.366 2.277 2.89 0 1.525-.713 2.87-2.277 2.87zm6.394.891v-4.572c0-1.326.82-2.078 1.94-2.078 1.083 0 1.741.707 1.741 1.9v4.75h1.168v-4.83c0-1.939-1.034-2.87-2.573-2.87-1.148 0-1.86.515-2.217 1.287h-.1V9.874h-1.127v7.6h1.168zM22.23 0h-4.995a2.77 2.77 0 0 0-2.769 2.77v4.995a2.77 2.77 0 0 0 2.77 2.769h4.995A2.77 2.77 0 0 0 25 7.764V2.77A2.77 2.77 0 0 0 22.23 0zm-4.995 1.108h4.996c.917 0 1.661.744 1.661 1.661v4.996c0 .917-.744 1.661-1.661 1.661h-4.996a1.662 1.662 0 0 1-1.661-1.661V2.769c0-.917.744-1.661 1.661-1.661zM8.765 0H3.769A2.77 2.77 0 0 0 1 2.77v4.995a2.77 2.77 0 0 0 2.77 2.769h4.995a2.77 2.77 0 0 0 2.769-2.77V2.77A2.77 2.77 0 0 0 8.764 0zM3.769 1.108h4.996c.917 0 1.661.744 1.661 1.661v4.996c0 .917-.744 1.661-1.661 1.661H3.769a1.662 1.662 0 0 1-1.661-1.661V2.769c0-.917.744-1.661 1.661-1.661zM22.23 13.466h-4.995a2.77 2.77 0 0 0-2.769 2.77v4.995A2.77 2.77 0 0 0 17.236 24h4.995A2.77 2.77 0 0 0 25 21.23v-4.995a2.77 2.77 0 0 0-2.77-2.769zm-4.995 1.108h4.996c.917 0 1.661.744 1.661 1.661v4.996c0 .917-.744 1.661-1.661 1.661h-4.996a1.662 1.662 0 0 1-1.661-1.661v-4.996c0-.917.744-1.661 1.661-1.661zM8.765 13.466H3.769A2.77 2.77 0 0 0 1 16.236v4.995A2.77 2.77 0 0 0 3.77 24h4.995a2.77 2.77 0 0 0 2.769-2.77v-4.995a2.77 2.77 0 0 0-2.77-2.769zm-4.996 1.108h4.996c.917 0 1.661.744 1.661 1.661v4.996c0 .917-.744 1.661-1.661 1.661H3.769a1.662 1.662 0 0 1-1.661-1.661v-4.996c0-.917.744-1.661 1.661-1.661z"})))};Wo.defaultProps={width:"250",height:"24",viewBox:"0 0 250 24",xmlns:"http://www.w3.org/2000/svg"};var $o={"logo-ohif":Wo};var Yo=["name"];function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ko(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xo=function(e){var t,n,a=e.name,o=Ko(e,Yo);return r.createElement(r.Fragment,null,(t=a,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){Jo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o),t&&$o[t]?r.createElement($o[t],n):r.createElement("div",null,"Missing SVG")))};Xo.propTypes={name:o().string.isRequired};var Qo=Xo,ei=function(e){var t=e.children,n=e.className,a=e.fullWidth,o=e.style,i={base:"text-lg text-white",fullWidth:{true:"w-full",false:""}};return r.createElement("div",{className:l()(i.base,i.fullWidth[a],n),style:o},t)};ei.defaultProps={className:"",fullWidth:!0,style:{}},ei.propTypes={fullWidth:o().bool,children:o().node.isRequired,className:o().string,style:o().object};var ti=ei,ni=function(e){var t=e.children,n=e.className,a=e.style;return r.createElement("div",{className:l()("mt-2 max-h-48 overflow-y-scroll ohif-scrollbar",n),style:a},r.isValidElement(t)?r.cloneElement(t,{isTableHead:!1}):t)};ni.defaultProps={className:"",style:{}},ni.propTypes={children:function(e,t,n){var a=r.Children.toArray(e.children);return a.some((function(e){return"string"==typeof e}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid element instead of a string.")):a.some((function(e){return!r.isValidElement(e)}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid node element.")):void 0},className:o().string,style:o().object};var ri=ni,ai=function(e){var t=e.children,n=e.className,a=e.colSpan,o=e.cellsNum,i=e.isTableHead,s=e.align,c=e.style,u={align:{left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},isTableHead:{true:"",false:"border-r border-secondary-light"}};return r.createElement("div",{className:l()("px-2 last:border-r-0 break-all","w-".concat(a,"/").concat(o),u.align[s],u.isTableHead[i],n),style:c},t)};ai.defaultProps={align:"left",className:"",colSpan:1,isTableHead:!1,style:{}},ai.propTypes={align:o().oneOf(["left","center","right","justify"]),children:o().node.isRequired,className:o().string,colSpan:o().number,isTableHead:o().bool,style:o().object};var oi=ai,ii=function(e){var t=e.children,n=e.className,a=e.style;return r.createElement("div",{className:l()("bg-secondary-dark border-b border-secondary-light flex font-bold pr-2",n),style:a},r.isValidElement(t)?r.cloneElement(t,{isTableHead:!0}):t)};ii.defaultProps={className:"",style:{}},ii.propTypes={children:function(e,t,n){var a=r.Children.toArray(e.children);return a.some((function(e){return"string"==typeof e}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid element instead of a string.")):a.some((function(e){return!r.isValidElement(e)}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid node element.")):void 0},className:o().string,style:o().object};var si=ii,ci=function(e){var t=e.children,n=e.className,a=e.isTableHead,o=e.style,i=r.Children.map(t,(function(e){return r.isValidElement(e)?r.cloneElement(e,{isTableHead:a,cellsNum:t.length}):t}));return r.createElement("div",{className:l()("w-full flex",n),style:o},i)};ci.defaultProps={isTableHead:!1,className:"",style:{}},ci.propTypes={isTableHead:o().bool,children:function(e,t,n){var a=r.Children.toArray(e.children);return a.some((function(e){return"string"==typeof e}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid element instead of a string.")):a.some((function(e){return!r.isValidElement(e)}))?new Error("Failed prop type: Invalid prop ".concat(t," supplied to ").concat(n,", expected a valid node element.")):void 0},className:o().string,style:o().object};var li=ci,ui=function(e){var t=e.children;return r.createElement(r.Fragment,null,t)},di=n(46223);function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hi=function(e){var t=e.displaySetInstanceUID,n=e.className,a=e.imageSrc,o=e.imageAltText,i=e.description,s=e.seriesNumber,c=e.numInstances,u=e.dragData,d=e.isActive,f=e.onClick,m=e.onDoubleClick,p=yi((0,di.c)({type:"displayset",item:mi({},u),canDrag:function(e){return 0!==Object.keys(u).length}}),3),y=(p[0],p[1]);p[2];return r.createElement("div",{className:l()(n,"flex flex-col flex-1 px-3 mb-8 cursor-pointer outline-none select-none group"),id:"thumbnail-".concat(t),"data-cy":"study-browser-thumbnail",onClick:f,onDoubleClick:m,role:"button",tabIndex:"0"},r.createElement("div",{ref:y},r.createElement("div",{className:l()("flex flex-1 items-center justify-center rounded-md bg-black text-base text-white overflow-hidden min-h-32",d?"border-2 border-primary-light":"border border-secondary-light group-focus:border-blue-300 hover:border-blue-300"),style:{margin:d?"0":"1px"}},a?r.createElement("img",{src:a,alt:o,className:"object-none min-h-32"}):r.createElement("div",null,o)),r.createElement("div",{className:"flex flex-row items-center flex-1 text-base text-blue-300 pt-2"},r.createElement("div",{className:"mr-4"},r.createElement("span",{className:"font-bold text-primary-main"},"S: "),s),r.createElement("div",{className:"flex flex-row items-center flex-1"},r.createElement(Pr,{name:"group-layers",className:"w-3 mr-2"})," ",c)),r.createElement("div",{className:"text-base text-white break-all"},i)))};hi.propTypes={displaySetInstanceUID:o().string.isRequired,className:o().string,imageSrc:o().string,dragData:o().shape({type:o().string.isRequired}),imageAltText:o().string,description:o().string.isRequired,seriesNumber:o().number.isRequired,numInstances:o().number.isRequired,isActive:o().bool.isRequired,onClick:o().func.isRequired,onDoubleClick:o().func.isRequired},hi.defaultProps={dragData:{}};var gi=hi;function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oi=function(e){var t=e.displaySetInstanceUID,n=e.description,a=e.seriesDate,o=e.modality,i=e.modalityTooltip,s=e.onClick,c=e.onDoubleClick,u=e.canReject,d=e.onReject,f=e.dragData,m=e.isActive,p=Ei((0,di.c)({type:"displayset",item:Si({},f),canDrag:function(e){return 0!==Object.keys(f).length}}),3),y=(p[0],p[1]);p[2];return r.createElement("div",{className:l()("flex flex-row flex-1 cursor-pointer outline-none border-transparent hover:border-blue-300 focus:border-blue-300 rounded select-none",m?"border-2 border-primary-light":"border"),style:{padding:m?"11px":"12px"},id:"thumbnail-".concat(t),onClick:s,onDoubleClick:c,role:"button",tabIndex:"0"},r.createElement("div",{ref:y},r.createElement("div",{className:"flex flex-col flex-1"},r.createElement("div",{className:"flex flex-row items-center flex-1 mb-2"},r.createElement(Pr,{name:"list-bullets",className:"w-12 text-secondary-light"}),r.createElement(Gi,{position:"bottom",content:r.createElement(ps,null,i)},r.createElement("div",{className:"px-3 text-lg text-white rounded-sm bg-primary-main"},o)),r.createElement("span",{className:"ml-4 text-base text-blue-300"},a)),r.createElement("div",{className:"flex flex-row"},u&&r.createElement(Pr,{name:"old-trash",style:{minWidth:"12px"},className:"w-3 ml-4 text-red-500",onClick:d}),r.createElement("div",{className:"ml-4 text-base text-white break-all"},n)))))};Oi.propTypes={displaySetInstanceUID:o().string.isRequired,dragData:o().shape({type:o().string.isRequired}),description:o().string.isRequired,modality:o().string.isRequired,modalityTooltip:o().string.isRequired,seriesDate:o().string.isRequired,onClick:o().func.isRequired,onDoubleClick:o().func.isRequired,isActive:o().bool.isRequired};var Di=Oi,xi=function(e){var t=e.displaySetInstanceUID,n=e.className,a=e.imageSrc,o=e.imageAltText,i=e.description,s=e.seriesNumber,c=e.numInstances,u=e.dragData,d=e.onClick,f=e.onDoubleClick,m=e.onClickUntrack,p=e.viewportIdentificator,y=e.isTracked,v=e.isActive,h=y?"circled-checkmark":"dotted-circle",g=p.join(", ");return r.createElement("div",{className:l()("flex flex-row flex-1 px-3 py-2 cursor-pointer outline-none",n),id:"thumbnail-".concat(t)},r.createElement("div",{className:"flex flex-col items-center flex-2"},r.createElement("div",{className:l()("flex flex-col items-center justify-start p-2 mb-2 relative cursor-pointer",y&&"rounded-sm hover:bg-gray-900")},r.createElement(Gi,{position:"right",content:r.createElement("div",{className:"flex flex-row flex-1"},r.createElement("div",{className:"flex items-center justify-center pr-4 flex-2"},r.createElement(Pr,{name:"info-link",className:"text-primary-active"})),r.createElement("div",{className:"flex flex-col flex-1"},r.createElement("span",null,"Series is",r.createElement("span",{className:"text-white"},y?" tracked":" untracked")),!!p.length&&r.createElement("span",null,"in viewport",r.createElement("span",{className:"ml-1 text-white"},g))))},r.createElement(Pr,{name:h,className:"w-4 mb-2 text-primary-light"})),r.createElement("div",{className:"text-xl leading-tight text-white text-center"},p.length>3?r.createElement("div",null,r.createElement("div",null,p.slice(0,3).map((function(e){return r.createElement("div",{key:e},e)}))),r.createElement(Gi,{position:"right",content:r.createElement("div",{className:"text-left max-w-40"},"Series is displayed ",r.createElement("br",null)," in viewport"," ",g)},r.createElement(Pr,{name:"tool-more-menu",className:"text-white py-2"}))):p.map((function(e){return r.createElement("div",{key:e},e)})))),y&&r.createElement("div",{onClick:m},r.createElement(Pr,{name:"cancel",className:"w-4 text-primary-active"}))),r.createElement(gi,{displaySetInstanceUID:t,imageSrc:a,imageAltText:o,dragData:u,description:i,seriesNumber:s,numInstances:c,isActive:v,onClick:d,onDoubleClick:f}))};xi.propTypes={dragData:o().shape({type:o().string.isRequired}),displaySetInstanceUID:o().string.isRequired,className:o().string,imageSrc:o().string,imageAltText:o().string,description:o().string.isRequired,seriesNumber:o().number.isRequired,numInstances:o().number.isRequired,onClick:o().func.isRequired,onDoubleClick:o().func.isRequired,onClickUntrack:o().func.isRequired,viewportIdentificator:o().array,isTracked:o().bool,isActive:o().bool.isRequired};var ki=xi,Pi=function(e){var t=e.thumbnails,n=e.activeDisplaySetInstanceUID,a=e.onThumbnailClick,o=e.onThumbnailDoubleClick,i=e.onClickUntrack;return r.createElement("div",{className:"py-3 bg-black overflow-y-hidden ohif-scrollbar"},t.map((function(e){var t=e.displaySetInstanceUID,s=e.description,c=e.dragData,l=e.seriesNumber,u=e.numInstances,d=e.modality,f=e.componentType,m=e.seriesDate,p=e.viewportIdentificator,y=e.isTracked,v=e.canReject,h=e.onReject,g=e.imageSrc,b=e.imageAltText,S=n===t;switch(f){case"thumbnail":return r.createElement(gi,{key:t,displaySetInstanceUID:t,dragData:c,description:s,seriesNumber:l,numInstances:u,imageSrc:g,imageAltText:b,viewportIdentificator:p,isActive:S,onClick:function(){return a(t)},onDoubleClick:function(){return o(t)}});case"thumbnailTracked":return r.createElement(ki,{key:t,displaySetInstanceUID:t,dragData:c,description:s,seriesNumber:l,numInstances:u,imageSrc:g,imageAltText:b,viewportIdentificator:p,isTracked:y,isActive:S,onClick:function(){return a(t)},onDoubleClick:function(){return o(t)},onClickUntrack:function(){return i(t)}});case"thumbnailNoImage":return r.createElement(Di,{isActive:S,key:t,displaySetInstanceUID:t,dragData:c,modality:d,modalityTooltip:Ci(d),seriesDate:m,description:s,canReject:v,onReject:h,onClick:function(){return a(t)},onDoubleClick:function(){return o(t)},viewportIdentificator:p});default:return r.createElement(r.Fragment,null)}})))};function Ci(e){return Ti.hasOwnProperty(e)?Ti[e]:"Unknown"}Pi.propTypes={thumbnails:o().arrayOf(o().shape({displaySetInstanceUID:o().string.isRequired,imageSrc:o().string,imageAltText:o().string,seriesDate:o().string,seriesNumber:o().number,numInstances:o().number,description:o().string,componentType:o().oneOf(["thumbnail","thumbnailTracked","thumbnailNoImage"]).isRequired,viewportIdentificator:o().oneOfType([o().string,o().array]),isTracked:o().bool,dragData:o().shape({type:o().string.isRequired})})),activeDisplaySetInstanceUID:o().string,onThumbnailClick:o().func.isRequired,onThumbnailDoubleClick:o().func.isRequired,onClickUntrack:o().func.isRequired};var Ti={SR:"Structured Report"},Ni=Pi,Ri=function(e){var t=e.type,n=e.id,a=e.icon,o=e.label,i=e.commandName,s=e.commandOptions,c=e.onInteraction,u=e.dropdownContent,d=e.isActive,f=e.bState,m=(void 0===f?{}:f).primaryToolId,p=d||"tool"===t&&n===m,y={type:{primary:p?"text-black":"text-common-bright hover:bg-primary-dark hover:text-primary-light",secondary:p?"text-black":"text-white hover:bg-secondary-dark hover:text-white focus:bg-secondary-dark focus:text-white"}},v=p?"active":"",h=!!p&&!!u;return r.createElement("div",{key:n},r.createElement(Gi,{isSticky:h,content:h?u:o,tight:h},r.createElement(Vr,{variant:p?"contained":"text",size:"toolbar",className:l()("mx-1",v,y.type[t]),onClick:function(){c({itemId:n,interactionType:t,commandName:i,commandOptions:s})},name:o,key:n,id:n},r.createElement(Pr,{name:a}))))};Ri.defaultProps={dropdownContent:null,isActive:!1,type:"action"},Ri.propTypes={type:o().oneOf(["action","toggle","tool"]),id:o().string.isRequired,isActive:o().bool,onInteraction:o().func.isRequired,icon:o().string.isRequired,label:o().string.isRequired,dropdownContent:o().oneOfType([o().node,o().func])};var Mi=Ri,Ai=function(e){var t=e.onGetMenuItems,n=e.onSetLabel,a=e.onClose,o=e.onDelete,i=t([{label:"Delete measurement",actionType:"Delete",action:function(e){o(e),a()},value:{}},{label:"Add Label",actionType:"setLabel",action:function(e){n(e),a()},value:{}}]);return r.createElement(It,{items:i})};Ai.propTypes={onClose:o().func.isRequired,onSetLabel:o().func.isRequired,onDelete:o().func.isRequired,onGetMenuItems:o().func.isRequired};var ji=Ai;function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Li=function(e){var t=e.type,n=e.id,a=e.isActive,o=e.onClick,i=e.icon,s=e.className,c=e.content,u=e.contentProps,d={type:{primary:a?"text-black":"text-common-bright hover:bg-primary-dark hover:text-primary-light",secondary:a?"text-black":"text-white hover:bg-secondary-dark focus:bg-secondary-dark"}};return r.createElement("div",{key:n,className:"ExpandableToolbarButton"},r.createElement(Vr,{variant:a?"contained":"text",className:l()("mx-1",d.type[t],a&&"ExpandableToolbarButton__arrow"),onClick:function(){o.apply(void 0,arguments)},key:n},r.createElement(Pr,{name:i})),r.createElement("div",{className:"absolute z-10 pt-4"},r.createElement("div",{className:l()("ExpandableToolbarButton__content w-48",s)},r.createElement(c,Ui({},u,{onClick:function(){o.apply(void 0,arguments),u.onClick&&u.onClick.apply(u,arguments)}})))))};Li.defaultProps={isActive:!1,type:"primary",content:null,onClick:function(){}},Li.propTypes={type:o().oneOf(["primary","secondary"]),id:o().string.isRequired,isActive:o().bool,onClick:o().func.isRequired,icon:o().string.isRequired,content:o().oneOfType([o().node,o().func]),contentProps:o().object};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zi=function(e){var t=e.items,n=void 0===t?[]:t,a=e.renderer,o=e.onClick,i=Fi((0,r.useState)(null),2),s=i[0],c=i[1],u=function(e){var t=e.item,n=e.index,i=e.isSelected;return r.createElement("div",{className:l()("flex flex-row justify-between items-center","bg-indigo-dark","cursor-pointer"),onClick:function(){c(n),o({item:t,selectedIndex:n}),t.onClick&&t.onClick(Vi(Vi({},t),{},{index:n,isSelected:i}))},"data-cy":t.id},a&&a(Vi(Vi({},t),{},{index:n,isSelected:i})))};return r.createElement("div",{className:"flex flex-col rounded-md bg-secondary-dark pt-2 pb-2"},n.map((function(e,t){return r.createElement(u,{key:"ListItem".concat(t),index:t,isSelected:s===t,item:e})})))};zi.propTypes={items:o().array.isRequired,renderer:o().func.isRequired,onClick:o().func},zi.defaultProps={onClick:function(){}};var Hi=zi;function Zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $i={bottom:{top:-15,left:"50%",transform:"translateX(-50%)"},"bottom-left":{top:-15,left:5},"bottom-right":{top:-15,right:5},right:{top:"calc(50% - 8px)",left:-15,transform:"rotate(270deg)"},left:{top:"calc(50% - 8px)",right:-15,transform:"rotate(-270deg)"}},Yi=function(e){var t=e.content,n=e.isSticky,a=e.position,o=e.tight,i=e.children,s=e.isDisabled,c=Zi((0,r.useState)(!1),2),u=c[0],d=c[1],f=(0,P.$G)("Buttons").t,m=function(){u||d(!0)},p=function(){u&&d(!1)},y=(n||u)&&!s;return r.createElement("div",{className:"relative",onMouseOver:m,onFocus:m,onMouseOut:p,onBlur:p,role:"tooltip"},i,r.createElement("div",{className:l()("tooltip tooltip-".concat(a),{block:y,hidden:!y})},r.createElement("div",{className:l()("relative tooltip-box bg-primary-dark border border-secondary-main text-white text-base rounded inset-x-auto top-full w-max-content",{"py-1 px-4":!o})},"string"==typeof t?f(t):t,r.createElement("svg",{className:"absolute h-4 text-primary-dark stroke-secondary-main",style:$i[a],xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.createElement("path",{fill:"currentColor",d:"M24 22h-24l12-20z"})))))};Yi.defaultProps={tight:!1,isSticky:!1,position:"bottom",isDisabled:!1},Yi.propTypes={isDisabled:o().bool,content:o().oneOfType([o().node,o().func]),position:o().oneOf(["bottom","bottom-left","bottom-right","left","right"]),isSticky:o().bool,tight:o().bool,children:o().node.isRequired};var Gi=Yi;function Ji(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ki(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qi=function(e){var t=e.children,n=e.text,a=Ki((0,r.useState)(!1),2),o=a[0],i=a[1],s=Ki((0,r.useState)(null),2),c=s[0],u=s[1],d=Ki((0,r.useState)(!1),2),f=d[0],m=d[1],p=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null),h=(0,r.useRef)(null),g=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,navigator.clipboard.writeText(t);case 4:u("Copied!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to copy: ",e.t0),u("Failed to copy!");case 11:return e.prev=11,I(),setTimeout((function(){b()}),1e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[1,7,11,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ji(o,r,a,i,s,"next",e)}function s(e){Ji(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),b=function(){i(!1),u(null),m(!1)},S=function(e){null!==e.current&&clearTimeout(e.current)},w=function(){S(y),o||(p.current=setTimeout((function(){p.current=null,i(!0)}),1e3))},E=function(e){S(p),o&&!f&&(y.current=setTimeout((function(){y.current=null,b()}),10))},I=function(){var e=h.current,t=v.current,n=e.getBoundingClientRect(),r=n.left,a=n.top+n.height+"px",o=r+"px";t.style.top=a,t.style.left=o};(0,r.useEffect)((function(){return o?(I(),"undefined"!=typeof window&&window.addEventListener("scroll",I)):"undefined"!=typeof window&&window.removeEventListener("scroll",I),function(){"undefined"!=typeof window&&window.removeEventListener("scroll",I)}}),[o]);return r.createElement("div",{className:l()("inline-flex max-w-full"),onMouseOver:w,onFocus:w,onMouseOut:E,onBlur:E,role:"tooltip",ref:h},r.createElement("span",{className:"truncate"},t),r.createElement("div",{className:l()("fixed pt-1",{block:o,hidden:!o}),ref:v,onClick:function(e){e.stopPropagation(),g(n||t)}},r.createElement("div",{className:l()("flex items-center relative bg-primary-dark border border-secondary-main text-white text-base rounded px-2 py-2")},c||r.createElement(r.Fragment,null,t,r.createElement("div",{className:"ml-2 pl-2 border-l border-secondary-light"},r.createElement(Pr,{name:"clipboard",className:"w-4 text-white"}))))))};Qi.defaultProps={text:""},Qi.propTypes={text:o().string,children:o().node.isRequired};var es=Qi,ts=["align","color","display","gutterBottom","noWrap","paragraph","variant","component","className"];function ns(){return(ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var as={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle:"h6",body:"p"},os="inherit",is="initial",ss="initial",cs=!1,ls=!1,us=!1,ds="body",fs={variant:{h1:"text-6xl",h2:"text-5xl",h3:"text-4xl",h4:"text-3xl",h5:"text-2xl",h6:"text-xl",subtitle:"text-lg",body:"text-base",caption:"text-xs",button:"text-sm uppercase",overline:"text-xs uppercase",srOnly:"absolute h-0 w-0 hidden",inherit:""},color:{initial:"text-white",inherit:"text-inherit",primary:"text-primary-main",secondary:"text-common-light",error:"text-red-600"},align:{inherit:"",left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},display:{initial:"",block:"block",inline:"inline"},gutterBottom:{true:"mb-3",false:""},paragraph:{true:"mb-3",false:""},noWrap:{true:"truncate",false:""}},ms=function(e){var t=e.align,n=void 0===t?os:t,a=e.color,o=void 0===a?is:a,i=e.display,s=void 0===i?ss:i,c=e.gutterBottom,u=void 0===c?cs:c,d=e.noWrap,f=void 0===d?ls:d,m=e.paragraph,p=void 0===m?us:m,y=e.variant,v=void 0===y?ds:y,h=e.component,g=e.className,b=rs(e,ts),S=h||(p?"p":as[v])||"span";return r.createElement(S,ns({className:l()("m-0 leading-tight",fs.variant[v],fs.color[o],fs.align[n],fs.gutterBottom[u],fs.paragraph[p],fs.noWrap[f],fs.display[s],g)},b))};ms.propTypes={component:o().elementType,paragraph:o().bool,display:o().oneOf(["initial","block","inline"]),variant:o().oneOf(["h1","h2","h3","h4","h5","h6","subtitle","body","caption","button","overline","srOnly","inherit"]),color:o().oneOf(["initial","inherit","primary","secondary","error"]),className:o().string,children:o().node,align:o().oneOf(["inherit","left","center","right","justify"]),gutterBottom:o().bool,noWrap:o().bool};var ps=ms,ys=function(e){var t=e.viewportIndex,n=e.onSeriesChange,a=e.studyData,o=e.children;return r.createElement("div",{className:"relative flex flex-col h-full"},r.createElement("div",{className:"absolute top-0 left-0 w-full"},r.createElement(Os,{onSeriesChange:n,studyData:a}),r.createElement(Da,{message:"Track all measurement for this series?",type:"info",actions:[{type:"cancel",text:"No",value:0},{type:"secondary",text:"No, do not ask again",value:-1},{type:"primary",text:"Yes",value:1}],onSubmit:function(e){"undefined"!=typeof window&&window.alert(e)}})),r.createElement("div",{className:"w-full h-full",id:"viewport-".concat(t)},o))};ys.propTypes={viewportIndex:o().number.isRequired,onSeriesChange:o().func.isRequired,studyData:o().shape({label:o().string.isRequired,isTracked:o().bool.isRequired,isLocked:o().bool.isRequired,isRehydratable:o().bool.isRequired,studyDate:o().string.isRequired,currentSeries:o().number.isRequired,seriesDescription:o().string.isRequired,modality:o().string.isRequired,patientInformation:o().shape({patientName:o().string.isRequired,patientSex:o().string.isRequired,patientAge:o().string.isRequired,MRN:o().string.isRequired,thickness:o().string.isRequired,spacing:o().string.isRequired,scanner:o().string.isRequired})}).isRequired,children:o().node.isRequired};function vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gs="text-base text-primary-light",bs="text-base text-white max-w-24 truncate",Ss="flex flex-col",ws="flex flex-col ml-4",Es=function(e){var t,n,a,o=e.studyData,i=e.showNavArrows,s=e.showStatus,c=e.showCine,u=e.cineProps,d=e.showPatientInfo,f=e.onSeriesChange,m=e.onDoubleClick,p=e.onPillClick,y=vs((0,r.useState)(d),2),v=y[0],h=y[1],g=o.label,b=o.isTracked,S=o.isLocked,w=o.isRehydratable,E=o.useAltStyling,I=o.modality,O=o.studyDate,D=o.currentSeries,x=o.seriesDescription,k=o.patientInformation,P=k.patientName,C=k.patientSex,T=k.patientAge,N=k.MRN,R=k.thickness,M=k.spacing,A=k.scanner,j=(0,r.useRef)(null),U=(t=j,n=function(){return h(!1)},a=function e(r){t.current&&!t.current.contains(r.target)&&(n(),"undefined"!=typeof window&&window.removeEventListener("mousedown",e))},{add:function(){"undefined"!=typeof window&&window.addEventListener("mousedown",a)},remove:function(){"undefined"!=typeof window&&window.removeEventListener("mousedown",a)}});(0,r.useEffect)((function(){return v?U.add():U.remove(),function(){return U.remove()}}),[U,v]);var L=E?"#365A6A":"#1D205A",_=E?"#031923":b?"#020424":null;return r.createElement("div",{className:"flex flex-wrap items-center p-2 -mt-2 border-b select-none",style:{borderColor:L,backgroundColor:_},onDoubleClick:m},r.createElement("div",{className:"flex flex-1 flex-grow mt-2 min-w-48"},r.createElement("div",{className:"flex items-center"},r.createElement("span",{className:"mr-2 text-white text-large"},g),s&&function(){if("SR"===I){var e=w&&!S?3:w&&S?2:1,t=null,n=null;switch(e){case 1:n=function(){return r.createElement("div",{className:"flex items-center justify-center -mr-1 rounded-full",style:{width:"18px",height:"18px",backgroundColor:"#98e5c1",border:"solid 1.5px #000000"}},r.createElement(Pr,{name:"exclamation",style:{color:"#000",width:"12px",height:"12px"}}))},t=function(){return r.createElement("div",null,"This structured report is not compatible",r.createElement("br",null),"with this application.")};break;case 2:n=function(){return r.createElement("div",{className:"flex items-center justify-center -mr-1 bg-black rounded-full",style:{width:"18px",height:"18px"}},r.createElement(Pr,{name:"lock",style:{color:"#05D97C",width:"8px",height:"11px"}}))},t=function(){return r.createElement("div",null,"This structured report is currently read-only",r.createElement("br",null),"because you are tracking measurements in",r.createElement("br",null),"another viewport.")};break;case 3:n=function(){return r.createElement("div",{className:"flex items-center justify-center -mr-1 bg-white rounded-full group-hover:bg-customblue-200",style:{width:"18px",height:"18px",border:"solid 1.5px #000000"}},r.createElement(Pr,{name:"arrow-left",style:{color:"#000",width:"14px",height:"14px"}}))},t=function(){return r.createElement("div",null,"Click to restore measurements.")}}var a=function(){return r.createElement("div",{className:l()("group relative flex items-center justify-center px-2 rounded-full cursor-default bg-customgreen-100",{"hover:bg-customblue-100":3===e,"cursor-pointer":3===e}),style:{height:"24px",width:"55px"},onClick:function(){3===e&&p&&p()}},r.createElement("span",{className:"pr-1 text-lg font-bold leading-none text-black"},"SR"),r.createElement(n,null))};return r.createElement(r.Fragment,null,t&&r.createElement(Gi,{content:r.createElement(t,null),position:"bottom-left"},r.createElement(a,null)),!t&&r.createElement(a,null))}var o=b?"tracked":"dotted-circle";return r.createElement("div",{className:"relative"},r.createElement(Gi,{position:"bottom-left",content:r.createElement("div",{className:"flex py-2"},r.createElement("div",{className:"flex pt-1"},r.createElement(Pr,{name:"info-link",className:"w-4 text-primary-main"})),r.createElement("div",{className:"flex ml-4"},r.createElement("span",{className:"text-base text-common-light"},b?r.createElement(r.Fragment,null,"Series is",r.createElement("span",{className:"font-bold text-white"}," tracked")," and can be viewed ",r.createElement("br",null)," in the measurement panel"):r.createElement(r.Fragment,null,"Measurements for",r.createElement("span",{className:"font-bold text-white"}," untracked "),"series ",r.createElement("br",null)," will not be shown in the ",r.createElement("br",null)," measurements panel"))))},r.createElement(Pr,{name:o,className:"w-6 text-primary-light"})))}()),r.createElement("div",{className:"flex flex-col justify-start ml-4"},r.createElement("div",{className:"flex"},r.createElement("span",{className:"text-base text-white"},O),r.createElement("span",{className:"pl-2 ml-2 text-base border-l border-primary-light text-primary-light"},"S: ",D)),r.createElement("div",{className:"flex"},r.createElement("p",{className:"text-base truncate max-w-40 text-primary-light"},x)))),i&&!c&&r.createElement("div",{className:"mt-2",style:{pointerEvents:"all"}},r.createElement(wt,null,r.createElement(ft,{size:"initial",className:"px-2 py-1 bg-black",onClick:function(){return f("left")}},r.createElement(Pr,{name:"chevron-left",className:"w-4 text-white"})),r.createElement(ft,{size:"initial",className:"px-2 py-1 bg-black",onClick:function(){return f("right")}},r.createElement(Pr,{name:"chevron-right",className:"w-4 text-white"})))),c&&!i&&r.createElement("div",{className:"mt-2 mr-auto min-w-48 max-w-48"},r.createElement(Tt,u)),r.createElement("div",{className:"flex h-8 mt-2 ml-4 mr-2",onClick:function(){return h(!v)}},r.createElement(Is,{showPatientInfoRef:j,isOpen:v,patientName:P,patientSex:C,patientAge:T,MRN:N,thickness:R,spacing:M,scanner:A})))};function Is(e){for(var t=e.patientName,n=e.patientSex,a=e.patientAge,o=e.MRN,i=e.thickness,s=e.spacing,c=e.scanner,u=e.isOpen,d=e.showPatientInfoRef,f=(0,P.$G)("PatientInfo").t;"0"===a.charAt(0);)a=a.substr(1);return r.createElement("div",{ref:d},r.createElement(Gi,{isSticky:!0,isDisabled:!u,position:"bottom-right",content:u&&r.createElement("div",{className:"flex py-2"},r.createElement("div",{className:"flex pt-1"},r.createElement(Pr,{name:"info-link",className:"w-4 text-primary-main"})),r.createElement("div",{className:"flex flex-col ml-2"},r.createElement("span",{className:"text-base font-bold text-white",title:t},t),r.createElement("div",{className:"flex pb-4 mt-4 mb-4 border-b border-secondary-main"},r.createElement("div",{className:l()(Ss)},r.createElement("span",{className:l()(gs)},f("Sex")),r.createElement("span",{className:l()(bs),title:n},n)),r.createElement("div",{className:l()(ws)},r.createElement("span",{className:l()(gs)},f("Age")),r.createElement("span",{className:l()(bs),title:a},a)),r.createElement("div",{className:l()(ws)},r.createElement("span",{className:l()(gs)},f("MRN")),r.createElement("span",{className:l()(bs),title:o},o))),r.createElement("div",{className:"flex"},r.createElement("div",{className:l()(Ss)},r.createElement("span",{className:l()(gs)},f("Thickness")),r.createElement("span",{className:l()(bs),title:i},i)),r.createElement("div",{className:l()(ws)},r.createElement("span",{className:l()(gs)},f("Spacing")),r.createElement("span",{className:l()(bs),title:s},s)),r.createElement("div",{className:l()(ws)},r.createElement("span",{className:l()(gs)},f("Scanner")),r.createElement("span",{className:l()(bs),title:c},c)))))},r.createElement("div",{className:"relative flex justify-end cursor-pointer"},r.createElement("div",{className:"relative"},r.createElement(Pr,{name:"profile",className:"w-5 text-white"}),r.createElement(Pr,{name:"info-link",className:"absolute w-5 text-white bg-black",style:{right:-7,bottom:-10}})))))}Es.propTypes={onSeriesChange:o().func.isRequired,showNavArrows:o().bool,showCine:o().bool,cineProps:o().object,showPatientInfo:o().bool,studyData:o().shape({useAltStyling:o().bool,label:o().string.isRequired,isTracked:o().bool.isRequired,isRehydratable:o().bool.isRequired,studyDate:o().string.isRequired,currentSeries:o().number.isRequired,seriesDescription:o().string.isRequired,modality:o().string.isRequired,patientInformation:o().shape({patientName:o().string.isRequired,patientSex:o().string.isRequired,patientAge:o().string.isRequired,MRN:o().string.isRequired,thickness:o().string.isRequired,spacing:o().string.isRequired,scanner:o().string.isRequired})}).isRequired},Es.defaultProps={cineProps:{},showCine:!1,showStatus:!0,showNavArrows:!0,showPatientInfo:!1};var Os=Es;function Ds(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function xs(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ds(o,r,a,i,s,"next",e)}function s(e){Ds(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(n),!0).forEach((function(t){Cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rs=[{value:"jpg",label:"jpg"},{value:"png",label:"png"}],Ms="image",As=function(e){var t=e.activeViewport,n=e.onClose,a=e.updateViewportPreview,o=e.enableViewport,i=e.disableViewport,s=e.toggleAnnotations,c=e.loadImage,u=e.downloadBlob,d=e.defaultSize,f=e.minimumSize,m=e.maximumSize,p=e.canvasClass,y=(0,P.$G)("Modals").t,v=Ts((0,r.useState)(Ms),2),h=v[0],g=v[1],b=Ts((0,r.useState)(["jpg"]),2),S=b[0],w=b[1],E=Ts((0,r.useState)({width:d,height:d}),2),I=E[0],O=E[1],D=Ts((0,r.useState)(!0),2),x=D[0],k=D[1],C=Ts((0,r.useState)(!0),2),T=C[0],N=C[1],R=Ts((0,r.useState)({width:1,height:1}),2),M=R[0],A=R[1],j=Ts((0,r.useState)(),2),U=j[0],L=j[1],_=Ts((0,r.useState)({width:d,height:d}),2),V=_[0],q=_[1],F=Ts((0,r.useState)({ref:(0,r.createRef)(),width:d,height:d}),2),B=F[0],z=F[1],H=Ts((0,r.useState)({src:null,width:d,height:d}),2),Z=(H[0],H[1]),W=Ts((0,r.useState)({width:!1,height:!1,filename:!1}),2),$=W[0],Y=W[1],G=Object.values($).includes(!0),J=(0,r.useRef)(null),K=function(e,t){var n="height"===t?"width":"height",r=e.replace(/\D/,""),a=""===r,o=Ps({},I),i=a?"":Math.min(r,m);i!==I[t]&&(o[t]=i,T&&""!==o[n]&&(o[n]=Math.round(o[t]*M[n])),O(o),a||(q(o),z((function(e){return Ps(Ps({},e),o)}))))},X={width:"The minimum valid width is 100px.",height:"The minimum valid height is 100px.",filename:"The file name cannot be empty."},Q=function(e){return $[e]?r.createElement(ps,{className:"pl-1 mt-2",color:"error"},X[e]):null},ee=(0,r.useCallback)((function(e){return e>=f?e:f}),[f]),te=(0,r.useCallback)(xs(regeneratorRuntime.mark((function e(){var n,r,o,i,l,u,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,U,I.width,I.height);case 2:return n=e.sent,r=n.width,o=n.height,s(x,U),i={height:ee(o),width:ee(r)},q(i),z((function(e){return Ps(Ps({},e),i)})),e.next=11,a(U,B.ref.current,S);case 11:l=e.sent,u=l.dataUrl,d=l.width,f=l.height,Z((function(e){return Ps(Ps({},e),{},{src:u,width:ee(d),height:ee(f)})}));case 16:case"end":return e.stop()}}),e)}))),[c,t,U,I.width,I.height,s,x,ee,a,B.ref,S]);return(0,r.useEffect)((function(){return o(U),function(){i(U)}}),[i,o,U]),(0,r.useEffect)((function(){null!==J.current&&clearTimeout(J.current),J.current=setTimeout((function(){J.current=null,te()}),1e3)}),[t,U,x,I,c,s,a,S,B.ref,f,m,te]),(0,r.useEffect)((function(){var e=I.width,t=I.height;Y(Ps({},{width:e<f,height:t<f,filename:!h}))}),[I,h,f]),r.createElement("div",null,r.createElement(ps,{variant:"h6"},y("Please specify the dimensions, filename, and desired type for the output image.")),r.createElement("div",{className:"flex flex-col mt-6"},r.createElement("div",{className:"w-full mb-4"},r.createElement(Jr,{"data-cy":"file-name",value:h,onChange:function(e){return g(e.target.value)},label:y("File Name")}),Q("filename")),r.createElement("div",{className:"flex"},r.createElement("div",{className:"flex w-1/3"},r.createElement("div",{className:"flex flex-col flex-grow"},r.createElement("div",{className:"w-full"},r.createElement(Jr,{type:"number",min:f,max:m,label:y("Image width (px)"),value:I.width,onChange:function(e){return K(e.target.value,"width")},"data-cy":"image-width"}),Q("width")),r.createElement("div",{className:"w-full mt-4"},r.createElement(Jr,{type:"number",min:f,max:m,label:y("Image height (px)"),value:I.height,onChange:function(e){return K(e.target.value,"height")},"data-cy":"image-height"}),Q("height"))),r.createElement("div",{className:"flex items-center mt-8"},r.createElement(Gi,{position:"right",content:T?"Dismiss Aspect":"Keep Aspect"},r.createElement(Vr,{onClick:function(){var e=I.width,t=I.height,n=Ps({},n);if(!T){var r=Math.min(e,t);n.width=e/r,n.height=t/r,A(n)}N(!T)},size:"small",rounded:"full"},r.createElement(Pr,{name:T?"link":"unlink"}))))),r.createElement("div",{className:"w-1/4 pl-6 ml-6 border-l border-secondary-dark"},r.createElement("div",null,r.createElement(sa,{sortDirection:"none",label:y("File Type"),isSortable:!1,onLabelClick:function(){}},r.createElement(Aa,{className:"mt-2",isClearable:!1,value:S,"data-cy":"file-type",onChange:function(e){w([e.value])},hideSelectedOptions:!1,options:Rs,placeholder:"File Type"}))),r.createElement("div",{className:"mt-4 ml-2"},r.createElement("label",{htmlFor:"show-annotations",className:"flex items-center"},r.createElement("input",{id:"show-annotations","data-cy":"show-annotations",type:"checkbox",className:"mr-2",checked:x,onChange:function(e){return k(e.target.checked)}}),r.createElement(ps,null,y("Show Annotations"))))))),r.createElement("div",{className:"mt-8"},r.createElement("div",{className:"p-4 rounded bg-secondary-dark border-secondary-primary","data-cy":"image-preview"},r.createElement(ps,{variant:"h5"},y("Image preview")),t&&r.createElement("div",{className:"mx-auto my-0",style:{height:V.height,width:V.width},ref:function(e){return L(e)}},r.createElement("canvas",{className:l()("block",p),style:{height:B.height,width:B.width},width:B.width,height:B.height,ref:B.ref})),!t&&r.createElement(ps,{className:"mt-4"},y("Active viewport has no displayed image")))),r.createElement("div",{className:"flex justify-end mt-4"},r.createElement(ft,{"data-cy":"cancel-btn",variant:"outlined",onClick:n},y("Cancel")),r.createElement(ft,{className:"ml-2",disabled:G,onClick:function(){u(h||Ms,S,U,B.ref.current)},color:"primary","data-cy":"download-btn"},y("Download"))))};function js(e){var t=e.numRows,n=e.numCols,a=e.children,o=100/t,i=100/n;return r.createElement("div",{"data-cy":"viewport-grid",style:{display:"grid",gridTemplateRows:"repeat(".concat(t,", ").concat(o,"%)"),gridTemplateColumns:"repeat(".concat(n,", ").concat(i,"%)"),height:"100%",width:"100%"}},a)}js.propTypes={numRows:o().number.isRequired,numCols:o().number.isRequired,children:o().arrayOf(o().node).isRequired};var Us=js,Ls=n(14831);function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qs(e){var t=e.children,n=e.className,a=e.isActive,o=e.onDrop,i=e.onDoubleClick,s=e.onInteraction,c=e.acceptDropsFor,u=null,d=_s((0,Ls.L)({accept:c,drop:function(e,t){var n=t.canDrop(),r=t.isOver();n&&r&&o&&(p(),o(e))},collect:function(e){return{isHighlighted:e.canDrop(),isHovered:e.isOver()}}}),2),f=d[0],m=(f.isHovered,f.isHighlighted,d[1]),p=function(e){u&&u.focus(),s(e)};return r.createElement("div",{ref:function(e){m(e),u=e},onMouseDown:p,onDoubleClick:i,onClick:p,onScroll:p,onWheel:p,className:l()("flex flex-col","rounded-lg hover:border-primary-light transition duration-300 outline-none overflow-hidden",{"border-2 border-primary-light":a,"border border-secondary-light":!a},n),style:{margin:a?"3px":"4px"}},t)}qs.propTypes={children:o().node.isRequired,className:o().string,isActive:o().bool.isRequired,acceptDropsFor:o().string.isRequired,onDrop:o().func.isRequired,onInteraction:o().func.isRequired,onDoubleClick:o().func};qs.defaultProps={onInteraction:function(){}};var Fs=qs,Bs=function(e){var t=e.title,n=e.subtitle,a=e.isSelected,o=e.index;return r.createElement(r.Fragment,null,r.createElement("div",{className:l()("flex flex-row items-center p-3 h-8 w-full hover:bg-primary-dark",a&&"bg-primary-dark")},r.createElement("span",{className:"text-common-bright mr-2 text-base whitespace-nowrap"},t),r.createElement("span",{className:"flex-1 text-aqua-pale font-light text-sm whitespace-nowrap"},n),r.createElement("span",{className:"text-primary-active ml-5 text-sm whitespace-nowrap"},o+1)))};Bs.propTypes={title:o().string.isRequired,subtitle:o().string.isRequired,isSelected:o().bool.isRequired,index:o().number.isRequired};var zs=Bs;function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){Ws(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ys(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gs=function(e){var t=e.availableLanguages,n=e.defaultLanguage,a=e.currentLanguage,o=e.disabled,i=e.hotkeyDefinitions,s=e.hotkeyDefaults,c=e.onCancel,l=e.onSubmit,u=e.onReset,d=e.hotkeysModule,f=(0,P.$G)("UserPreferencesModal").t,m=$s((0,r.useState)({isDisabled:o,hotkeyErrors:{},hotkeyDefinitions:i,language:a}),2),p=m[0],y=m[1],v=function(e){var t=e.title,n=e.children;return r.createElement(r.Fragment,null,r.createElement("div",{className:"border-b-2 border-black mb-2"},r.createElement(ps,{variant:"h5",className:"flex flex-grow text-primary-light font-light pb-2"},t)),r.createElement("div",{className:"mt-4 mb-8"},n))};return r.createElement("div",{className:"p-2"},r.createElement(v,{title:f("General")},r.createElement("div",{className:"flex flex-row justify-center items-center w-72"},r.createElement(ps,{variant:"subtitle",className:"mr-5 text-right h-full"},f("Language")),r.createElement(Aa,{isClearable:!1,onChange:function(e){y((function(t){return Zs(Zs({},t),{},{language:e})}))},options:t,value:p.language}))),r.createElement(v,{title:f("Hotkeys")},r.createElement(fc,{disabled:o,hotkeyDefinitions:p.hotkeyDefinitions,onChange:function(e,t,n){y((function(r){return Zs(Zs({},r),{},{isDisabled:Object.values(n).every((function(e){return void 0!==e})),hotkeyErrors:n,hotkeyDefinitions:Zs(Zs({},r.hotkeyDefinitions),{},Ws({},e,t))})}))},errors:p.hotkeyErrors,hotkeysModule:d})),r.createElement("div",{className:"flex flex-row justify-between"},r.createElement(ft,{variant:"outlined",onClick:function(){y((function(e){return Zs(Zs({},e),{},{language:n,hotkeyDefinitions:s,hotkeyErrors:{},isDisabled:o})})),u()},disabled:o},f("Reset to Defaults")),r.createElement("div",{className:"flex flex-row"},r.createElement(ft,{variant:"outlined",onClick:function(){y({hotkeyDefinitions:i}),c()}},f("Cancel")),r.createElement(ft,{variant:"contained",disabled:p.isDisabled,color:"light",className:"ml-2",onClick:function(){l(p)}},f("Save")))))},Js=function(){};Gs.propTypes={disabled:o().bool,hotkeyDefaults:o().object.isRequired,hotkeyDefinitions:o().object.isRequired,languageOptions:o().arrayOf(o().shape({label:o().string.isRequired,value:o().any.isRequired})),onCancel:o().func,onSubmit:o().func,onReset:o().func,hotkeysModule:o().shape({initialize:o().func.isRequired,pause:o().func.isRequired,unpause:o().func.isRequired,startRecording:o().func.isRequired,record:o().func.isRequired}).isRequired},Gs.defaultProps={languageOptions:[{value:"ONE",label:"ONE"},{value:"TWO",label:"TWO"}],onCancel:Js,onSubmit:Js,onReset:Js,disabled:!1};var Ks=Gs,Xs=["ctrl","alt","shift"],Qs={"":[],alt:["space"],shift:[],ctrl:["f4","f5","f11","w","r","t","o","p","a","d","f","g","h","j","l","z","x","c","v","b","n","pagedown","pageup"],"ctrl+shift":["q","w","r","t","p","a","h","v","b","n"]},ec=function(e){return e.join("+")},tc="It's not possible to define only modifier keys (ctrl, alt and shift) as a shortcut",nc="Field can't be empty.",rc=[function(e){var t=e.pressedKeys;if(!(void 0===t?[]:t).length)return{error:nc}},function(e){var t=e.pressedKeys,n=t[t.length-1];if(Xs.includes(n))return{error:tc}},function(e){var t=e.commandName,n=e.pressedKeys,r=function(e,t,n){var r=void 0,a=ec(n);for(var o in e){var i=e[o].keys;if(a===ec(i)&&o!==t){r=e[o];break}}return r}(e.hotkeys,t,n);if(r)return{error:'"'.concat(r.label,'" is already using the "').concat(n,'" shortcut.')}},function(e){var t=e.pressedKeys,n=void 0===t?[]:t,r=n[n.length-1],a=ec(n.slice(0,n.length-1)),o=Qs[a];if(!!o&&o.includes(r))return{error:'"'.concat(ec(n),'" shortcut combination is not allowed')}}];function ac(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dc=function(e){var t=e.disabled,n=e.hotkeyDefinitions,a=e.errors,o=e.onChange,i=e.hotkeysModule,s=(0,P.$G)("UserPreferencesModal").t,c=Object.keys(n).filter((function(e){return n[e].isEditable})).reduce((function(e,t){return e[t]=n[t],e}),{}),u=lc((0,r.useState)(a),2),d=u[0],f=u[1],m=function(e){var t=[],n=Object.entries(e);if(n.length){var r=Math.ceil(n.length/2);t.push(n.slice(0,r)),t.push(n.slice(r,n.length))}return t}(c);if(!Object.keys(n).length)return"No hotkey definitions";var p=function(e,t){var r=function(e){var t,n=e.commandName,r=e.pressedKeys,a=e.hotkeys,o=ac(rc);try{for(o.s();!(t=o.n()).done;){var i=(0,t.value)({commandName:n,pressedKeys:r,hotkeys:a});if(i&&i.error)return i}}catch(e){o.e(e)}finally{o.f()}return{error:void 0}}({commandName:e,pressedKeys:t.keys,hotkeys:n}).error;f((function(t){return sc(sc({},t),{},cc({},e,r))})),o(e,t,sc(sc({},d),{},cc({},e,r)))};return r.createElement("div",{className:"flex flex-row justify-center"},r.createElement("div",{className:"flex flex-row justify-evenly w-full"},m.map((function(e,n){return r.createElement("div",{key:"HotkeyGroup@".concat(n),className:"flex flex-row"},r.createElement("div",{className:"p-2 text-right flex flex-col"},e.map((function(e,n){var a=lc(e,2),o=a[0],c=a[1],u=0===n,f=d[o];return r.createElement("div",{key:"HotkeyItem@".concat(n),className:"flex flex-row justify-end mb-2"},r.createElement("div",{className:"flex flex-col items-center"},r.createElement(ps,{variant:"subtitle",className:l()("pr-6 w-full text-right text-primary-light",!u&&"hidden")},s("Function")),r.createElement(ps,{variant:"subtitle",className:l()("pr-6 h-full flex flex-row items-center whitespace-nowrap",u&&"mt-5")},c.label)),r.createElement("div",{className:"flex flex-col"},r.createElement(ps,{variant:"subtitle",className:l()("pr-6 pl-0 text-left text-primary-light",!u&&"hidden")},s("Shortcut")),r.createElement("div",{className:l()("flex flex-col w-32",u&&"mt-5")},r.createElement(pc,{disabled:t,keys:c.keys,modifierKeys:Xs,onChange:function(e){return p(o,sc(sc({},c),{},{keys:e}))},hotkeys:i,className:"text-lg h-8"}),f&&r.createElement("span",{className:"p-2 text-left text-red-600 text-sm"},f))))}))))}))))};dc.propTypes={onChange:o().func,disabled:o().bool,hotkeyDefinitions:o().object.isRequired,hotkeysModule:o().shape({initialize:o().func.isRequired,pause:o().func.isRequired,unpause:o().func.isRequired,startRecording:o().func.isRequired,record:o().func.isRequired}).isRequired},dc.defaultProps={onChange:function(){},disabled:!1};var fc=dc,mc=function(e){var t=e.disabled,n=e.keys,a=e.onChange,o=e.className,i=e.modifierKeys,s=e.hotkeys,c=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).join("+")}(n);return r.createElement(Jr,{readOnly:!0,disabled:t,value:c,onKeyDown:function(e){s.record((function(e){var t=function(e){var t=e.sequence,n=e.modifierKeys,r=t.join(" ").split("+"),a=[],o=[];return r.forEach((function(e){n&&n.includes(e)?o.push(e):a.push(e)})),[].concat(o,a)}({sequence:e,modifierKeys:i});s.unpause(),a(t)}))},onFocus:function(){s.pause(),s.startRecording()},className:o})};mc.propTypes={keys:o().array.isRequired,onChange:o().func.isRequired,className:o().string,modifierKeys:o().array,disabled:o().bool,hotkeys:o().shape({initialize:o().func.isRequired,pause:o().func.isRequired,unpause:o().func.isRequired,startRecording:o().func.isRequired,record:o().func.isRequired}).isRequired},mc.defaultProps={disabled:!1};var pc=mc;function yc(e){var t=e.children,n=e.menuOptions,a=e.isReturnEnabled,o=e.onClickReturnButton,i=e.isSticky,s=e.WhiteLabeling,c=(0,P.$G)("Header").t;return r.createElement(Ia,{className:"justify-between border-b-4 border-black",isSticky:i},r.createElement("div",{className:"flex justify-between flex-1"},r.createElement("div",{className:"flex items-center"},r.createElement("div",{className:l()("inline-flex items-center mr-3",a&&"cursor-pointer"),onClick:function(){a&&o&&o()}},a&&r.createElement(Pr,{name:"chevron-left",className:"w-8 text-primary-active"}),r.createElement("div",{className:"ml-4"},s?function(e){return s.createLogoComponentFn(e)}(r):r.createElement(Qo,{name:"logo-ohif"})))),r.createElement("div",{className:"flex items-center"},t),r.createElement("div",{className:"flex items-center"},r.createElement("span",{className:"mr-3 text-lg text-common-light"},c("INVESTIGATIONAL USE ONLY")),r.createElement(tn,{id:"options",showDropdownIcon:!1,list:n},r.createElement(Vr,{id:"options-settings-icon",variant:"text",color:"inherit",size:"initial",className:"text-primary-active"},r.createElement(Pr,{name:"settings"})),r.createElement(Vr,{id:"options-chevron-down-icon",variant:"text",color:"inherit",size:"initial",className:"text-primary-active"},r.createElement(Pr,{name:"chevron-down"}))))))}yc.propTypes={menuOptions:o().arrayOf(o().shape({title:o().string.isRequired,icon:o().string,onClick:o().func.isRequired})),children:o().oneOfType([o().node,o().func]),isReturnEnabled:o().bool,isSticky:o().bool,onClickReturnButton:o().func,WhiteLabeling:o().element},yc.defaultProps={isReturnEnabled:!0,isSticky:!1};var vc=yc,hc=function(e){var t=e.color;return r.createElement("div",{className:l()("mb-4 w-56 h-10 flex items-center justify-center flex-col text-white text-lg bg-".concat(t," py-8"))},r.createElement("p",null,"bg-",t))};hc.propTypes={color:o().string};var gc=function(e){e.content,e.contentProps,e.shouldCloseOnEsc,e.isOpen,e.closeButton,e.title,e.customClassName;return r.createElement(r.Fragment,null)};gc.defaultProps={content:null,contentProps:null,shouldCloseOnEsc:!0,isOpen:!0,closeButton:!0,title:null,customClassName:""},gc.propTypes={content:o().node,contentProps:o().object,shouldCloseOnEsc:o().bool,isOpen:o().bool,closeButton:o().bool,title:o().string,customClassName:o().string}},15066:function(e,t,n){"use strict";n(11602);var r=n(32735),a=n(60216),o=n.n(a),i=n(64838),s=n(91425),c=n(18989),l=n(10908),u=n(57842),d=n.n(u),f=n(38942),m=!1,p={order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"],htmlTag:document.documentElement},y={ar:"Arabic",am:"Amharic",bg:"Bulgarian",bn:"Bengali",ca:"Catalan",cs:"Czech",da:"Danish",de:"German",el:"Greek",en:"English","en-GB":"English (Great Britain)","en-US":"English (USA)",es:"Spanish",et:"Estonian",fa:"Persian",fi:"Finnish",fil:"Filipino",fr:"French",gu:"Gujarati",he:"Hebrew",hi:"Hindi",hr:"Croatian",hu:"Hungarian",id:"Indonesian",it:"Italian",ja:"Japanese","ja-JP":"Japanese (Japan)",kn:"Kannada",ko:"Korean",lt:"Lithuanian",lv:"Latvian",ml:"Malayalam",mr:"Marathi",ms:"Malay",nl:"Dutch",no:"Norwegian",pl:"Polish","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)",ro:"Romanian",ru:"Russian",sk:"Slovak",sl:"Slovenian",sr:"Serbian",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",zh:"Chinese","zh-CN":"Chinese (China)","zh-TW":"Chinese (Taiwan)","test-LNG":"Test Language"},v=function(e){return y[e]};var h={ar:{UserPreferencesModal:JSON.parse('{"No hotkeys found":"Nenhuma tecla de atalho está configurada para este aplicativo. As teclas de atalho podem ser configuradas no arquivo app-config.js do aplicativo."}')}},g={"en-US":{AboutModal:JSON.parse('{"Browser":"Browser","Build Number":"Build Number","Latest Master Commits":"Latest Master Commits","More details":"More details","Name":"Name","OHIF Viewer - About":"OHIF Viewer - About","OS":"OS","Report an issue":"Report an issue","Repository URL":"Repository URL","Value":"Value","Version Information":"Version Information","Visit the forum":"Visit the forum"}'),Buttons:JSON.parse('{"Acquired":"Acquired","Angle":"Angle","Axial":"Axial","Bidirectional":"Bidirectional","Brush":"Brush","CINE":"CINE","Cancel":"Cancel","Circle":"Circle","Clear":"Clear","Coronal":"Coronal","Crosshairs":"Crosshairs","Download":"Download","Ellipse":"Ellipse","Elliptical":"Elliptical","Flip H":"Flip H","Flip V":"Flip V","Freehand":"Freehand","Invert":"Invert","Layout":"$t(Common:Layout)","Length":"Length","Levels":"Levels","Magnify":"Magnify","Manual":"Manual","Measurements":"Measurements","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Pan","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Probe","ROI Window":"ROI Window","Rectangle":"Rectangle","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) to Defaults","Rotate Right":"Rotate Right","Sagittal":"Sagittal","Save":"Save","Stack Scroll":"Stack Scroll","Stop":"$t(Common:Stop)","Themes":"Themes","Zoom":"Zoom"}'),CineDialog:JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Skip to first $t(Common:Image)","Skip to last image":"Skip to last $t(Common:Image)","fps":"fps"}'),Common:JSON.parse('{"Close":"Close","Image":"Image","Layout":"Layout","Measurements":"Measurements","More":"More","Next":"Next","Play":"Play","Previous":"Previous","Reset":"Reset","RowsPerPage":"rows per page","Series":"Series","Show":"Show","Stop":"Stop","StudyDate":"Study Date"}'),DatePicker:JSON.parse('{"Clear dates":"Clear dates","End Date":"End Date","Start Date":"Start Date"}'),Header:JSON.parse('{"About":"About","Back to Viewer":"Back to Viewer","INVESTIGATIONAL USE ONLY":"INVESTIGATIONAL USE ONLY","Options":"Options","Preferences":"Preferences","Study list":"Study list"}'),MeasurementTable:JSON.parse('{"Criteria nonconformities":"Criteria nonconformities","Delete":"Delete","Description":"Description","MAX":"MAX","NonTargets":"NonTargets","Relabel":"Relabel","Targets":"Targets"}'),StudyList:JSON.parse('{"AccessionNumber":"Accession #","Empty":"Empty","MRN":"MRN","Modality":"Modality","PatientName":"Patient Name","StudyDate":"Study Date","StudyDescription":"Description","StudyList":"Study List"}'),UserPreferencesModal:JSON.parse('{"Cancel":"$t(Buttons:Cancel)","No hotkeys found":"No hotkeys are configured for this application. Hotkeys can be configured in the application\'s app-config.js file.","Reset to Defaults":"$t(Buttons:Reset to Defaults)","ResetDefaultMessage":"Preferences successfully reset to default. <br /> You must <strong>Save</strong> to perform this action.","Save":"$t(Buttons:Save)","SaveMessage":"Preferences saved","User Preferences":"User Preferences"}'),ViewportDownloadForm:JSON.parse('{"emptyFilenameError":"The file name cannot be empty.","fileType":"File Type","filename":"File Name","formTitle":"Please specify the dimensions, filename, and desired type for the output image.","imageHeight":"Image height (px)","imagePreview":"Image Preview","imageWidth":"Image width (px)","keepAspectRatio":"Keep aspect ratio","loadingPreview":"Loading Image Preview...","minHeightError":"The minimum valid height is 100px.","minWidthError":"The minimum valid width is 100px.","showAnnotations":"Show Annotations"}')}},b={es:{Buttons:JSON.parse('{"Acquired":"Adquirido","Angle":"Ángulo","Axial":"Axial","Bidirectional":"Bidireccional","Brush":"Cepillo","CINE":"CINE","Cancel":"Cancelar","Circle":"Círculo","Clear":"Limpiar","Coronal":"Coronal","Crosshairs":"Punto de mira","Download":"Descargar","Ellipse":"Elipse","Elliptical":"Elíptico","Flip H":"Voltear H","Flip V":"Voltear V","Freehand":"Mano alzada","Invert":"Negativo","Layout":"$t(Common:Layout)","Length":"Longitud","Levels":"W/L","Magnify":"Lupa","Manual":"Manual","Measurements":"Medidas","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Mover","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Probar","ROI Window":"Ventana ROI","Rectangle":"Rectángulo","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) por defecto","Rotate Right":"Girar ->","Sagittal":"Sagital","Save":"Guardar","Stack Scroll":"Scroll","Stop":"$t(Common:Stop)","Themes":"Temas","Zoom":"Ampliar"}'),CineDialog:JSON.parse('{"Next image":"$t(Common:Image) $t(Common:Next)","Play / Stop":"$t(Common:Play) / Stop","Previous image":"$t(Common:Image) $t(Common:Previous)","Skip to first image":"Ir a la primera $t(Common:Image)","Skip to last image":"Ir a la última $t(Common:Image)","fps":"imágenes/seg."}'),Common:JSON.parse('{"Image":"Imagen","Layout":"Formato","Measurements":"Medidas","More":"Más","Next":"Siguiente","Play":"Play","Previous":"Anterior","Reset":"Restaurar","RowsPerPage":"filas por página","Series":"Secuencia","Show":"Mostrar","Stop":"Detener","StudyDate":"Fecha de estudo"}'),Header:JSON.parse('{"About":"Acerca de","Back to Viewer":"Volver al visor","INVESTIGATIONAL USE ONLY":"SOLO USO PARA INVESTIGACIÓN","Options":"Opciones","Preferences":"Preferencias","Study list":"Lista de estudios"}'),MeasurementTable:JSON.parse('{"Criteria nonconformities":"Criterios disconformes","Delete":"Borrar","Description":"Descripción","MAX":"Máximo","NonTargets":"No objetivos","Relabel":"Re-etiquetar","Targets":"Objetivos","Export":"Exportar","Create Report":"Crear reporte"}'),StudyList:JSON.parse('{"AccessionNumber":"Número de Adhesión","Empty":"vacío","MRN":"MRN","Modality":"Modalidad","PatientName":"Nombre del paciente","StudyDate":"Fetcha de estudio","StudyDescription":"Descripción","StudyList":"Lista de Estudio"}'),UserPreferencesModal:JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Preferencias de Usuario"}')}},S={fr:{Buttons:JSON.parse('{"Acquired":"Acquis","Angle":"Angle","Axial":"Axial","Bidirectional":"Bi-directionel","Brush":"Brosse","CINE":"Ciné","Cancel":"Annuler","Circle":"Cercle","Clear":"Effacer","Coronal":"Coronal","Crosshairs":"Repère","Ellipse":"Ellipse","Elliptical":"Elliptique","Flip H":"Flip H","Flip V":"Flip V","Freehand":"Main levée","Invert":"Inverser","Layout":"$t(Common:Layout)","Length":"Longueur","Levels":"Niveaux","Magnify":"Agrandir","Manual":"Manuel","Measurements":"Mesures","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Déplacer","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Sonde","ROI Window":"ROI fenêtrage","Rectangle":"Rectangle","Reset":"$t(Common:Reset)","Reset to Defaults":"Valeurs d\'usine","Rotate Right":"Tourner à droite","Sagittal":"Sagittal","Save":"Sauvegarder","Stack Scroll":"Défilement","Stop":"$t(Common:Stop)","Themes":"Themes","Zoom":"Zoom"}'),CineDialog:JSON.parse('{"Next image":"$t(Common:Play) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Retour à la première $t(Common:Image)","Skip to last image":"Aller à la dernière $t(Common:Image)","fps":"ips"}'),Common:JSON.parse('{"Image":"Image","Layout":"Disposition","More":"Plus","Next":"Suivant","Play":"Play","Previous":"Précédent","Reset":"Reset","Stop":"Stop"}'),Header:JSON.parse('{"About":"A Propos","Back to Viewer":"Retour au viewer","INVESTIGATIONAL USE ONLY":"Seulement pour utilisation expérimentale","Options":"Options","Preferences":"Préférences","Study list":"Liste d\'études"}'),UserPreferencesModal:JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Préférences utilisateur"}')}},w={"ja-JP":{Buttons:JSON.parse('{"Acquired":"取得済","Angle":"分度器","Axial":"アキシャル","Bidirectional":"両方向","Brush":"ブラシ","CINE":"シネ","Cancel":"キャンセル","Circle":"サークル","Clear":"クリア","Coronal":"コロナル","Crosshairs":"クロスヘアー","Ellipse":"楕円","Elliptical":"楕円","Flip H":"左右反転","Flip V":"上下反転","Freehand":"フリーハンド","Invert":"反転","Layout":"$t(Common:Layout)","Length":"長さ","Levels":"レベル","Magnify":"拡大","Manual":"マニュアル","Measurements":"測定","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"パン","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"プローブ","ROI Window":"ROIウィンドウ","Rectangle":"長方形","Reset":"$t(Common:Reset)","Reset to Defaults":"デフォルトへ$t(Common:Reset)","Rotate Right":"右に回転","Sagittal":"サジタル","Save":"保存","Stack Scroll":"スタックスクロール","Stop":"$t(Common:Stop)","Themes":"テーマ","Zoom":"ズーム"}'),CineDialog:JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"$t(Common:Image)最初にスキップ","Skip to last image":"$t(Common:Image)最後にスキップ","fps":"fps"}'),Common:JSON.parse('{"Image":"画像","Layout":"レイアウト","More":"もっと","Next":"次へ","Play":"プレイ","Previous":"前へ","Reset":"リセット","Stop":"ストップ"}'),Header:JSON.parse('{"About":"につい","Back to Viewer":"前のビュー","INVESTIGATIONAL USE ONLY":"調査用のみ","Options":"オプション","Preferences":"プレファレンス","Study list":"スタディリスト"}'),UserPreferencesModal:JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"ユーザプレファレンス"}')}},E={nl:{Buttons:JSON.parse('{"Circle":"Cirkel","More":"Meer","Pan":"Pan","Zoom":"Inzoomen"}'),Common:{More:"Meer"},Header:JSON.parse('{"About":"Over","INVESTIGATIONAL USE ONLY":"ALLEEN VOOR ONDERZOEK","Options":"Opties","Preferences":"Voorkeuren","Study list":"Studie Overzicht"}')}},I={"pt-BR":{AboutModal:JSON.parse('{"Browser":"Navegador","Build Number":"Número da compilação","Latest Master Commits":"Últimos Commits na Master","More details":"Mais detalhes","Name":"Nome","OHIF Viewer - About":"OHIF Viewer - Sobre","OS":"SO","Report an issue":"Informar um problema","Repository URL":"URL do Repositório","Value":"Valor","Version Information":"Informação da Versão","Visit the forum":"Visite o fórum"}'),Buttons:JSON.parse('{"Acquired":"Adquirido","Angle":"Ângulo","Axial":"Axial","Bidirectional":"Bidirecional","Brush":"Pincel","CINE":"CINE","Cancel":"Cancelar","Circle":"Círculo","Clear":"Limpar","Coronal":"Coronal","Crosshairs":"Localizador","Download":"Baixar","Ellipse":"Elipse","Elliptical":"Elíptico","Flip H":"Inverter H","Flip V":"Inverter V","Freehand":"Desenho livre","Invert":"Inverter","Layout":"Layout","Length":"Tamanho","Levels":"Níveis","Magnify":"Ampliar","Manual":"Manual","Measurements":"Medidas","More":"Mais","Next":"Próximo","Pan":"Arrastar","Play":"Tocar","Previous":"Anterior","Probe":"Prova","ROI Window":"Janela ROI","Rectangle":"Retângulo","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) para o Padrão","Rotate Right":"Girar à direita","Sagittal":"Sagital","Save":"Salvar","Stack Scroll":"Navegar Stacks","Stop":"Parar","Themes":"Temas","Zoom":"Zoom"}'),CineDialog:JSON.parse('{"Next image":"Próxima imagem","Play / Stop":"Tocar / Parar","Previous image":"Imagem Anterior","Skip to first image":"Pular para a primeira imagem","Skip to last image":"Pular para a última imagem","fps":"fps"}'),Common:JSON.parse('{"Close":"Fechar","Image":"Imagem","Layout":"Layout","More":"Mais","Next":"Próximo","Play":"Play","Previous":"Anterior","Reset":"Restaurar","Stop":"Stop"}'),DatePicker:JSON.parse('{"Clear dates":"Limpar datas","End Date":"Data Final","Start Date":"Data Inicial"}'),Header:JSON.parse('{"About":"Quem somos","Back to Viewer":"Voltar para o Viewer","INVESTIGATIONAL USE ONLY":"APENAS PARA USO INVESTIGATIVO","Options":"Opções","Preferences":"Preferências","Study list":"Lista de estudos"}'),UserPreferencesModal:JSON.parse('{"Cancel":"Cancelar","Reset to Defaults":"$t(Common:Reset) para Padrão","ResetDefaultMessage":"Preferências resetadas com sucesso. <br /> Você deve <strong>Salvar</strong> para que essa ação seja realizada.","Save":"Salvar","SaveMessage":"Preferências salvas","User Preferences":"Preferências do Usuário"}'),MeasurementTable:JSON.parse('{"Export":"Exportar","Create Report":"Criar relatório"}')}},O={vi:{Buttons:JSON.parse('{"Acquired":"Đã lấy","Angle":"Góc","Axial":"Trục","Bidirectional":"Hai hướng","Brush":"Bút lông","CINE":"Duyệt tự động","Cancel":"Hủy bỏ","Circle":"Vòng tròn","Clear":"Xóa","Coronal":"Mặt phẳng vành","Crosshairs":"Vị trí tương quan","Ellipse":"Đo Elip","Elliptical":"Elip","Flip H":"Lật ngang","Flip V":"Lật dọc","Freehand":"Bằng tay","Invert":"Ảnh dương bản","Layout":"$t(Common:Layout)","Length":"Thước đo chiều dài","Levels":"Độ sáng","Magnify":"Phóng đại một phần","Manual":"Thủ công","Measurements":"Đo lường","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Di chuyển","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Thông tin điểm ảnh","ROI Window":"ROI Window","Rectangle":"Đo chữ nhật","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) đến mặc định","Rotate Right":"Xoay phải","Sagittal":"Mặt phẳng đứng dọc","Save":"Lưu","Stack Scroll":"Duyệt","Stop":"$t(Common:Stop)","Themes":"Giao diện","Zoom":"Thu phóng"}'),CineDialog:JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Bỏ qua đến đầu $t(Common:Image)","Skip to last image":"Bỏ qua đến cuối $t(Common:Image)","fps":"fps"}'),Common:JSON.parse('{"Image":"Ảnh","Layout":"Cách bố trí","Measurements":"Đo lường","More":"Thêm","Next":"Tiếp theo","Play":"Phát","Previous":"Về sau","Reset":"Đặt lại","RowsPerPage":"trên 1 trang","Series":"Tập ảnh","Show":"Hiển thị","Stop":"Dừng","StudyDate":"Ngày chụp"}'),Header:JSON.parse('{"About":"Về chúng tôi","Back to Viewer":"Ảnh vừa xem","INVESTIGATIONAL USE ONLY":"Chỉ dùng cho nghiên cứu","Options":"Lựa chọn","Preferences":"Thiết lập","Study list":"Danh sách"}'),StudyList:JSON.parse('{"AccessionNumber":"Mã phiểu","Empty":"Rỗng","MRN":"Mã Bệnh nhân","Modality":"Thiết bị","PatientName":"Tên Bệnh nhân","StudyDate":"Ngày chụp","StudyDescription":"Diễn giải","StudyList":"Danh sách"}'),UserPreferencesModal:JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Thiết lập theo người dùng"}')}},D={zh:{Buttons:JSON.parse('{"Acquired":"已获取","Angle":"角度","Axial":"轴状面","Bidirectional":"双向","Brush":"橡皮擦","CINE":"播放动画","Cancel":"取消","Circle":"圆","Clear":"清除","Coronal":"冠状面","Crosshairs":"十字线","Ellipse":"椭圆","Elliptical":"椭圆的","Flip H":"左右翻转","Flip V":"上下翻转","Freehand":"自由画线","Invert":"灰度反转","Layout":"显示窗口","Length":"长度","Levels":"层级","Magnify":"放大镜","Manual":"手动","Measurements":"测量","More":"更多","Next":"下一个","Pan":"移动","Play":"播放","Previous":"上一个","Probe":"探针","ROI Window":"选择对比度","Rectangle":"矩形","Reset":"复原","Reset to Defaults":"返回默认","Rotate Right":"顺时针旋转","Sagittal":"矢状面","Save":"保存","Stack Scroll":"滑动切换图层","Stop":"停止","Themes":"主题","Zoom":"放大"}'),CineDialog:JSON.parse('{"Next image":"下一个图像","Play / Stop":"播放/停止","Previous image":"上一个图像","Skip to first image":"跳转到第一个图像","Skip to last image":"跳转到最后一个图像","fps":"帧率"}'),Common:JSON.parse('{"Image":"图像","Layout":"显示窗口","Measurements":"测量值","More":"更多","Next":"下一个","Play":"播放","Previous":"上一个","Reset":"复原","RowsPerPage":"每页条数","Series":"序列","Show":"显示","Stop":"停止","StudyDate":"时间"}'),Header:JSON.parse('{"About":"关于","Back to Viewer":"返回视图","INVESTIGATIONAL USE ONLY":"研究用途","Options":"选项","Preferences":"偏好","Study list":"研究列表"}'),MeasurementTable:JSON.parse('{"Criteria nonconformities":"不合标准","Delete":"删除","Description":"描述","MAX":"最大","NonTargets":"非靶向","Relabel":"重新标记","Targets":"靶向"}'),StudyList:JSON.parse('{"Empty":"无","Modality":"成像设备","PatientName":"患者姓名","StudyDate":"检查日期","StudyDescription":"描述","StudyList":"检查列表"}'),UserPreferencesModal:JSON.parse('{"Cancel":"取消","Reset to Defaults":"返回默认","Save":"保存","User Preferences":"用户偏好"}')}},x=JSON.parse('{"Browser":"Browser","Build Number":"Build Number","Latest Master Commits":"Latest Master Commits","More details":"More details","Name":"Name","OHIF Viewer - About":"OHIF Viewer - About","OS":"OS","Report an issue":"Report an issue","Repository URL":"Repository URL","Value":"Value","Version Information":"Version Information","Visit the forum":"Visit the forum"}'),k=JSON.parse('{"Acquired":"Test Acquired","Angle":"Test Angle","Axial":"Test Axial","Bidirectional":"Test Bidirectional","Brush":"Test Brush","CINE":"Test CINE","Cancel":"Test Cancel","Circle":"Test Circle","Clear":"Test Clear","Coronal":"Test Coronal","Crosshairs":"Test Crosshairs","Download":"Test Download","Ellipse":"Test Ellipse","Elliptical":"Test Elliptical","Flip H":"Test Flip H","Flip V":"Test Flip V","Freehand":"Test Freehand","Invert":"Test Invert","Layout":"Test $t(Common:Layout)","Length":"Test Length","Levels":"Test Levels","Magnify":"Test Magnify","Manual":"Test Manual","Measurements":"Test Measurements","More":"Test $t(Common:More)","Next":"Test $t(Common:Next)","Pan":"Test Pan","Play":"Test $t(Common:Play)","Previous":"Test $t(Common:Previous)","Probe":"Test Probe","ROI Window":"Test ROI Window","Rectangle":"Test Rectangle","Reset":"Test $t(Common:Reset)","Reset to Defaults":"Test $t(Common:Reset) to Defaults","Rotate Right":"Test Rotate Right","Sagittal":"Test Sagittal","Save":"Test Save","Stack Scroll":"Test Stack Scroll","Stop":"Test $t(Common:Stop)","Themes":"Test Themes","Zoom":"Test Zoom","Grid Layout":"Test Grid Layout","W/L Presets":"Test W/L Presets","More Measure Tools":"Test More Measure Tools","More Tools":"Test More Tools","Capture":"Test Capture","Annotation":"Test Annotation","Soft Tissue":"Test Soft Tissue","Lung":"Test Lung","Liver":"Test Liver","Bone":"Test Bone","Cine":"Test Cine"}'),P=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Skip to first $t(Common:Image)","Skip to last image":"Skip to last $t(Common:Image)","fps":"fps"}'),C=JSON.parse('{"Close":"Test Close","Image":"Test Image","Layout":"Test Layout","Measurements":"Test Measurements","More":"Test More","Next":"Test Next","Play":"Test Play","Previous":"Test Previous","Reset":"Test Reset","RowsPerPage":"Test rows per page","Series":"Test Series","Show":"Test Show","Stop":"Test Stop","StudyDate":"Test Study Date"}'),T=JSON.parse('{"Clear dates":"Clear dates","End Date":"End Date","Start Date":"Start Date"}'),N=JSON.parse('{"About":"Test About","INVESTIGATIONAL USE ONLY":"Test Investigational","Options":"Test Options","Preferences":"Test Preferences"}'),R=JSON.parse('{"Measurements":"Test Measurements","No tracked measurements":"Test No tracked measurements","Create Report":"Test Create Report","Export":"Test Export","Delete":"Delete","Description":"Description","MAX":"MAX","NonTargets":"NonTargets","Relabel":"Relabel","Targets":"Targets"}'),M=JSON.parse('{"AccessionNumber":"Test Accession #","Accession":"Test Accession","Next >":"Test Next >","< Previous":"Test < Previous","Results per page":"Test Results per page","Empty":"Test Empty","MRN":"Test MRN","Modality":"Test Modality","PatientName":"Test PatientName","Patient Name":"Test Patient Name","Description":"Test Description","StudyDate":"Test Study Date","Study date":"Test Study Date","Studies":"Test Studies","Series":"Test Series","Instances":"Test Instances","Study List":"Test Study List","Study list":"Test Study list","Filter list to 100 studies or less to enable sorting":"Test Filter list to 100 studies or less to enable sorting"}'),A=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","No hotkeys found":"No hotkeys are configured for this application. Hotkeys can be configured in the application\'s app-config.js file.","Reset to Defaults":"$t(Buttons:Reset to Defaults)","ResetDefaultMessage":"Preferences successfully reset to default. <br /> You must <strong>Save</strong> to perform this action.","Save":"$t(Buttons:Save)","SaveMessage":"Test Preferences saved","User Preferences":"Test User Preferences","Function":"Test function","Shortcut":"Test shortcut","Language":"Test language","Hotkeys":"Test hotkeys","General":"Test general"}'),j=JSON.parse('{"emptyFilenameError":"The file name cannot be empty.","fileType":"File Type","filename":"File Name","formTitle":"Please specify the dimensions, filename, and desired type for the output image.","imageHeight":"Image height (px)","imagePreview":"Image Preview","imageWidth":"Image width (px)","keepAspectRatio":"Keep aspect ratio","loadingPreview":"Loading Image Preview...","minHeightError":"The minimum valid height is 100px.","minWidthError":"The minimum valid width is 100px.","showAnnotations":"Show Annotations"}'),U=JSON.parse('{"Primary":"Test Primary","Recent":"Test Recent","All":"Test All"}'),L=JSON.parse('{"Studies":"Test Studies","Measurements":"Test Measurements"}'),_={"test-LNG":{AboutModal:x,Buttons:k,CineDialog:P,Common:C,DatePicker:T,Header:N,MeasurementTable:R,StudyList:M,UserPreferencesModal:A,ViewportDownloadForm:j,ToolTip:{Zoom:"toolTip1"},StudyBrowser:U,PatientInfo:JSON.parse('{"Age":"Test Age","Sex":"Test Sex","MRN":"Test MRN","Thickness":"Test Thickness","Spacing":"Test Spacing","Scanner":"Test Scanner"}'),Modes:JSON.parse('{"Basic Viewer":"Test Basic Viewer"}'),SidePanel:L,Modals:JSON.parse('{"Download High Quality Image":"Test Download High Quality Image","Cancel":"Test Cancel","Download":"Test Download","File Name":"Test File Name","Active viewport has no displayed image":"Test Active viewport has no displayed image","Image preview":"Test Image preview","Show Annotations":"Test Show Annotations","File Type":"Test File Type","Image height (px)":"Test Image height (px)","Image width (px)":"Test Image width (px)","Please specify the dimensions, filename, and desired type for the output image.":"Test Please specify the dimensions, filename, and desired type for the output image."}')}};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=q(q(q(q(q(q(q(q(q(q({},h),g),b),S),w),E),I),O),D),_);function z(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z(o,r,a,i,s,"next",e)}function s(e){z(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={projectId:"",apiKey:"",referenceLng:"en-US",fallbacklng:"en-US"},G="en-US";function J(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(n?i.Z.use(s.Z).use(c.Z).use(l.Z).use(d()).use(f.Db).init({fallbackLng:G,saveMissing:r,debug:m,keySeparator:!1,interpolation:{escapeValue:!1},detection:t,backend:Y,locizeLastUsed:Y,editor:W(W({},Y),{},{onEditorSaved:(e=H(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.reloadResources(t,n);case 2:i.Z.emit("editorSaved");case 3:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),react:{useSuspense:!1,wait:!0,bindI18n:"languageChanged editorSaved"}}):i.Z.use(d()).use(f.Db).init({fallbackLng:G,resources:B,debug:m,keySeparator:!1,interpolation:{escapeValue:!1},detection:t,react:{wait:!0}})).then((function(e){i.Z.T=e}))}"version ".concat("0.52.8"," loaded."),i.Z.initializing=J(),i.Z.initI18n=J,i.Z.addLocales=function(e){"Adding locales ".concat(e);var t=[];Object.keys(e).map((function(n){Object.keys(e[n]).map((function(r){var a=e[n][r];t.push({key:n,namespace:r,locale:a}),i.Z.addResourceBundle(n,r,a,!0,!0)}))}))},i.Z.availableLanguages=function(e){var t=[];return Object.keys(e).forEach((function(e){t.push({value:e,label:v(e)||e})})),t}(B),i.Z.defaultLanguage={label:v(G),value:G},i.Z.currentLanguage=function(){return{label:v(i.Z.language),value:i.Z.language}};var K=i.Z,X=n(31602);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e){var t=e.components,n=void 0===t?[]:t,a=e.children;return r.createElement(r.Fragment,null,n.reduceRight((function(e,t){var n=Q(Array.isArray(t)?[t[0],t[1]]:[t,{}],2),a=n[0],o=n[1];return r.createElement(a,o,e)}),a))}te.propTypes={components:o().array,children:o().node.isRequired};var ne=n(52938);function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=(0,r.createContext)(null),ie=oe.Provider,se=function(){return(0,r.useContext)(oe)};function ce(e){var t=e.children,n=e.value,a=re((0,r.useState)(n),2),o=a[0];a[1];return r.createElement(ie,{value:[o]},t)}ce.propTypes={children:o().any,value:o().any};var le=n(96740),ue=n(4676),de=["children"];function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function me(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){me(o,r,a,i,s,"next",e)}function s(e){me(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ge(e){var t=e.children,n=he(e,de),a=(0,le.UO)(),o=(0,le.TH)(),i=sr.modules[ue.Z.DATA_SOURCE].reduce((function(e,t){var n=[];return t.module.forEach((function(e){"webApi"===e.type&&n.push(e)})),e.concat(n)}),[])[0].name,s=sr.getDataSources(i)[0],c=101,l=ye((0,r.useState)({studies:[],total:0,resultsPerPage:25,pageNumber:1,location:"Not a valid location, causes first load to occur"}),2),u=l[0],d=l[1],f=ye((0,r.useState)(!1),2),m=f[0],p=f[1];return(0,r.useEffect)((function(){var e=function(e,t){var n=o((e=new URLSearchParams(e)).get("pageNumber"),1),r=o(e.get("resultsPerPage"),25),a={patientId:e.get("mrn"),patientName:e.get("patientName"),studyDescription:e.get("description"),modalitiesInStudy:e.get("modalities")&&e.get("modalities").split(","),accessionNumber:e.get("accession"),startDate:e.get("startDate"),endDate:e.get("endDate"),page:o(e.get("page"),void 0),pageNumber:n,resultsPerPage:r,sortBy:e.get("sortBy"),sortDirection:e.get("sortDirection"),offset:Math.floor(n*r/t)*(t-1)};return Object.keys(a).forEach((function(e){return null==a[e]&&delete a[e]})),a;function o(e,t){var n=t;return null!==e&&e.length>0&&(isNaN(e)||(n=parseInt(e))),n}}(o.search,c);function t(){return(t=pe(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,s.query.studies.search(e);case 3:n=t.sent,d({studies:n||[],total:n.length,resultsPerPage:e.resultsPerPage,pageNumber:e.pageNumber,location:o}),p(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}try{var n=u.pageNumber===e.pageNumber,r=100*Math.floor(u.pageNumber*u.resultsPerPage/c),a=100*Math.floor(e.pageNumber*e.resultsPerPage/c),i=u.location!==o;(!n||!m&&(a!==r||i))&&function(){t.apply(this,arguments)}()}catch(e){console.warn(e)}}),[u,o,a,m,p]),r.createElement(t,fe({},n,{data:u.studies,dataTotal:u.total,dataSource:s,isLoadingData:m}))}ge.propTypes={children:o().oneOfType([o().element,o().func]).isRequired};var be=ge;var Se=n(40841),we=n.n(Se),Ee=n(53806),Ie=n.n(Ee),Oe=n(72124),De=n(68652),xe=n.n(De),ke=[{name:"patientName",displayName:"Patient Name",inputType:"Text",isSortable:!0,gridCol:4},{name:"mrn",displayName:"MRN",inputType:"Text",isSortable:!0,gridCol:3},{name:"studyDate",displayName:"Study date",inputType:"DateRange",isSortable:!0,gridCol:5},{name:"description",displayName:"Description",inputType:"Text",isSortable:!0,gridCol:4},{name:"modalities",displayName:"Modality",inputType:"MultiSelect",inputProps:{options:[{value:"AR",label:"AR"},{value:"ASMT",label:"ASMT"},{value:"AU",label:"AU"},{value:"BDUS",label:"BDUS"},{value:"BI",label:"BI"},{value:"BMD",label:"BMD"},{value:"CR",label:"CR"},{value:"CT",label:"CT"},{value:"CTPROTOCOL",label:"CTPROTOCOL"},{value:"DG",label:"DG"},{value:"DOC",label:"DOC"},{value:"DX",label:"DX"},{value:"ECG",label:"ECG"},{value:"EPS",label:"EPS"},{value:"ES",label:"ES"},{value:"FID",label:"FID"},{value:"GM",label:"GM"},{value:"HC",label:"HC"},{value:"HD",label:"HD"},{value:"IO",label:"IO"},{value:"IOL",label:"IOL"},{value:"IVOCT",label:"IVOCT"},{value:"IVUS",label:"IVUS"},{value:"KER",label:"KER"},{value:"KO",label:"KO"},{value:"LEN",label:"LEN"},{value:"LS",label:"LS"},{value:"MG",label:"MG"},{value:"MR",label:"MR"},{value:"M3D",label:"M3D"},{value:"NM",label:"NM"},{value:"OAM",label:"OAM"},{value:"OCT",label:"OCT"},{value:"OP",label:"OP"},{value:"OPM",label:"OPM"},{value:"OPT",label:"OPT"},{value:"OPTBSV",label:"OPTBSV"},{value:"OPTENF",label:"OPTENF"},{value:"OPV",label:"OPV"},{value:"OSS",label:"OSS"},{value:"OT",label:"OT"},{value:"PLAN",label:"PLAN"},{value:"PR",label:"PR"},{value:"PT",label:"PT"},{value:"PX",label:"PX"},{value:"REG",label:"REG"},{value:"RESP",label:"RESP"},{value:"RF",label:"RF"},{value:"RG",label:"RG"},{value:"RTDOSE",label:"RTDOSE"},{value:"RTIMAGE",label:"RTIMAGE"},{value:"RTINTENT",label:"RTINTENT"},{value:"RTPLAN",label:"RTPLAN"},{value:"RTRAD",label:"RTRAD"},{value:"RTRECORD",label:"RTRECORD"},{value:"RTSEGANN",label:"RTSEGANN"},{value:"RTSTRUCT",label:"RTSTRUCT"},{value:"RWV",label:"RWV"},{value:"SEG",label:"SEG"},{value:"SM",label:"SM"},{value:"SMR",label:"SMR"},{value:"SR",label:"SR"},{value:"SRF",label:"SRF"},{value:"STAIN",label:"STAIN"},{value:"TEXTUREMAP",label:"TEXTUREMAP"},{value:"TG",label:"TG"},{value:"US",label:"US"},{value:"VA",label:"VA"},{value:"XA",label:"XA"},{value:"XC",label:"XC"}]},isSortable:!0,gridCol:3},{name:"accession",displayName:"Accession",inputType:"Text",isSortable:!0,gridCol:3},{name:"instances",displayName:"Instances",inputType:"None",isSortable:!1,gridCol:2}];function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){var n=Pe((0,r.useState)(e),2),a=n[0],o=n[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}function Ne(){return new URLSearchParams((0,le.TH)().search)}var Re=n(39016),Me=n(98526);function Ae(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=Me.ZP.sortBySeriesDate,ze=K.availableLanguages,He=K.defaultLanguage,Ze=K.currentLanguage,We=new Map;function $e(e){var t=e.data,n=e.dataTotal,a=e.isLoadingData,o=e.dataSource,i=e.hotkeysManager,s=i.hotkeyDefinitions,c=i.hotkeyDefaults,l=(0,ne.dd)(),u=l.show,d=l.hide,m=(0,f.$G)().t,p=Ve(se(),1)[0],y=Ne(),v=(0,le.s0)(),h=function(e){var t={patientName:e.get("patientName"),mrn:e.get("mrn"),studyDate:{startDate:e.get("startDate"),endDate:e.get("endDate")},description:e.get("description"),modalities:e.get("modalities")?e.get("modalities").split(","):[],accession:e.get("accession"),sortBy:e.get("sortBy"),sortDirection:e.get("sortDirection"),pageNumber:Ge(e.get("pageNumber"),void 0),resultsPerPage:Ge(e.get("resultsPerPage"),void 0)};return Object.keys(t).forEach((function(e){return null==t[e]&&delete t[e]})),t}(y),g=Ve((0,r.useState)(Le(Le({},Ye),h)),2),b=g[0],S=g[1],w=Te(b,200),E=b.resultsPerPage,I=b.pageNumber,O=b.sortBy,D=b.sortDirection,x=n<101,k=""===O||!O,P="descending"===D?1:-1,C=k&&x?{sortBy:"studyDate",sortDirection:"ascending"}:{},T=t;x&&t.sort((function(e,t){if(k){return Je(e,t,-1)}var n=e[O],r=t[O];return"string"==typeof n&&"string"==typeof r?n.localeCompare(r)*P:"number"==typeof n&&"number"==typeof r?(n>r?1:-1)*P:!n&&r?-1*P:!r&&n?1*P:"studyDate"===O?Je(e,t,P):0}));var N=Ve((0,r.useState)([]),2),R=N[0],M=N[1],A=Ve((0,r.useState)([]),2),j=A[0],U=A[1],L=n,_=function(e){b.pageNumber===e.pageNumber&&(e.pageNumber=1),S(e),M([])};(0,r.useEffect)((function(){return document.body.classList.add("bg-black"),function(){document.body.classList.remove("bg-black")}}),[]),(0,r.useEffect)((function(){if(w){var e={};Object.keys(Ye).forEach((function(t){var n=Ye[t],r=w[t];"studyDate"===t?(r.startDate&&n.startDate!==r.startDate&&(e.startDate=r.startDate),r.endDate&&n.endDate!==r.endDate&&(e.endDate=r.endDate)):"modalities"===t&&r.length?e.modalities=r.join(","):r!==n&&(e[t]=r)}));var t=Oe.stringify(e,{skipNull:!0,skipEmptyString:!0});v({pathname:"/",search:t?"?".concat(t):void 0})}}),[w]),(0,r.useEffect)((function(){for(var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.query.series.search(t);case 3:n=e.sent,We.set(t,Be(n)),U([].concat(Ae(j),[t])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){je(o,r,a,i,s,"next",e)}function s(e){je(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),t=0;t<R.length;t++){var n=R[t]-1,r=T[n].studyInstanceUid;j.includes(r)||e(r)}}),[R,t]);var V=Math.floor(101/E),q=E*((I-1)%V),F=q+E,B=T.map((function(e,t){var n=t+1,a=R.some((function(e){return e===n})),o=e.studyInstanceUid,i=e.accession,s=e.modalities,c=e.instances,l=e.description,u=e.mrn,d=e.patientName,f=e.date,y=e.time,v=f&&Ie()(f,["YYYYMMDD","YYYY.MM.DD"],!0).isValid()&&Ie()(f,["YYYYMMDD","YYYY.MM.DD"]).format("MMM-DD-YYYY"),h=y&&Ie()(y,["HH","HHmm","HHmmss","HHmmss.SSS"]).isValid()&&Ie()(y,["HH","HHmm","HHmmss","HHmmss.SSS"]).format("hh:mm A");return{row:[{key:"patientName",content:d?r.createElement(ne.Zt,null,d):r.createElement("span",{className:"text-gray-700"},"(Empty)"),gridCol:4},{key:"mrn",content:r.createElement(ne.Zt,null,u),gridCol:3},{key:"studyDate",content:r.createElement(r.Fragment,null,v&&r.createElement("span",{className:"mr-4"},v),h&&r.createElement("span",null,h)),title:"".concat(v||""," ").concat(h||""),gridCol:5},{key:"description",content:r.createElement(ne.Zt,null,l),gridCol:4},{key:"modality",content:s,title:s,gridCol:3},{key:"accession",content:r.createElement(ne.Zt,null,i),gridCol:3},{key:"instances",content:r.createElement(r.Fragment,null,r.createElement(ne.JO,{name:"group-layers",className:we()("inline-flex mr-2 w-4",{"text-primary-active":a,"text-secondary-light":!a})}),c),title:(c||0).toString(),gridCol:4}],expandedContent:r.createElement(ne.Oh,{seriesTableColumns:{description:"Description",seriesNumber:"Series",modality:"Modality",instances:"Instances"},seriesTableDataSource:We.has(o)?We.get(o).map((function(e){return{description:e.description||"(empty)",seriesNumber:e.seriesNumber||"",modality:e.modality||"",instances:e.numSeriesInstances||""}})):[]},p.modes.map((function(e,t){var n=0===t,a=e.isValidMode({modalities:s});return r.createElement(X.rU,{key:t,to:"".concat(e.id,"?StudyInstanceUIDs=").concat(o)},r.createElement(ne.zx,{rounded:"full",variant:a?"contained":"disabled",disabled:!a,endIcon:r.createElement(ne.JO,{name:"launch-arrow"}),className:we()("font-bold",{"ml-2":!n}),onClick:function(){}},m("Modes:".concat(e.displayName))))}))),onClickRow:function(){return M((function(e){return a?e.filter((function(e){return n!==e})):[].concat(Ae(e),[n])}))},isExpanded:a}})),z=L>0,H=[{title:m("Header:About"),icon:"info",onClick:function(){return u({content:ne.tk,title:"About OHIF Viewer",contentProps:{versionNumber:"3.0.8",buildNumber:"0"}})}},{title:m("Header:Preferences"),icon:"settings",onClick:function(){return u({title:m("UserPreferencesModal:User Preferences"),content:ne.i1,contentProps:{hotkeyDefaults:i.getValidHotkeyDefinitions(c),hotkeyDefinitions:s,onCancel:d,currentLanguage:Ze(),availableLanguages:ze,defaultLanguage:He,onSubmit:function(e){K.changeLanguage(e.language.value),i.setHotkeys(e.hotkeyDefinitions),d()},onReset:function(){return i.restoreDefaultBindings()},hotkeysModule:Re.dD}})}}];return r.createElement("div",{className:we()("bg-black h-full",{"h-screen":!z})},r.createElement(ne.h4,{isSticky:!0,menuOptions:H,isReturnEnabled:!1,WhiteLabeling:p.whiteLabeling}),r.createElement(ne.oW,{numOfStudies:I*E>100?101:L,filtersMeta:ke,filterValues:Le(Le({},b),C),onChange:_,clearFilters:function(){return _(Ye)},isFiltering:function(e,t){return!xe()(e,t)}(b,Ye)}),z?r.createElement(r.Fragment,null,r.createElement(ne.X7,{tableDataSource:B.slice(q,F),numOfStudies:L,filtersMeta:ke}),r.createElement(ne.SI,{onChangePage:function(e){var t=b.pageNumber,n=t%Math.floor(101/b.resultsPerPage),r=e>t,a=Math.max(n,1)*E<L;r&&!a||_(Le(Le({},b),{},{pageNumber:e}))},onChangePerPage:function(e){_(Le(Le({},b),{},{pageNumber:1,resultsPerPage:Number(e)}))},currentPage:I,perPage:E})):r.createElement("div",{className:"flex flex-col items-center justify-center pt-48"},r.createElement(ne.kL,{isLoading:a})))}$e.propTypes={data:o().array.isRequired,dataSource:o().shape({query:o().object.isRequired}).isRequired,isLoadingData:o().bool.isRequired};var Ye={patientName:"",mrn:"",studyDate:{startDate:null,endDate:null},description:"",modalities:[],accession:"",sortBy:"",sortDirection:"none",pageNumber:1,resultsPerPage:25};function Ge(e,t){var n=t;return null!==e&&e.length>0&&(isNaN(e)||(n=parseInt(e))),n}function Je(e,t,n){var r=Ie()(e.date,["YYYYMMDD","YYYY.MM.DD"],!0),a=Ie()(t.date,["YYYYMMDD","YYYY.MM.DD"],!0);return r.isValid()&&a.isValid()?(r.toISOString()>a.toISOString()?1:-1)*n:r.isValid()?n:a.isValid()?-1*n:void 0}var Ke=$e,Xe=n(7439),Qe=n(60952),et=n.n(Qe);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="fileType")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"loadFile",value:function(e,t){}},{key:"getDataset",value:function(e,t){}},{key:"getStudies",value:function(e,t){}}])&&tt(t.prototype,n),r&&tt(t,r),e}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?lt(e):t}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(o,e);var t,n,r,a=st(o);function o(){var e;at(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dt(lt(e=a.call.apply(a,[this].concat(n))),"fileType","application/pdf"),e}return t=o,(n=[{key:"loadFile",value:function(e,t){return et().wadouri.loadFileRequest(t)}},{key:"getDataset",value:function(e,t){var n={};return n.imageId=e.imageId||t,n}}])&&ot(t.prototype,n),r&&ot(t,r),o}(nt)),mt=n(22737);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wt(e);if(t){var a=wt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?St(e):t}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var It=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(o,e);var t,n,r,a=gt(o);function o(){var e;yt(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Et(St(e=a.call.apply(a,[this].concat(n))),"fileType","application/dicom"),e}return t=o,(n=[{key:"loadFile",value:function(e,t){return et().wadouri.loadFileRequest(t)}},{key:"getDataset",value:function(e,t){var n=mt.ZP.data.DicomMessage.readFile(e),r=mt.ZP.data.DicomMetaDictionary.naturalizeDataset(n.dict);return r.url=t,r._meta=mt.ZP.data.DicomMetaDictionary.namifyDataset(n.meta),r}}])&&vt(t.prototype,n),r&&vt(t,r),o}(nt));function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var a=Tt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?Ct(e):t}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(o,e);var t,n,r,a=kt(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Nt(Ct(t=a.call(this)),"fileType",void 0),Nt(Ct(t),"loader",void 0);var n=e&&e.type;return t.loader=t.getLoader(n),t.fileType=t.loader.fileType,t}return t=o,(n=[{key:"addFile",value:function(e){return et().wadouri.fileManager.add(e)}},{key:"loadFile",value:function(e,t){return this.loader.loadFile(e,t)}},{key:"getDataset",value:function(e,t){return this.loader.getDataset(e,t)}},{key:"getLoader",value:function(e){return"application/pdf"===e?ft:It}}])&&Dt(t.prototype,n),r&&Dt(t,r),o}(nt),Mt=n(53281);function At(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function jt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){At(o,r,a,i,s,"next",e)}function s(e){At(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Ut=function(){var e=jt(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Rt(t),r=n.addFile(t),e.next=5,n.loadFile(t,r);case 5:return a=e.sent,e.next=8,n.getDataset(a,r);case 8:o=e.sent,Mt.Z.addInstance(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.name,":Error when trying to load and process local files:",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();function Lt(e){return _t.apply(this,arguments)}function _t(){return(_t=jt(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(Ut),e.next=3,Promise.all(n);case 3:return e.abrupt("return",Mt.Z.getStudyInstanceUIDs());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ft=function(e,t,n){return r.createElement(Xe.Z,{onDrop:e,noDrag:!0},(function(e){var a=e.getRootProps,o=e.getInputProps;return r.createElement("div",a(),r.createElement(ne.zx,{rounded:"full",variant:"contained",disabled:!1,endIcon:r.createElement(ne.JO,{name:"launch-arrow"}),className:we()("font-bold","ml-2"),onClick:function(){}},t,n?r.createElement("input",qt({},o(),{webkitdirectory:"true",mozdirectory:"true"})):r.createElement("input",o())))}))};var Bt=function(){var e=(0,le.s0)(),t=(0,r.useRef)(),n=sr.modules[ue.Z.DATA_SOURCE].reduce((function(e,t){var n=[];return t.module.forEach((function(e){"localApi"===e.type&&n.push(e)})),e.concat(n)}),[])[0].createDataSource({}),a=function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lt(r,n);case 2:a=t.sent,e("/viewer/dicomlocal?StudyInstanceUIDs=".concat(a[0]));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Vt(o,r,a,i,s,"next",e)}function s(e){Vt(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,r.useEffect)((function(){return document.body.classList.add("bg-black"),function(){document.body.classList.remove("bg-black")}}),[]),r.createElement(Xe.Z,{ref:t,onDrop:a,noClick:!0},(function(e){var t=e.getRootProps;return r.createElement("div",qt({},t(),{style:{width:"100%",height:"100%"}}),r.createElement("div",{className:"h-screen w-screen flex justify-center items-center "},r.createElement("div",{className:"py-8 px-8 mx-auto bg-secondary-dark shadow-md space-y-2 rounded-lg"},r.createElement("img",{className:"block mx-auto h-10",src:"./customLogo.svg",alt:"OHIF"}),r.createElement("div",{className:"text-center space-y-2 pt-4"},r.createElement("div",{className:"space-y-2"},r.createElement("p",{className:"text-blue-300 text-base"},"Note: You data is not uploaded to any server, it will stay in your local browser application"),r.createElement("p",{className:"text-xg text-primary-active font-semibold pt-8"},"Drag and Drop DICOM files here to load them in the Viewer"),r.createElement("p",{className:"text-blue-300 text-lg"},"Or click to "))),r.createElement("div",{className:"flex justify-around pt-4"},Ft(a,"Load files",!1),Ft(a,"Load folders",!0)))))}))},zt=function(e){var t=e.message,n=void 0===t?"Sorry, this page does not exist.":t,a=e.showGoBackButton,o=void 0===a||a;return r.createElement("div",{className:"w-full h-full flex justify-center items-center text-white"},r.createElement("div",null,r.createElement("h4",null,n),o&&r.createElement("h5",null,r.createElement(X.rU,{to:"/"},"Go back to the Study List"))))};zt.propTypes={message:o().string,showGoBackButton:o().bool};var Ht=zt;var Zt=function(){return r.createElement("div",null)};function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e){var t=e.servicesManager,n=e.viewportComponents,a=e.dataSource,o=$t((0,ne.O_)(),2),i=o[0],s=o[1],c=i.numCols,l=i.numRows,u=i.activeViewportIndex,d=i.viewports,f=(i.cachedLayout,t.services),m=f.DisplaySetService,p=f.MeasurementService,y=f.HangingProtocolService,v=(0,r.useCallback)((function(e){var t=$t(y.getState(),2),n=t[0],r=t[1];if(n.length)for(var a=i.numRows*i.numCols,o=function(t){if(!0===r[t])return"continue";if(void 0===n[t])return{v:void 0};var a=n[t].SeriesInstanceUID,o=e.find((function(e){return e.SeriesInstanceUID===a}));if(!o)return"continue";s.setDisplaysetForViewport({viewportIndex:t,displaySetInstanceUID:o.displaySetInstanceUID}),y.setHangingProtocolAppliedForViewport(t)},c=0;c<a;c++){var l=o(c);if("continue"!==l&&"object"===Wt(l))return l.v}}),[i,l,c]);(0,r.useEffect)((function(){var e=m.subscribe(m.EVENTS.DISPLAY_SETS_ADDED,(function(e){var t=e.displaySetsAdded;v(t)})).unsubscribe;return function(){e()}}),[i]),(0,r.useEffect)((function(){var e=m.getActiveDisplaySets();v(e)}),[i]),(0,r.useEffect)((function(){var e=y.subscribe(y.EVENTS.NEW_LAYOUT,(function(e){var t=e.numRows,n=e.numCols;s.setLayout({numRows:t,numCols:n})})).unsubscribe;return function(){e()}}),[d]),(0,r.useEffect)((function(){var e=p.subscribe(p.EVENTS.JUMP_TO_MEASUREMENT,(function(e){var t=e.viewportIndex,n=e.measurement.displaySetInstanceUID;d.map((function(e){return e.displaySetInstanceUID})).indexOf(n)>-1||s.setDisplaysetForViewport({viewportIndex:t,displaySetInstanceUID:n})})).unsubscribe;return function(){e()}}),[d]);var h=function(e,t){var n=t.displaySetInstanceUID;s.setDisplaysetForViewport({viewportIndex:e,displaySetInstanceUID:n})};return c&&c?r.createElement(ne._e,{numRows:l,numCols:c},function(){for(var e=[],t=c*l,o=function(t){var o=t,i=u===o,c=(d[t]||{}).displaySetInstanceUID,l=m.getDisplaySetByUID(c)||{},f=function(e,t){if(!e)return Zt;for(var n=0;n<t.length;n++){if(t[n].displaySetsToDisplay.includes(e))return t[n].component}}(l.SOPClassHandlerId,n);e[t]=r.createElement(ne.ZO,{key:o,className:"m-1",acceptDropsFor:"displayset",onDrop:h.bind(null,o),onInteraction:function(e){i||(e&&(e.preventDefault(),e.stopPropagation()),s.setActiveViewportIndex(o))},isActive:i},r.createElement("div",{className:we()("h-full w-full flex flex-col",{"pointer-events-none":!i})},r.createElement(f,{displaySet:l,viewportIndex:o,dataSource:a})))},i=0;i<t;i++)o(i);return e}()):null}Gt.propTypes={viewportComponents:o().array.isRequired},Gt.defaultProps={viewportComponents:[]};var Jt=Gt;function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function rn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){nn(o,r,a,i,s,"next",e)}function s(e){nn(o,r,a,i,s,"throw",e)}i(void 0)}))}}function an(e){return on.apply(this,arguments)}function on(){return(on=rn(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,l,u,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.servicesManager,r=t.studyInstanceUIDs,a=t.dataSource,o=n.services,i=o.DisplaySetService,s=o.HangingProtocolService,c=[],l=Mt.Z.subscribe(Mt.Z.EVENTS.INSTANCES_ADDED,(function(e){var t=e.StudyInstanceUID,n=e.SeriesInstanceUID,r=e.madeInClient,a=void 0!==r&&r,o=Mt.Z.getSeries(t,n);i.makeDisplaySets(o.instances,a)})),u=l.unsubscribe,c.push(u),d=Mt.Z.subscribe(Mt.Z.EVENTS.SERIES_ADDED,(function(e){var t=e.StudyInstanceUID,n=e.madeInClient,r=Mt.Z.getStudy(t);n||s.run(r)})),f=d.unsubscribe,c.push(f),r.forEach((function(e){a.retrieveSeriesMetadata({StudyInstanceUID:e})})),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sn(e){var t=e.mode,n=e.dataSourceName,a=e.extensionManager,o=e.servicesManager,i=e.hotkeysManager,s=(0,le.TH)(),c=Ne(),l=(0,le.UO)(),u=en((0,r.useState)(),2),d=u[0],f=u[1],m=en((0,r.useState)(!1),2),p=m[0],y=m[1],v=(0,r.useRef)(!1),h=(0,r.useRef)(null),g=(0,r.useRef)(!1);s!==h.current&&(v.current=null,h.current=s);var b=o.services,S=b.DisplaySetService,w=b.HangingProtocolService,E=(b.UserAuthenticationService,t.extensions),I=t.sopClassHandlers,O=t.hotkeys,D=t.hangingProtocols;void 0===n&&(n=a.defaultDataSourceName),a.setActiveDataSource(n);var x=a.getActiveDataSource()[0],k=t.routes[0],P=k.layoutTemplate({location:s}),C=(a.getModuleEntry(P.id).component,[]);E.forEach((function(e){var t=Object.keys(a.modulesMap).filter((function(t){return t.includes("".concat(e,".contextModule."))}));if(t&&t.length){var n=t.map(a.getModuleEntry);C=C.concat(n)}}));var T=C.map((function(e){return e.provider})),N=function(e){var t=e.children;return te({components:T,children:t})};(0,r.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]),(0,r.useEffect)((function(){return function(){var e=rn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.initialize({params:t,query:n});case 2:r=e.sent,f(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(l,c),function(){v.current=null}}),[s]),(0,r.useEffect)((function(){var e=function(){var e=rn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.layoutTemplate({location:s,servicesManager:o,studyInstanceUIDs:d});case 2:t=e.sent,g.current&&(v.current=t,y(!p));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null!=d&&d.length&&void 0!==d[0]&&e(),function(){v.current=null}}),[d]),(0,r.useEffect)((function(){if(O){i.setDefaultHotKeys(O);var e=JSON.parse(localStorage.getItem("hotkey-definitions"));return null!=e&&e.length?i.setHotkeys(e):i.setHotkeys(O),function(){i.destroy()}}}),[]),(0,r.useEffect)((function(){var e;if(v.current)return S.init(a,I),a.onModeEnter(),null==t||t.onModeEnter({servicesManager:o,extensionManager:a}),D.forEach((function(e){var t=a.getModuleEntry(e);null!=t&&t.protocols&&w.addProtocols(t.protocols)})),function(){var e=rn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.init){e.next=4;break}return e.next=3,k.init({servicesManager:o,extensionManager:a,hotkeysManager:i,studyInstanceUIDs:d,dataSource:x});case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,an({servicesManager:o,extensionManager:a,hotkeysManager:i,studyInstanceUIDs:d,dataSource:x});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(t){e=t})),function(){a.onModeExit(),null==t||t.onModeExit({servicesManager:o,extensionManager:a}),e.forEach((function(e){e()}))}}),[t,n,s,k,o,a,i,d,p,D]);return r.createElement(ne.us,{StudyInstanceUIDs:d},r.createElement(N,null,r.createElement(ne.bI,null,v.current&&(null==d?void 0:d.length)&&void 0!==d[0]&&function(e){var t=a.getModuleEntry(v.current.id).component;return r.createElement(t,e)}(Xt(Xt({},v.current.props),{},{ViewportGridComp:function(e){return Jt(Xt(Xt({},e),{},{dataSource:x}))}})))))}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}sn.propTypes={mode:o().object.isRequired,dataSourceName:o().string,extensionManager:o().object,servicesManager:o().object,hotkeysManager:o().object};var dn=function(e){var t=un({},e),n=cn((0,ne.md)(),2),a=n[0],o=a.user,i=a.enabled,s=n[1];return i&&!o?s.handleUnauthenticated():r.createElement(le.AW,t)},fn=["route"];function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn=[{path:"/",children:be,private:!0,props:{children:Ke}},{path:"/local",children:Bt},{component:Ht}],gn=function(e){var t=e.modes,n=e.dataSources,a=e.extensionManager,o=e.servicesManager,i=e.hotkeysManager,s=e.routerBasename,c=function(e){var t=e.modes,n=e.dataSources,a=e.extensionManager,o=e.servicesManager,i=e.hotkeysManager,s=[],c=[];return n.forEach((function(e){var t=e.sourceName;c.includes(t)||c.push(t)})),t.forEach((function(e){c.forEach((function(t){var n="/".concat(e.id,"/").concat(t);s.push({path:n,children:function(){return r.createElement(sn,{mode:e,dataSourceName:t,extensionManager:a,servicesManager:o,hotkeysManager:i})}})}));var t=a.defaultDataSourceName,n="/".concat(e.id);s.push({path:n,children:function(){return r.createElement(sn,{mode:e,dataSourceName:t,extensionManager:a,servicesManager:o,hotkeysManager:i})},private:!0})})),s}({modes:t,dataSources:n,extensionManager:a,servicesManager:o,hotkeysManager:i})||[],l=[].concat(yn(c),hn);function u(e){var t=e.route,n=pn(e,fn);return r.createElement(ne.SV,{context:"Route ".concat(t.path),fallbackRoute:"/"},r.createElement(t.children,mn({},n,t.props,{route:t,servicesManager:o,hotkeysManager:i})))}var d=o.services.UserAuthenticationService;return r.createElement(le.Z5,{basename:s},l.map((function(e,t){return!0===e.private?r.createElement(dn,{key:t,path:e.path,handleUnauthenticated:d.handleUnauthenticated,element:r.createElement(u,{route:e})}):r.createElement(le.AW,{key:t,path:e.path,element:r.createElement(u,{route:e})})})))},bn=n(96798),Sn=n(96088),wn=n(68818),En=n(49823),In=n(34894),On=n(42586),Dn=n(57512),xn=n(13527),kn=n(49811),Pn=n(97728),Cn=n(27933),Tn=n(37765),Nn=n(37208),Rn=n(24910),Mn=n(27961),An=n(9159);function jn(e){return function(e){if(Array.isArray(e))return Un(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vn=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},"function"==typeof e?e({servicesManager:a}):e),r=new bn.Z({getAppState:function(){},getActiveContexts:function(){return["VIEWER","DEFAULT","ACTIVE_VIEWPORT::CORNERSTONE"]}}),a=new Sn.Z(r),o=new wn.Z(r,a),i=new En.Z({commandsManager:r,servicesManager:a,hotkeysManager:o,appConfig:n});if(a.registerServices([In.Z,On.Z,Dn.Z,xn.Z,kn.Z,Pn.Z,Cn.Z,Tn.Z,Nn.Z,Rn.Z,Mn.Z]),An.Z.getHTTPErrorHandler=function(){if("function"==typeof n.httpErrorHandler)return n.httpErrorHandler},i.registerExtensions([].concat(jn(t),jn(n.extensions)),n.dataSources),!n.modes)throw new Error("No modes are defined! Check your app-config.js");return n.modes.length||n.modes.push(window.longitudinalMode),{appConfig:n,commandsManager:r,extensionManager:i,servicesManager:a,hotkeysManager:o}};function qn(e){var t=e.userManager,n=e.onRedirectSuccess;return t.signinRedirectCallback().then((function(e){return n(e)})).catch((function(e){return function(e){throw new Error(e)}(e)})),r.createElement("div",null,"Redirecting...")}qn.propTypes={userManager:o().object.isRequired};var Fn=qn;function Bn(e){var t=e.userManager,n=(0,le.s0)();return t.signoutRedirectCallback().then((function(e){return t=JSON.parse(sessionStorage.getItem("ohif-redirect-to")),r=t.pathname,a=t.search,o=void 0===a?"":a,void n("".concat(r,"?").concat(o));var t,r,a,o})).catch((function(e){return function(e){throw new Error(e)}(e)})),r.createElement("div",null,"Redirecting...")}Bn.propTypes={userManager:o().object.isRequired};var zn=Bn,Hn=n(6232);function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e,t){return function(e){return e.includes("http://")||e.includes("https://")}(e)?e:("/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t+e)}var Gn=function(e,t){if(e&&e.length){var n=e[0],r=window.location,a=r.protocol,o=r.host,i="".concat(a,"//").concat(o).concat(t),s=n.redirect_uri||"/callback",c=n.silent_redirect_uri||"/silent-refresh.html",l=n.post_logout_redirect_uri||"/";return function(e){if(e){var t=Wn(Wn({},e),{},{automaticSilentRenew:!0,revokeAccessTokenOnSignout:!0,filterProtocolClaims:!0,loadUserInfo:!0});return new Hn.UserManager(t)}}(Object.assign({},n,{redirect_uri:Yn(s,i),silent_redirect_uri:Yn(c,i),post_logout_redirect_uri:Yn(l,i)}))}};function Jn(e){var t=new URLSearchParams(location.search),n=t.get("iss"),r=t.get("login_hint"),a=t.get("target_link_uri");return n!==oidcAuthority?(console.error("iss of /login does not match the oidc authority"),null):(e.removeUser().then((function(){if(null!==a){var t={pathname:new URL(a).pathname};sessionStorage.setItem("ohif-redirect-to",JSON.stringify(t))}else{sessionStorage.setItem("ohif-redirect-to",JSON.stringify({pathname:"/"}))}null!==r?e.signinRedirect({login_hint:r}):e.signinRedirect()})),null)}var Kn=function(e){var t=e.oidc,n=e.routerBasename,a=e.UserAuthenticationService,o=Gn(t,n),i=function(){var e=a.getUser();return{Authorization:"Bearer ".concat(e.access_token)}},s=function(){return o.signinRedirect(),null},c=(0,le.s0)();(0,r.useEffect)((function(){a.set({enabled:!0}),a.setServiceImplementation({getAuthorizationHeader:i,handleUnauthenticated:s})}),[]);var l=t[0].authority,u=(0,le.TH)(),d=u.pathname,f=u.search,m=new URL(o.settings._redirect_uri).pathname,p=new URL(o.settings._silent_redirect_uri).pathname,y=new URL(o.settings._post_logout_redirect_uri).pathname;return d!==m&&sessionStorage.setItem("ohif-redirect-to",JSON.stringify({pathname:d,search:f})),r.createElement(le.Z5,{basename:n},r.createElement(le.AW,{path:p,onEnter:window.location.reload}),r.createElement(le.AW,{path:y,element:r.createElement(zn,{userManager:o,successCallback:function(){return console.log("Signout successful")},errorCallback:function(e){console.warn(e),console.warn("Signout failed")}})}),r.createElement(le.AW,{path:m,element:r.createElement(Fn,{userManager:o,onRedirectSuccess:function(e){var t=JSON.parse(sessionStorage.getItem("ohif-redirect-to")),n=t.pathname,r=t.search,o=void 0===r?"":r;a.setUser(e),c({pathname:n,search:o})}})}),r.createElement(le.AW,{path:"/login",element:r.createElement(Jn,{userManager:o,oidcAuthority:l})}))},Xn=n(22324).ZP.windowLevelPresets;function Qn(e,t,n,r,a,o,i){return{id:t,icon:n,label:r,type:e,commandName:a,commandOptions:o,tooltip:i}}var er=Qn.bind(null,"action"),tr=Qn.bind(null,"toggle"),nr=Qn.bind(null,"tool");function rr(e,t,n){return{id:e.toString(),title:t,subtitle:n,type:"action",commandName:"setWindowLevel",commandOptions:Xn[e]}}var ar=[{id:"MeasurementTools",type:"ohif.splitButton",props:{groupId:"MeasurementTools",isRadio:!0,primary:nr("Length","tool-length","Length",void 0,{toolName:"Length"},"Length"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Measure Tools"},items:[nr("Length","tool-length","Length",void 0,{toolName:"Length"},"Length Tool"),nr("Bidirectional","tool-bidirectional","Bidirectional",void 0,{toolName:"Bidirectional"},"Bidirectional Tool"),nr("ArrowAnnotate","tool-annotate","Annotation",void 0,{toolName:"ArrowAnnotate"},"Arrow Annotate"),nr("EllipticalRoi","tool-elipse","Ellipse",void 0,{toolName:"EllipticalRoi"},"Ellipse Tool")]}},{id:"Zoom",type:"ohif.radioGroup",props:{type:"tool",icon:"tool-zoom",label:"Zoom",commandOptions:{toolName:"Zoom"}}},{id:"WindowLevel",type:"ohif.splitButton",props:{groupId:"Wwwc",primary:nr("Wwwc","tool-window-level","Window Level",void 0,{toolName:"Wwwc"},"Window Level"),secondary:{icon:"chevron-down",label:"W/L Manual",isActive:!0,tooltip:"W/L Presets"},isAction:!0,renderer:ne.eJ,items:[rr(1,"Soft tissue","400 / 40"),rr(2,"Lung","1500 / -600"),rr(3,"Liver","150 / 90"),rr(4,"Bone","80 / 40"),rr(5,"Brain","2500 / 480")]}},{id:"Pan",type:"ohif.radioGroup",props:{type:"tool",icon:"tool-move",label:"Pan",commandOptions:{toolName:"Pan"}}},{id:"Capture",type:"ohif.action",props:{icon:"tool-capture",label:"Capture",type:"action",commandName:"showDownloadViewportModal"}},{id:"Layout",type:"ohif.layoutSelector"},{id:"MoreTools",type:"ohif.splitButton",props:{isRadio:!0,groupId:"MoreTools",primary:er("Reset","tool-reset","Reset View","resetViewport",void 0,"Reset"),secondary:{icon:"chevron-down",label:"",isActive:!0,tooltip:"More Tools"},items:[er("Reset","tool-reset","Reset View","resetViewport",void 0,"Reset"),er("rotate-right","tool-rotate-right","Rotate Right","rotateViewportCW",void 0,"Rotate +90"),er("flip-horizontal","tool-flip-horizontal","Flip Horizontally","flipViewportHorizontal",void 0,"Flip Horizontal"),nr("StackScroll","tool-stack-scroll","Stack Scroll",void 0,{toolName:"StackScroll"},"Stack Scroll"),nr("Magnify","tool-magnify","Magnify",void 0,{toolName:"Magnify"},"Magnify"),er("invert","tool-invert","Invert","invertViewport",void 0,"Invert Colors"),tr("cine","tool-cine","Cine","toggleCine",void 0,"Cine"),nr("Angle","tool-angle","Angle",void 0,{toolName:"Angle"},"Angle"),nr("DragProbe","tool-probe","Probe",void 0,{toolName:"DragProbe"},"Probe"),nr("Rectangle","tool-rectangle","Rectangle",void 0,{toolName:"RectangleRoi"},"Rectangle")]}}];function or(e){return function(e){if(Array.isArray(e))return ir(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sr,cr,lr,ur="org.ohif.default.layoutTemplateModule.viewerLayout",dr="org.ohif.default.sopClassHandlerModule.stack",fr="org.ohif.default.hangingProtocolModule.default",mr="org.ohif.measurement-tracking.panelModule.trackedMeasurements",pr="org.ohif.measurement-tracking.panelModule.seriesList",yr="org.ohif.measurement-tracking.viewportModule.cornerstone-tracked",vr="org.ohif.dicom-sr.sopClassHandlerModule.dicom-sr",hr="org.ohif.dicom-sr.viewportModule.dicom-sr";function gr(e){var t=e.config,n=e.defaultExtensions,a=Vn(t,n);a.commandsManager,sr=a.extensionManager,cr=a.servicesManager,lr=a.hotkeysManager;var o=a.appConfig,i=o.routerBasename,s=o.modes,c=o.dataSources,l=o.oidc,u=gn({modes:s,dataSources:c,extensionManager:sr,servicesManager:cr,hotkeysManager:lr,routerBasename:i}),d=cr.services,m=d.UIDialogService,p=d.UIModalService,y=d.UINotificationService,v=d.UIViewportDialogService,h=d.ViewportGridService,g=d.CineService,b=d.UserAuthenticationService,S=[[ce,{value:o}],[ne.ux,{service:b}],[f.a3,{i18n:K}],[ne.$S],[ne.CW,{service:h}],[ne.mN,{service:v}],[ne.bC,{service:g}],[ne.wT,{service:y}],[ne.Tu,{service:m}],[ne.DY,{service:p,modal:ne.u_}]],w=function(e){var t=e.children;return te({components:S,children:t})},E=null;return l&&(E=r.createElement(Kn,{oidc:l,routerBasename:i,UserAuthenticationService:b})),r.createElement(w,null,r.createElement(X.VK,null,E,u))}window.longitudinalMode=({}.modeConfiguration,{id:"viewer",displayName:"Basic Viewer",onModeEnter:function(e){var t=e.servicesManager,n=e.extensionManager,r=t.services.ToolBarService,a={groupId:"primary",itemId:"Wwwc",interactionType:"tool",commandOptions:void 0};r.recordInteraction(a),r.init(n),r.addButtons(ar),r.createButtonSection("primary",["MeasurementTools","Zoom","WindowLevel","Pan","Capture","Layout","MoreTools"])},onModeExit:function(){},validationTags:{study:[],series:[]},isValidMode:function(e){return!e.modalities.split("\\").includes("SM")},routes:[{path:"longitudinal",layoutTemplate:function(e){return e.location,e.servicesManager,{id:ur,props:{leftPanels:[pr],rightPanels:[mr],viewports:[{namespace:yr,displaySetsToDisplay:[dr]},{namespace:hr,displaySetsToDisplay:[vr]}]}}}}],extensions:["org.ohif.default","org.ohif.cornerstone","org.ohif.measurement-tracking","org.ohif.dicom-sr"],hangingProtocols:[fr],sopClassHandlers:[dr,vr],hotkeys:or(Re.dD.defaults.hotkeyBindings)}),gr.propTypes={config:o().oneOfType([o().func,o().shape({routerBasename:o().string.isRequired,oidc:o().array,whiteLabeling:o().shape({createLogoComponentFn:o().func}),extensions:o().array})]).isRequired,defaultExtensions:o().array},gr.defaultProps={config:{routerBaseName:"/",showStudyList:!0,oidc:[],extensions:[]},defaultExtensions:[]};var br=gr,Sr=n(12788),wr=n(75935),Er=n(76643);function Ir(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Or(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ir(o,r,a,i,s,"next",e)}function s(e){Ir(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Dr=Er.ZP.getString,xr=Er.ZP.getName,kr=Er.ZP.getModalities;function Pr(e){if(!e||!e.length)return[];var t=[];return e.forEach((function(e){return t.push({studyInstanceUid:Dr(e["0020000D"]),date:Dr(e["00080020"]),time:Dr(e["00080030"]),accession:Dr(e["00080050"])||"",mrn:Dr(e["00100020"])||"",patientName:Me.ZP.formatPN(xr(e["00100010"]))||"",instances:Number(Dr(e["00201208"]))||0,description:Dr(e["00081030"])||"",modalities:Dr(kr(e["00080060"],e["00080061"]))||""})})),t}function Cr(e){var t=[];return e&&e.length&&e.forEach((function(e){return t.push({studyInstanceUid:Dr(e["0020000D"]),seriesInstanceUid:Dr(e["0020000E"]),modality:Dr(e["00080060"]),seriesNumber:Dr(e["00200011"]),seriesDate:Me.ZP.formatDate(Dr(e["00080021"])),numSeriesInstances:Number(Dr(e["00201209"])),description:Dr(e["0008103E"])})})),t}function Tr(e,t,n,r){return Nr.apply(this,arguments)}function Nr(){return(Nr=Or(regeneratorRuntime.mark((function e(t,n,r,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.searchForStudies({studyInstanceUid:void 0,queryParams:a});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=["00081030","00080060"].join(","),r=t.supportsWildcard,a=function(e){return r&&e?"*".concat(e,"*"):e},o={PatientName:a(e.patientName),"00100020":a(e.patientId),AccessionNumber:a(e.accessionNumber),StudyDescription:a(e.studyDescription),ModalitiesInStudy:e.modalitiesInStudy,limit:e.limit||101,offset:e.offset||0,fuzzymatching:!0===t.supportsFuzzyMatching,includefield:n};if(e.startDate&&e.endDate)o.StudyDate="".concat(e.startDate,"-").concat(e.endDate);else if(e.startDate){var i=new Date,s=String(i.getDate()).padStart(2,"0"),c=String(i.getMonth()+1).padStart(2,"0"),l=i.getFullYear(),u="".concat(l).concat(c).concat(s);o.StudyDate="".concat(e.startDate,"-").concat(u)}else if(e.endDate){var d="19700102";o.StudyDate="".concat(d,"-").concat(e.endDate)}if(e.studyInstanceUid){var f=e.studyInstanceUid;f=(f=Array.isArray(f)?f.join():f).replace(/[^0-9.]+/g,"\\"),o.StudyInstanceUID=f}var m={};return Object.keys(o).forEach((function(e){void 0!==o[e]&&""!==o[e]&&(m[e]=o[e])})),m}}var Mr=n(71818);function Ar(e){var t=e.instance,n=e.frame,r=e.config,a=e.thumbnail,o=void 0!==a&&a;if(t){if(t.url)return t.url;var i=o?"thumbnailRendering":"imageRendering";if(r[i]&&"wadouri"!==r[i])return function(e,t,n){var r=function(e,t,n){var r=function(e,t){var n=e.StudyInstanceUID,r=e.SeriesInstanceUID,a=e.SOPInstanceUID;return"".concat(t.wadoRoot,"/studies/").concat(n,"/series/").concat(r,"/instances/").concat(a)}(e,t);return n=n||1,"".concat(r,"/frames/").concat(n)}(e,t,n);if(r)return"wadors:".concat(r)}(t,r,n);var s="dicomweb:"+function(e,t){var n=t.StudyInstanceUID,r=t.SeriesInstanceUID,a=t.SOPInstanceUID,o=[];o.push("requestType=WADO"),o.push("studyUID=".concat(n)),o.push("seriesUID=".concat(r)),o.push("objectUID=".concat(a)),o.push("contentType=application/dicom"),o.push("transferSyntax=*");var i=o.join("&");return"".concat(e.wadoUriRoot,"?").concat(i)}(r,t);return void 0!==n&&(s+="&frame="+n),s}}var jr=Object.freeze(["SEG","KO","PR","SR","RTSTRUCT"]);function Ur(e){return jr.includes(e)}var Lr={default:function(e,t){return e.SeriesNumber-t.SeriesNumber},seriesInfoSortingCriteria:function(e,t){var n=Ur(e.Modality),r=Ur(t.Modality);return!n&&r?-1:n&&!r?1:e.SeriesNumber-t.SeriesNumber}},_r={default:function(e,t){return e.InstanceNumber-t.InstanceNumber}},Vr={seriesSortCriteria:Lr,instancesSortCriteria:_r},qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr.default,n=arguments.length>2?arguments[2]:void 0;return"function"==typeof n?n(e):e.sort(t)};function Fr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){zr(o,r,a,i,s,"next",e)}function s(e){zr(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qr(e);if(t){var a=Qr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xr(this,n)}}function Xr(e,t){return!t||"object"!==$r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ea(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ta(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ea(o,r,a,i,s,"next",e)}function s(e){ea(o,r,a,i,s,"throw",e)}i(void 0)}))}}function na(e,t,n){return Object.freeze({hasNext:function(){return n.length>0},next:function(){return ta(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.shift(),r.abrupt("return",e.retrieveSeriesMetadata({studyInstanceUID:t,seriesInstanceUID:a}));case 2:case"end":return r.stop()}}),r)})))()}})}var ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(s,e);var t,n,r,a,o,i=Kr(s);function s(){return Yr(this,s),i.apply(this,arguments)}return t=s,(n=[{key:"getPreLoaders",value:regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.studyInstanceUID,r=this.filters,a=(r=void 0===r?{}:r).seriesInstanceUID,o=this.client,a&&(i={studyInstanceUID:n,queryParams:{SeriesInstanceUID:a}},t.push(o.searchForSeries.bind(o,i))),t.push(o.searchForSeries.bind(o,{studyInstanceUID:n})),e.delegateYield(t,"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"preLoad",value:(o=ta(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPreLoaders(),e.next=3,this.runLoaders(t);case 3:return n=e.sent,r=this.sortCriteria,a=this.sortFunction,o=mt.ZP.data.DicomMetaDictionary.naturalizeDataset,i=n.map(o),e.abrupt("return",qr(i,r||Vr.seriesSortCriteria.seriesInfoSortingCriteria,a));case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"load",value:function(){var e=ta(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.client,r=this.studyInstanceUID,a=t.map((function(e){return e.SeriesInstanceUID})),o=na(n,r,a),i=[];o.hasNext();)i.push(o.next());return e.abrupt("return",{preLoadData:t,promises:i});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"posLoad",value:(a=ta(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.preLoadData,r=t.promises,e.abrupt("return",{preLoadData:n,promises:r});case 2:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}])&&Gr(t.prototype,n),r&&Gr(t,r),s}(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Zr(this,e),this.client=t,this.studyInstanceUID=n,this.filters=r,this.sortCriteria=a,this.sortFunction=o}var t,n,r,a,o,i,s,c;return t=e,(n=[{key:"execLoad",value:(c=Hr(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preLoad();case 2:return t=e.sent,e.next=5,this.load(t);case 5:return n=e.sent,e.next=8,this.posLoad(n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"runLoaders",value:(s=Hr(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Fr(t),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=18;break}return o=a.value,e.prev=5,e.next=8,o();case 8:if(!(n=e.sent)||!n.length){e.next=11;break}return e.abrupt("break",18);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),e.t0;case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),r.e(e.t1);case 23:return e.prev=23,r.f(),e.finish(23);case 26:if(!t.next().done||n){e.next=28;break}throw new Error("RetrieveMetadataLoader failed");case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,null,[[1,20,23,26],[5,13]])}))),function(e){return s.apply(this,arguments)})},{key:"configLoad",value:(i=Hr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"preLoad",value:(o=Hr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"load",value:function(){var e=Hr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"posLoad",value:(a=Hr(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}])&&Wr(t.prototype,n),r&&Wr(t,r),e}());function aa(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function oa(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){aa(o,r,a,i,s,"next",e)}function s(e){aa(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ia(){return(ia=oa(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c,l,u,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},o=d.length>4?d[4]:void 0,i=d.length>5?d[5]:void 0,s=new ra(t,n,a,o,i),e.next=7,s.execLoad();case 7:return c=e.sent,l=c.preLoadData,u=c.promises,e.abrupt("return",{seriesSummaryMetadata:l,seriesPromises:u});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sa=function(e,t,n){return ia.apply(this,arguments)},ca="RetrieveStudyMetadata",la=new Map;function ua(e,t,n,r,a,o){if(!e)throw new Error("".concat(ca,": Required 'dicomWebClient' parameter not provided."));if(!t)throw new Error("".concat(ca,": Required 'StudyInstanceUID' parameter not provided."));if(la.has(t))return la.get(t);var i=new Promise((function(i,s){sa(e,t,n,r,a,o).then((function(e){i(e)}),s)}));return la.set(t,i),i}function da(e){la.has(e)&&la.delete(e)}function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return(ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ba(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ba(e);if(t){var a=ba(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sa,wa,Ea,Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(s,e);var t,n,r,a,o,i=ha(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).staticWado=e.staticWado,t}return t=s,(n=[{key:"searchForStudies",value:(a=regeneratorRuntime.mark((function e(t){var n,r,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.staticWado){e.next=2;break}return e.abrupt("return",ya(ba(s.prototype),"searchForStudies",this).call(this,t));case 2:return e.next=4,ya(ba(s.prototype),"searchForStudies",this).call(this,t);case 4:if(n=e.sent,r=t.queryParams){e.next=8;break}return e.abrupt("return",n);case 8:return a=n.filter((function(e){for(var t=0,n=Object.keys(s.filterKeys);t<n.length;t++){var a=n[t];if(!o.filterItem(a,r,e))return!1}return!0})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){ma(o,n,r,i,s,"next",e)}function s(e){ma(o,n,r,i,s,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"compareValues",value:function(e,t){var n,r=this;return Array.isArray(e)?e.find((function(e){return r.compareValues(e,t)})):Array.isArray(t)?t.find((function(t){return r.compareValues(e,t)})):(null!==(n=t)&&void 0!==n&&n.Alphabetic&&(t=t.Alphabetic),"string"==typeof t?-1!=t.indexOf(e):e===t)}},{key:"compareDateRange",value:function(e,t){if(!t)return!0;var n=e.indexOf("-");if(-1===n)return this.compareValues(e,t);var r=e.substring(0,n),a=e.substring(n+1);return(!r||t>=r)&&(!a||t<=a)}},{key:"filterItem",value:function(e,t,n){var r=s.filterKeys[e]||e;if(!t)return!0;var a=t[e]||t[r];if(!a)return!0;var o=n[e]||n[r];if(!o)return!1;if("DA"==o.vr)return this.compareDateRange(a,o.Value[0]);var i=o.Value;return this.compareValues(a,i)&&!0}}])&&pa(t.prototype,n),r&&pa(t,r),s}(wr.hi.DICOMwebClient);Ea={StudyInstanceUID:"0020000D",PatientName:"00100010","00100020":"mrn",StudyDescription:"00081030",StudyDate:"00080020",ModalitiesInStudy:"00080061"},(wa="filterKeys")in(Sa=Ia)?Object.defineProperty(Sa,wa,{value:Ea,enumerable:!0,configurable:!0,writable:!0}):Sa[wa]=Ea;var Oa=["studyInstanceUid","seriesInstanceUid"];function Da(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xa(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ka(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){xa(o,r,a,i,s,"next",e)}function s(e){xa(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Pa=mt.ZP.data,Ca=Pa.DicomMetaDictionary,Ta=Pa.DicomDict,Na=Ca.naturalizeDataset,Ra=Ca.denaturalizeDataset,Ma=Me.ZP.urlUtil;function Aa(e,t){var n,r,a,o=e.qidoRoot,i=e.wadoRoot,s=e.enableStudyLazyLoad,c=e.supportsFuzzyMatching,l=e.supportsWildcard,u=e.supportsReject,d=e.staticWado,f={url:o,staticWado:d,headers:t.getAuthorizationHeader(),errorInterceptor:An.Z.getHTTPErrorHandler()},m={url:i,headers:t.getAuthorizationHeader(),errorInterceptor:An.Z.getHTTPErrorHandler()},p=d?new Ia(f):new wr.hi.DICOMwebClient(f),y=new wr.hi.DICOMwebClient(m),v={initialize:function(e){var t=e.params,n=e.query,r=t.StudyInstanceUIDs,a=n.get("StudyInstanceUIDs")||r;return a&&Array.isArray(a)?a:[a]},query:{studies:{mapParams:Rr.bind(),search:function(){var e=ka(regeneratorRuntime.mark((function e(n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.getAuthorizationHeader())&&(p.headers=r),a=Rr(n,{supportsFuzzyMatching:c,supportsWildcard:l})||{},a.studyInstanceUid,a.seriesInstanceUid,o=Da(a,Oa),e.next=5,Tr(p,void 0,void 0,o);case 5:return i=e.sent,e.abrupt("return",Pr(i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processResults:Pr.bind()},series:{search:(a=ka(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.getAuthorizationHeader())&&(p.headers=r),e.next=4,o=p,i=n,s=void 0,s={includefield:["0008103E","00080021"].join(",")},o.searchForSeries({studyInstanceUID:i,queryParams:s});case 4:return a=e.sent,e.abrupt("return",Cr(a));case 6:case"end":return e.stop()}var o,i,s}),e)}))),function(e){return a.apply(this,arguments)})},instances:{search:function(e,n){var r=t.getAuthorizationHeader();r&&(p.headers=r),Tr.call(void 0,p,e,null,n)}}},retrieve:{series:{metadata:function(e,n){var r=t.getAuthorizationHeader();r&&(y.headers=r);var a=Ma.parse(e,!0).StudyInstanceUIDs;if(!(a=Ma.paramString.parseParam(a)))throw new Error("Incomplete queryParams, missing StudyInstanceUIDs");a.map((function(e){return ua(y,e,s)})).forEach((function(e){e.then((function(e){e.seriesPromises.forEach((function(e){e.then((function(e){!function(e){var t=e.map(Na);Mt.Z.addInstances(t),n(t)}(e)}))}))}))}))}}},store:{dicom:(r=ka(regeneratorRuntime.mark((function e(n){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.getAuthorizationHeader())&&(y.headers=r),a={FileMetaInformationVersion:n._meta.FileMetaInformationVersion.Value,MediaStorageSOPClassUID:n.SOPClassUID,MediaStorageSOPInstanceUID:n.SOPInstanceUID,TransferSyntaxUID:"1.2.840.10008.1.2.1",ImplementationClassUID:"2.25.270695996825855179949881587723571202391.2.0.0",ImplementationVersionName:"OHIF-VIEWER-2.0.0"},o=Ra(a),(i=new Ta(o)).dict=Ra(n),s=i.write(),c={datasets:[s]},e.next=10,y.storeInstances(c);case 10:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},retrieveSeriesMetadata:(n=ka(regeneratorRuntime.mark((function e(){var n,r,a,o,i,c,l,u,d,f,m,v,h,g,b,S=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=function(){Mt.Z.getStudy(r,l).isLoaded=!0},h=function(e){var t=e.map(v);Mt.Z.addInstances(t,l)},n=S.length>0&&void 0!==S[0]?S[0]:{},r=n.StudyInstanceUID,a=n.filters,o=n.sortCriteria,i=n.sortFunction,c=n.madeInClient,l=void 0!==c&&c,(u=t.getAuthorizationHeader())&&(y.headers=u),r){e.next=7;break}throw new Error("Unable to query for SeriesMetadata without StudyInstanceUID");case 7:return e.next=9,ua(y,r,s,a,o,i);case 9:d=e.sent,f=d.seriesSummaryMetadata,m=d.seriesPromises,v=function(e){var t=Na(e);return Object.keys(t).forEach((function(e){var n=t[e];n&&n.BulkDataURI&&!n.Value&&(n.retrieveBulkData=function(){var e={multipart:!1,BulkDataURI:n.BulkDataURI,StudyInstanceUID:t.StudyInstanceUID};return p.retrieveBulkData(e).then((function(e){var t=e&&e[0]||void 0;return n.Value=t,t}))})})),t},f.forEach((function(e){e.StudyInstanceUID=r})),Mt.Z.addSeriesMetadata(f,l),b=m.length,m.forEach(function(){var e=ka(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,h(r),n===b-1&&g();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),deleteStudyMetadataPromise:da,getImageIdsForDisplaySet:function(e){var t=this,n=e.images,r=[];return n?(e.images.forEach((function(e){var n=e.NumberOfFrames;if(n>1)for(var a=0;a<n;a++){var o=t.getImageIdsForInstance({instance:e,frame:a});r.push(o)}else{var i=t.getImageIdsForInstance({instance:e});r.push(i)}})),r):r},getImageIdsForInstance:function(t){return Ar({instance:t.instance,frame:t.frame,config:e})}};return u&&(v.reject=function(e){return{series:function(t,n){return new Promise((function(r,a){var o="".concat(e,"/studies/").concat(t,"/series/").concat(n,"/reject/").concat("113001%5EDCM"),i=new XMLHttpRequest;i.open("POST",o,!0),console.log(i),i.onreadystatechange=function(){if(4==i.readyState)switch(i.status){case 204:r(i.responseText);break;case 404:a("Your dataSource does not support reject functionality")}},i.send()}))}}}(i)),Mr.Z.create(v)}function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e){return function(e){if(Array.isArray(e))return Fa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){if(e){if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ba(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function za(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ba(o,r,a,i,s,"next",e)}function s(e){Ba(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Ha=Re.ZP.classes.MetadataProvider,Za={studyInstanceUid:"StudyInstanceUID",patientId:"PatientID"},Wa={urls:[]},$a=function(e){return Wa.urls.find((function(t){return t.url===e}))},Ya=function(e,t){var n=[];return Wa.urls.map((function(r){r.studies.map((function(r){r[e]===t&&n.push(r)}))})),n};function Ga(e){e.name;var t,n={initialize:(t=za(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params,n=t.query,(r=t.url)||(r=n.get("url")),!(a=$a(r))){e.next=5;break}return e.abrupt("return",a.studies.map((function(e){return e.StudyInstanceUID})));case 5:return e.next=7,fetch(r);case 7:return o=e.sent,e.next=10,o.json();case 10:return i=e.sent,s=i.studies.map((function(e){return e.StudyInstanceUID})),i.studies.forEach((function(e){c=e.StudyInstanceUID,e.series.forEach((function(e){l=e.SeriesInstanceUID,e.instances.forEach((function(e){var t=e.url,n=e.metadata;Ha.addImageIdToUIDs(t,{StudyInstanceUID:c,SeriesInstanceUID:l,SOPInstanceUID:n.SOPInstanceUID})}))}))})),Wa.urls.push({url:r,studies:Va(i.studies)}),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),query:{studies:{mapParams:function(){},search:function(){var e=za(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_a(Object.entries(t)[0],2),r=n[0],a=n[1],o=Ya(Za[r],a),e.abrupt("return",o.map((function(e){return{accession:e.AccessionNumber,date:e.StudyDate,description:e.StudyDescription,instances:e.NumInstances,modalities:e.Modalities,mrn:e.PatientID,patientName:e.PatientName,studyInstanceUid:e.StudyInstanceUID,NumInstances:e.NumInstances,time:e.StudyTime}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processResults:function(){console.debug(" DICOMJson QUERY processResults")}},series:{search:function(){console.debug(" DICOMJson QUERY SERIES SEARCH")}},instances:{search:function(){console.debug(" DICOMJson QUERY instances SEARCH")}}},retrieve:{series:{metaData:function(){console.debug(" DICOMJson retrieve series metadata")}}},store:{dicom:function(){console.debug(" DICOMJson store dicom")}},retrieveSeriesMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.StudyInstanceUID,n=e.madeInClient,r=void 0!==n&&n,a=e.customSort;if(!t)throw new Error("Unable to query for SeriesMetadata without StudyInstanceUID");var o,i=Ya("StudyInstanceUID",t)[0],s=(o=a?a(i.series):i.series).map((function(e){var t=Ua({StudyInstanceUID:i.StudyInstanceUID},e);return delete t.instances,t}));function c(e){Mt.Z.addInstances(e,r)}function l(){Mt.Z.getStudy(t,r).isLoaded=!0}Mt.Z.addSeriesMetadata(s,r);var u=o.length;o.forEach((function(e,t){c(e.instances.map((function(t){var n=Ua(Ua({},t.metadata),{},{url:t.url,imageId:t.url},e);return delete n.instances,n}))),t===u-1&&l()}))},getImageIdsForDisplaySet:function(t){var n=t.images,r=[];return n?(t.images.forEach((function(t){var n=t.NumberOfFrames;if(n>1)for(var a=0;a<n;a++){var o=Ar({instance:t,frame:a,config:e});r.push(o)}else{var i=Ar({instance:t,config:e});r.push(i)}})),r):r},getImageIdsForInstance:function(e){return Ar({instance:e.instance,frame:e.frame})}};return Mr.Z.create(n)}function Ja(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var Ka=Re.ZP.classes.MetadataProvider,Xa=Mt.Z.EVENTS;function Qa(e,t){var n=e.instances[0].Modality,r=t.instances[0].Modality;return"SR"===n?1:"SR"===r?-1:0}function eo(e){e.name;var t,n,r={initialize:function(e){var t=e.params,n=e.query,r=t.StudyInstanceUIDs,a=n.get("StudyInstanceUIDs")||r,o=a&&Array.isArray(a)?a:[a];return o.forEach((function(e){var t=Mt.Z.getStudy(e);t.series=t.series.sort(Qa)})),o},query:{studies:{mapParams:function(){},search:function(e){return Mt.Z.getStudyInstanceUIDs().map((function(e){var t,n=0,r=new Set,a=Mt.Z.getStudy(e);a.series.forEach((function(e){n+=e.instances.length,r.add(e.Modality)}));var o=null==a||null===(t=a.series[0])||void 0===t?void 0:t.instances[0];if(o)return{accession:o.AccessionNumber,date:o.StudyDate,description:o.StudyDescription,mrn:o.PatientID,patientName:{Alphabetic:o.PatientName},studyInstanceUid:o.StudyInstanceUID,time:o.StudyTime,instances:n,modalities:Array.from(r).join("/"),NumInstances:n}}))},processResults:function(){console.debug(" DICOMLocal QUERY processResults")}},series:{search:function(){console.debug(" DICOMLocal QUERY SERIES SEARCH")}},instances:{search:function(){console.debug(" DICOMLocal QUERY instances SEARCH")}}},retrieve:{series:{metaData:function(){console.debug(" DICOMLocal retrieve series metadata")}}},store:{dicom:function(e){var t=mt.ZP.data.datasetToBlob(e),n=URL.createObjectURL(t);window.location.assign(n)}},retrieveSeriesMetadata:(t=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.StudyInstanceUID,r=t.madeInClient,a=void 0!==r&&r,n){e.next=3;break}throw new Error("Unable to query for SeriesMetadata without StudyInstanceUID");case 3:o=Mt.Z.getStudy(n,a),Mt.Z._broadcastEvent(Xa.SERIES_ADDED,{StudyInstanceUID:n,madeInClient:a}),o.series.forEach((function(e){var t=e.SeriesInstanceUID;e.instances.forEach((function(e){var t=e.url,n=e.StudyInstanceUID,r=e.SeriesInstanceUID,a=e.SOPInstanceUID;Ka.addImageIdToUIDs(t,{StudyInstanceUID:n,SeriesInstanceUID:r,SOPInstanceUID:a})})),Mt.Z._broadcastEvent(Xa.INSTANCES_ADDED,{StudyInstanceUID:n,SeriesInstanceUID:t,madeInClient:a})}));case 6:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Ja(o,r,a,i,s,"next",e)}function s(e){Ja(o,r,a,i,s,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)}),getImageIdsForDisplaySet:function(e){var t=this,n=e.images,r=[];return n?(e.images.forEach((function(e){var n=e.NumberOfFrames;if(n>1)for(var a=0;a<n;a++){var o=t.getImageIdsForInstance({instance:e,frame:a});r.push(o)}else{var i=t.getImageIdsForInstance({instance:e});r.push(i)}})),r):r},getImageIdsForInstance:function(e){var t=e.instance,n=(e.frame,t.StudyInstanceUID),r=t.SeriesInstanceUID,a=t.SOPInstanceUID,o=Mt.Z.getInstance(n,r,a);if(o.url)return o.url},deleteStudyMetadataPromise:function(){console.log("deleteStudyMetadataPromise not implemented")}};return Mr.Z.create(r)}var to=function(){return[{name:"dicomweb",type:"webApi",createDataSource:Aa},{name:"dicomjson",type:"jsonApi",createDataSource:Ga},{name:"dicomlocal",type:"localApi",createDataSource:eo}]};function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return io(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var so=K.availableLanguages,co=K.defaultLanguage,lo=K.currentLanguage;function uo(e){var t=e.servicesManager.services.ToolBarService,n=oo((0,r.useState)([]),2),a=n[0],o=n[1],i=oo((0,r.useState)({primaryToolId:"",toggles:{},groups:{}}),2),s=i[0],c=i[1];return(0,r.useEffect)((function(){var e=t.subscribe(t.EVENTS.TOOL_BAR_MODIFIED,(function(){return o(t.getButtonSection("primary"))})).unsubscribe,n=t.subscribe(t.EVENTS.TOOL_BAR_STATE_MODIFIED,(function(){return c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.state))})).unsubscribe;return function(){e(),n()}}),[t]),r.createElement(r.Fragment,null,a.map((function(e,n){var a,o=e.id,i=e.Component,c=e.componentProps;return"toggle"===c.type&&(a=s.toggles[o]),r.createElement(i,no({key:o,id:o},c,{bState:s,isActive:a,onInteraction:function(e){return t.recordInteraction(e)}}))})))}function fo(e){var t=e.extensionManager,n=e.servicesManager,a=e.hotkeysManager,o=e.commandsManager,i=e.leftPanels,s=e.rightPanels,c=e.viewports,l=e.ViewportGridComp,u=oo(se(),1)[0],d=(0,le.s0)(),m=(0,f.$G)().t,p=(0,ne.dd)(),y=p.show,v=p.hide,h=a.hotkeyDefinitions,g=a.hotkeyDefaults,b=[{title:m("Header:About"),icon:"info",onClick:function(){return y({content:ne.tk,title:"About OHIF Viewer",contentProps:{versionNumber:"3.0.8",buildNumber:"0"}})}},{title:m("Header:Preferences"),icon:"settings",onClick:function(){return y({title:m("UserPreferencesModal:User Preferences"),content:ne.i1,contentProps:{hotkeyDefaults:a.getValidHotkeyDefinitions(g),hotkeyDefinitions:h,currentLanguage:lo(),availableLanguages:so,defaultLanguage:co,onCancel:function(){Re.dD.stopRecord(),Re.dD.unpause(),v()},onSubmit:function(e){var t=e.hotkeyDefinitions,n=e.language;K.changeLanguage(n.value),a.setHotkeys(t),v()},onReset:function(){return a.restoreDefaultBindings()},hotkeysModule:Re.dD}})}}];(0,r.useEffect)((function(){return document.body.classList.add("bg-black"),document.body.classList.add("overflow-hidden"),function(){document.body.classList.remove("bg-black"),document.body.classList.remove("overflow-hidden")}}),[]);var S=function(e){var n=t.getModuleEntry(e),r=n.component;return{iconName:n.iconName,iconLabel:n.iconLabel,label:n.label,name:n.name,content:r}},w=i.map(S),E=s.map(S),I=c.map((function(e){return{component:t.getModuleEntry(e.namespace).component,displaySetsToDisplay:e.displaySetsToDisplay}}));return r.createElement("div",null,r.createElement(ne.h4,{menuOptions:b,onClickReturnButton:function(){d("/")},WhiteLabeling:u.whiteLabeling},r.createElement(ne.SV,{context:"Primary Toolbar"},r.createElement("div",{className:"relative flex justify-center"},r.createElement(uo,{servicesManager:n})))),r.createElement("div",{className:"flex flex-row flex-nowrap items-stretch w-full overflow-hidden",style:{height:"calc(100vh - 52px"}},w.length&&r.createElement(ne.SV,{context:"Left Panel"},r.createElement(ne.hs,{side:"left",defaultComponentOpen:w[0].name,childComponents:w})),r.createElement("div",{className:"flex flex-col flex-1 h-full"},r.createElement("div",{className:"flex items-center justify-center flex-1 h-full -mt-1 overflow-hidden bg-black"},r.createElement(ne.SV,{context:"Grid"},r.createElement(l,{servicesManager:n,viewportComponents:I,commandsManager:o})))),E.length&&r.createElement(ne.SV,{context:"Right Panel"},r.createElement(ne.hs,{side:"right",defaultComponentOpen:E[0].name,childComponents:E}))))}fo.propTypes={extensionManager:o().shape({getModuleEntry:o().func.isRequired}).isRequired,commandsManager:o().object,leftPanels:o().array,rightPanels:o().array,children:o().oneOfType([o().node,o().func]).isRequired},fo.defaultProps={leftPanels:[],rightPanels:[]};var mo=fo;function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){go(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bo(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function So(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){bo(o,r,a,i,s,"next",e)}function s(e){bo(o,r,a,i,s,"throw",e)}i(void 0)}))}}function wo(e){return function(e){if(Array.isArray(e))return Oo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Io(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||Io(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(e,t){if(e){if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oo(e,t):void 0}}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Do=Me.ZP.formatDate;function xo(e){var t=e.DisplaySetService,n=e.getImageSrc,a=e.getStudiesForPatientByStudyInstanceUID,o=e.requestDisplaySetCreationForStudy,i=e.dataSource,s=(0,ne.zG)().StudyInstanceUIDs,c=Eo((0,r.useState)("primary"),2),l=c[0],u=c[1],d=Eo((0,r.useState)(wo(s)),2),f=d[0],m=d[1],p=Eo((0,r.useState)([]),2),y=p[0],v=p[1],h=Eo((0,r.useState)([]),2),g=h[0],b=h[1],S=Eo((0,r.useState)({}),2),w=S[0],E=S[1],I=(0,r.useRef)(!0);(0,r.useEffect)((function(){function e(){return(e=So(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:n=e.t0,r=Po(n),o=r.map((function(e){return{studyInstanceUid:e.StudyInstanceUID,date:Do(e.StudyDate),description:e.StudyDescription,modalities:e.ModalitiesInStudy,numInstances:e.NumInstances}})),I.current&&v(o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.forEach((function(t){return function(t){return e.apply(this,arguments)}(t)}))}),[s,a]),(0,r.useEffect)((function(){return t.activeDisplaySets.forEach(function(){var e=So(regeneratorRuntime.mark((function e(r){var a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},o=t.getDisplaySetByUID(r.displaySetInstanceUID),s=i.getImageIdsForDisplaySet(o),!(c=s[Math.floor(s.length/2)])){e.next=9;break}return e.next=7,n(c);case 7:a[r.displaySetInstanceUID]=e.sent,I.current&&E((function(e){return ho(ho({},e),a)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){I.current=!1}}),[]),(0,r.useEffect)((function(){var e=Co(t.activeDisplaySets,w);b(e)}),[w]),(0,r.useEffect)((function(){var e=t.subscribe(t.EVENTS.DISPLAY_SETS_ADDED,(function(e){e.displaySetsAdded.forEach(function(){var e=So(regeneratorRuntime.mark((function e(r){var a,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},o=t.getDisplaySetByUID(r.displaySetInstanceUID),s=i.getImageIdsForDisplaySet(o),!(c=s[Math.floor(s.length/2)])){e.next=9;break}return e.next=7,n(c,r.initialViewport);case 7:a[r.displaySetInstanceUID]=e.sent,I.current&&E((function(e){return ho(ho({},e),a)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),r=t.subscribe(t.EVENTS.DISPLAY_SETS_CHANGED,(function(e){var t=Co(e,w);b(t)}));return function(){e.unsubscribe(),r.unsubscribe()}}),[]);var O=function(e,t,n){var r=[],a=[],o=[];return t.forEach((function(t){var i=n.filter((function(e){return e.StudyInstanceUID===t.studyInstanceUid})),s=Object.assign({},t,{displaySets:i});e.includes(t.studyInstanceUid)?r.push(s):(a.push(s),o.push(s))})),[{name:"primary",label:"Primary",studies:r},{name:"recent",label:"Recent",studies:a},{name:"all",label:"All",studies:o}]}(s,y,g);return r.createElement(ne.eX,{tabs:O,activeTabName:l,expandedStudyInstanceUIDs:f,onClickStudy:function(e){var n=f.includes(e),r=n?wo(f.filter((function(t){return t!==e}))):[].concat(wo(f),[e]);if(m(r),!n){o(t,e,!0)}},onClickTab:function(e){u(e)}})}xo.propTypes={DisplaySetService:o().shape({EVENTS:o().object.isRequired,activeDisplaySets:o().arrayOf(o().object).isRequired,getDisplaySetByUID:o().func.isRequired,subscribe:o().func.isRequired}).isRequired,dataSource:o().shape({getImageIdsForDisplaySet:o().func.isRequired}).isRequired,getImageSrc:o().func.isRequired,getStudiesForPatientByStudyInstanceUID:o().func.isRequired,requestDisplaySetCreationForStudy:o().func.isRequired};var ko=xo;function Po(e){return e.map((function(e){return{AccessionNumber:e.accession,StudyDate:e.date,StudyDescription:e.description,NumInstances:e.instances,ModalitiesInStudy:e.modalities,PatientID:e.mrn,PatientName:e.patientName,StudyInstanceUID:e.studyInstanceUid,StudyTime:e.time}}))}function Co(e,t){var n=[],r=[];return e.forEach((function(e){var a=t[e.displaySetInstanceUID],o=function(e){if(To.includes(e))return"thumbnailNoImage";return"thumbnail"}(e.Modality);("thumbnail"===o?n:r).push({displaySetInstanceUID:e.displaySetInstanceUID,description:e.SeriesDescription||"",seriesNumber:e.SeriesNumber,modality:e.Modality,seriesDate:e.SeriesDate,numInstances:e.numImageFrames,StudyInstanceUID:e.StudyInstanceUID,componentType:o,imageSrc:a,dragData:{type:"displayset",displaySetInstanceUID:e.displaySetInstanceUID}})})),[].concat(n,r)}var To=["SR","SEG","RTSTRUCT","RTPLAN","RTDOSE"];var No=function(e,t){return new Promise((function(n,r){e.loadAndCacheImage(t).then((function(t){var r=document.createElement("canvas");e.renderToCanvas(r,t),n(r.toDataURL())})).catch(r)}))};function Ro(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Mo(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ro(o,r,a,i,s,"next",e)}function s(e){Ro(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ao(){return(Ao=Mo(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.query.studies.search({studyInstanceUid:n});case 4:if(!((r=e.sent)&&r.length&&r[0].mrn)){e.next=7;break}return e.abrupt("return",t.query.studies.search({patientId:r[0].mrn}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jo=function(e,t){return Ao.apply(this,arguments)};var Uo=function(e,t,n,r){t.activeDisplaySets.some((function(e){return e.StudyInstanceUID===n}))||e.retrieveSeriesMetadata({StudyInstanceUID:n,madeInClient:r})};function Lo(e){var t=e.commandsManager,n=e.extensionManager,a=e.servicesManager,o=n.getDataSources()[0],i=jo.bind(null,o),s=function(e){try{var t=e("getCornerstoneLibraries","VIEWER");if(!t)return;var n=t.commandFn().cornerstone;return No.bind(null,n)}catch(e){throw new Error("Required command not found")}}(t.getCommand.bind(t)),c=Uo.bind(null,o);return r.createElement(ko,{DisplaySetService:a.services.DisplaySetService,dataSource:o,getImageSrc:s,getStudiesForPatientByStudyInstanceUID:i,requestDisplaySetCreationForStudy:c})}Lo.propTypes={commandsManager:o().object.isRequired,extensionManager:o().object.isRequired,servicesManager:o().object.isRequired};var _o=Lo;var Vo=function(e,t,n){var r;return function(){var a=this,o=arguments,i=function(){r=null,n||e.apply(a,o)},s=n&&!r;clearTimeout(r),r=setTimeout(i,t),s&&e.apply(a,o)}};function qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bo(e){var t=e.servicesManager.services.MeasurementService,n=qo((0,r.useState)([]),2),a=n[0],o=n[1];return(0,r.useEffect)((function(){var e=Vo(o,100);o(zo(t));var n=t.EVENTS.MEASUREMENT_ADDED,r=t.EVENTS.RAW_MEASUREMENT_ADDED,a=t.EVENTS.MEASUREMENT_UPDATED,i=t.EVENTS.MEASUREMENT_REMOVED,s=t.EVENTS.MEASUREMENTS_CLEARED,c=[];return[n,r,a,i,s].forEach((function(n){c.push(t.subscribe(n,(function(){e(zo(t))})).unsubscribe)})),function(){c.forEach((function(e){e()}))}}),[t]),r.createElement("div",{className:"overflow-x-hidden overflow-y-auto invisible-scrollbar"},r.createElement(ne.wt,{title:"Measurements",amount:a.length,data:a,onClick:function(e){var t=e.id;return alert("Click: ".concat(t))},onEdit:function(e){var t=e.id;return alert("Edit: ".concat(t))}}))}function zo(e){return e.getMeasurements().map((function(t,n){return function(e,t,n){e.id,e.label,e.description;var r=e.referenceStudyUID,a=e.referenceSeriesUID,o=e.SOPInstanceUID,i=Mt.Z.getInstance(r,a,o),s=i.PixelSpacing,c=i.SeriesNumber,l=i.InstanceNumber;return{id:t+1,label:"(empty)",displayText:Ho(e,s,c,l,n)||[],isActive:!1}}(t,n,e.VALUE_TYPES)}))}function Ho(e,t,n,r,a){var o=e.type,i=(e.points,void 0!==t&&Array.isArray(t)&&2===t.length),s=qo(i?t:[1,1],2),c=(s[0],s[1],i?"mm":"px");switch(o){case a.POLYLINE:var l=Zo(e.length,1);return["".concat(l," ").concat(c," (S:").concat(n,", I:").concat(r,")")];case a.BIDIRECTIONAL:var u=e.shortestDiameter,d=e.longestDiameter,f=Zo(u,1),m=Zo(d,1);return["l: ".concat(m," ").concat(c," (S:").concat(n,", I:").concat(r,")"),"s: ".concat(f," ").concat(c)];case a.ELLIPSE:var p=Zo(e.area,1);return["".concat(p," ").concat(c,"2 (S:").concat(n,", I:").concat(r,")")];case a.POINT:var y=e.text;return["".concat(y," (S:").concat(n,", I:").concat(r,")")]}}function Zo(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}Bo.propTypes={servicesManager:o().shape({services:o().shape({MeasurementService:o().shape({getMeasurements:o().func.isRequired,subscribe:o().func.isRequired,EVENTS:o().object.isRequired,VALUE_TYPES:o().object.isRequired}).isRequired}).isRequired}).isRequired};var Wo=function(e){var t=e.commandsManager,n=e.extensionManager,a=e.servicesManager;return[{name:"seriesList",iconName:"group-layers",iconLabel:"Studies",label:"Studies",component:_o.bind(null,{commandsManager:t,extensionManager:n,servicesManager:a})},{name:"measure",iconName:"list-bullets",iconLabel:"Measure",label:"Measurements",component:function(){return r.createElement(Bo,{commandsManager:t,servicesManager:a})}}]},$o=["1.2.840.10008.5.1.4.1.1.1","1.2.840.10008.5.1.4.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.2","1.2.840.10008.5.1.4.1.1.1.2.1","1.2.840.10008.5.1.4.1.1.1.3","1.2.840.10008.5.1.4.1.1.1.3.1","1.2.840.10008.5.1.4.1.1.2","1.2.840.10008.5.1.4.1.1.2.1","1.2.840.10008.5.1.4.1.1.2.2","1.2.840.10008.5.1.4.1.1.3.1","1.2.840.10008.5.1.4.1.1.4","1.2.840.10008.5.1.4.1.1.4.1","1.2.840.10008.5.1.4.1.1.4.3","1.2.840.10008.5.1.4.1.1.4.4","1.2.840.10008.5.1.4.1.1.6.1","1.2.840.10008.5.1.4.1.1.7","1.2.840.10008.5.1.4.1.1.7.1","1.2.840.10008.5.1.4.1.1.7.2","1.2.840.10008.5.1.4.1.1.7.3","1.2.840.10008.5.1.4.1.1.7.4","1.2.840.10008.5.1.4.1.1.12.1","1.2.840.10008.5.1.4.1.1.12.1.1","1.2.840.10008.5.1.4.1.1.12.2","1.2.840.10008.5.1.4.1.1.12.2.1","1.2.840.10008.5.1.4.1.1.13.1.1","1.2.840.10008.5.1.4.1.1.13.1.2","1.2.840.10008.5.1.4.1.1.13.1.3","1.2.840.10008.5.1.4.1.1.13.1.4","1.2.840.10008.5.1.4.1.1.13.1.5","1.2.840.10008.5.1.4.1.1.14.1","1.2.840.10008.5.1.4.1.1.14.2","1.2.840.10008.5.1.4.1.1.20","1.2.840.10008.5.1.4.1.1.77.1.1","1.2.840.10008.5.1.4.1.1.77.1.1.1","1.2.840.10008.5.1.4.1.1.77.1.2","1.2.840.10008.5.1.4.1.1.77.1.2.1","1.2.840.10008.5.1.4.1.1.77.1.3","1.2.840.10008.5.1.4.1.1.77.1.4","1.2.840.10008.5.1.4.1.1.77.1.4.1","1.2.840.10008.5.1.4.1.1.77.1.5.1","1.2.840.10008.5.1.4.1.1.77.1.5.2","1.2.840.10008.5.1.4.1.1.77.1.5.4","1.2.840.10008.5.1.4.1.1.77.1.6","1.2.840.10008.5.1.4.1.1.128","1.2.840.10008.5.1.4.1.1.130","1.2.840.10008.5.1.4.1.1.128.1","1.2.840.10008.5.1.4.1.1.481.1"],Yo=n(11875),Go="org.ohif.default",Jo="stack",Ko=function(e){return e.NumberOfFrames>1},Xo=function(e){var t=e[0],n=new Yo.Z(e);n.setAttributes({displaySetInstanceUID:n.uid,SeriesDate:t.SeriesDate,SeriesTime:t.SeriesTime,SeriesInstanceUID:t.SeriesInstanceUID,StudyInstanceUID:t.StudyInstanceUID,SeriesNumber:t.SeriesNumber||0,FrameRate:t.FrameTime,SeriesDescription:t.SeriesDescription||"",Modality:t.Modality,isMultiFrame:Ko(t),numImageFrames:e.length,SOPClassHandlerId:"".concat(Go,".sopClassHandlerModule.").concat(Jo)});return n.sortBy((function(e,t){return(parseInt(e.InstanceNumber)||0)-(parseInt(t.InstanceNumber)||0)})),n};function Qo(e){if(!e||!e.length)throw new Error("No instances were provided");var t=[],n=function(e){var t=new Set;return e.forEach((function(e){t.add(e.SOPClassUID)})),Array.from(t)}(e),r=[];if(e.forEach((function(e){var a,o,i;((a=e.SOPClassUID)&&-1!==$o.indexOf(a)||e.Rows)&&(Ko(e)?((o=Xo([e])).setAttributes({sopClassUids:n,isClip:!0,numImageFrames:e.NumberOfFrames,instanceNumber:e.InstanceNumber,acquisitionDatetime:e.AcquisitionDateTime}),t.push(o)):"CR"===(i=e.modality)||"MG"===i||"DX"===i?((o=Xo([e])).setAttributes({sopClassUids:n,instanceNumber:e.InstanceNumber,acquisitionDatetime:e.AcquisitionDateTime}),t.push(o)):r.push(e))})),r.length){var a=Xo(r);a.setAttribute("studyInstanceUid",e[0].StudyInstanceUID),a.setAttributes({sopClassUids:n}),t.push(a)}return t}var ei=["1.2.840.10008.5.1.4.1.1.1","1.2.840.10008.5.1.4.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.2","1.2.840.10008.5.1.4.1.1.1.2.1","1.2.840.10008.5.1.4.1.1.1.3","1.2.840.10008.5.1.4.1.1.1.3.1","1.2.840.10008.5.1.4.1.1.2","1.2.840.10008.5.1.4.1.1.2.1","1.2.840.10008.5.1.4.1.1.2.2","1.2.840.10008.5.1.4.1.1.3.1","1.2.840.10008.5.1.4.1.1.4","1.2.840.10008.5.1.4.1.1.4.1","1.2.840.10008.5.1.4.1.1.4.3","1.2.840.10008.5.1.4.1.1.4.4","1.2.840.10008.5.1.4.1.1.6.1","1.2.840.10008.5.1.4.1.1.7","1.2.840.10008.5.1.4.1.1.7.1","1.2.840.10008.5.1.4.1.1.7.2","1.2.840.10008.5.1.4.1.1.7.3","1.2.840.10008.5.1.4.1.1.7.4","1.2.840.10008.5.1.4.1.1.12.1","1.2.840.10008.5.1.4.1.1.12.1.1","1.2.840.10008.5.1.4.1.1.12.2","1.2.840.10008.5.1.4.1.1.12.2.1","1.2.840.10008.5.1.4.1.1.13.1.1","1.2.840.10008.5.1.4.1.1.13.1.2","1.2.840.10008.5.1.4.1.1.13.1.3","1.2.840.10008.5.1.4.1.1.13.1.4","1.2.840.10008.5.1.4.1.1.13.1.5","1.2.840.10008.5.1.4.1.1.14.1","1.2.840.10008.5.1.4.1.1.14.2","1.2.840.10008.5.1.4.1.1.20","1.2.840.10008.5.1.4.1.1.77.1.1","1.2.840.10008.5.1.4.1.1.77.1.1.1","1.2.840.10008.5.1.4.1.1.77.1.2","1.2.840.10008.5.1.4.1.1.77.1.2.1","1.2.840.10008.5.1.4.1.1.77.1.3","1.2.840.10008.5.1.4.1.1.77.1.4","1.2.840.10008.5.1.4.1.1.77.1.4.1","1.2.840.10008.5.1.4.1.1.77.1.5.1","1.2.840.10008.5.1.4.1.1.77.1.5.2","1.2.840.10008.5.1.4.1.1.77.1.5.4","1.2.840.10008.5.1.4.1.1.77.1.6","1.2.840.10008.5.1.4.1.1.128","1.2.840.10008.5.1.4.1.1.130","1.2.840.10008.5.1.4.1.1.128.1","1.2.840.10008.5.1.4.1.1.481.1"];var ti=function(){return[{name:Jo,sopClassUids:ei,getDisplaySetsFromSeries:Qo}]},ni={id:"PET/CT",locked:!0,hasUpdatedPriorsInformation:!1,name:"PET/CT",createdDate:"2021-02-23T18:32:42.849Z",modifiedDate:"2021-02-23T18:32:42.849Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"wauZK2QNEfDPwcAQo",weight:1,attribute:"StudyInstanceUID",constraint:{equals:{value:"1.3.6.1.4.1.25403.345050719074.3824.20170125112931.11"}},required:!0}],stages:[{id:"hYbmMy3b7pz7GLiaT",name:"oneByTwo",viewportStructure:{type:"grid",properties:{rows:2,columns:2}},viewports:[{viewportSettings:[{options:{voi:{windowWidth:500,windowCenter:500}},commandName:"",type:"viewport"}],imageMatchingRules:[],seriesMatchingRules:[{id:"vSjk7NCYjtdS3XZAw",weight:1,attribute:"SeriesNumber",constraint:{equals:{value:"4"}},required:!1}],studyMatchingRules:[]},{viewportSettings:[{options:{invert:!0},commandName:"",type:"viewport"}],imageMatchingRules:[],seriesMatchingRules:[{id:"GPEYqFLv2dwzCM322",weight:1,attribute:"SeriesNumber",constraint:{equals:{value:"1"}},required:!1}],studyMatchingRules:[]},{viewportSettings:[{options:{invert:!0},commandName:"",type:"viewport"}],imageMatchingRules:[],seriesMatchingRules:[{id:"GPEYqFLv2dwzCM322",weight:1,attribute:"SeriesNumber",constraint:{equals:{value:"6"}},required:!1}],studyMatchingRules:[]},{viewportSettings:[{options:{invert:!0},commandName:"",type:"viewport"}],imageMatchingRules:[],seriesMatchingRules:[{id:"GPEYqFLv2dwzCM322",weight:1,attribute:"SeriesDescription",constraint:{contains:{value:"Corrected"}},required:!1},{id:"GPEYqFLv2dwzCM322",weight:2,attribute:"SeriesDescription",constraint:{doesNotContain:{value:"Uncorrected"}},required:!1}],studyMatchingRules:[]}],createdDate:"2021-02-23T18:32:42.850Z"}],numberOfPriorsReferenced:0};var ri=function(){return[{name:"petCT",protocols:[ni]}]};function ai(){return r.createElement("span",{className:"self-center w-1 h-8 mx-2 border-l border-common-dark"})}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ii(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var si=function(){var e=oi((0,r.useState)(!1),2),t=e[0],n=e[1],a=oi((0,ne.O_)(),2),o=(a[0],a[1]),i=function(){t&&n(!1)};(0,r.useEffect)((function(){return window.addEventListener("click",i),function(){window.removeEventListener("click",i)}}),[t]),(0,r.useEffect)((function(){return function(){o.setLayout({numCols:1,numRows:1})}}),[]);var s=t?ne.OF:null;return r.createElement(ne.hA,{id:"Layout",label:"Grid Layout",icon:"tool-layout",onInteraction:function(){return n(!t)},dropdownContent:null!==s&&r.createElement(s,{onSelection:function(e){var t=e.numRows,n=e.numCols;o.setLayout({numCols:n,numRows:t})}}),isActive:t,type:"toggle"})},ci=ne.aW;var li=function(e){var t=e.servicesManager,n=(e.commandsManager,t.services),r=n.MeasurementService,a=n.ViewportGridService,o=n.ToolBarService,i=n.HangingProtocolService,s=n.CineService,c={clearMeasurements:function(){r.clear()},toggleCine:function(){var e=a.getState().viewports,t=s.getState().isCineEnabled;s.setIsCineEnabled(!t),o.setButton("Cine",{props:{isActive:!t}}),e.forEach((function(e,t){return s.setCine({id:t,isPlaying:!1})}))},nextStage:function(){i.nextProtocolStage()},previousStage:function(){i.previousProtocolStage()}};return{actions:c,definitions:{clearMeasurements:{commandFn:c.clearMeasurements,storeContexts:[],options:{}},toggleCine:{commandFn:c.toggleCine,storeContexts:[],options:{}},nextStage:{commandFn:c.nextStage,storeContexts:[],options:{}},previousStage:{commandFn:c.previousStage,storeContexts:[],options:{}}},defaultContext:"DEFAULT"}},ui={id:Go,getDataSourcesModule:to,getHangingProtocolModule:ri,getLayoutTemplateModule:function(e){var t=e.servicesManager,n=e.extensionManager,r=e.commandsManager,a=e.hotkeysManager;return[{name:"viewerLayout",id:"viewerLayout",component:function(e){return mo(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({servicesManager:t,extensionManager:n,commandsManager:r,hotkeysManager:a},e))}}]},getPanelModule:Wo,getSopClassHandlerModule:ti,getToolbarModule:function(e){var t=e.commandsManager,n=e.servicesManager.services.ToolBarService;return[{name:"ohif.divider",defaultComponent:ai,clickHandler:function(){}},{name:"ohif.action",defaultComponent:ne.hA,clickHandler:function(){}},{name:"ohif.radioGroup",defaultComponent:ne.hA,clickHandler:function(){}},{name:"ohif.splitButton",defaultComponent:ci,clickHandler:function(){}},{name:"ohif.layoutSelector",defaultComponent:si,clickHandler:function(e,t,n){}},{name:"ohif.toggle",defaultComponent:ne.hA,requiredConfig:[],optionalConfig:[],requiredProps:[],optionalProps:[],clickHandler:function(e,r,a){var o=r.props,i=n.getButtons(),s=i[r.id];s.props.isActive=!s.props.isActive,t.runCommand(o.commandName,o.commandOptions),n.setButtons(i)}}]},getCommandsModule:function(e){var t=e.servicesManager,n=e.commandsManager;return li({servicesManager:t,commandsManager:n})}},di=n(29684),fi=n.n(di),mi=n(82656),pi=n.n(mi),yi=n(32005),vi=n.n(yi);function hi(e){return function(e){if(Array.isArray(e))return gi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bi={touch:[pi().PanMultiTouchTool,pi().ZoomTouchPinchTool],annotations:[pi().ArrowAnnotateTool,pi().BidirectionalTool,pi().LengthTool,pi().AngleTool,pi().FreehandRoiTool,pi().EllipticalRoiTool,pi().DragProbeTool,pi().RectangleRoiTool],other:[pi().PanTool,pi().ZoomTool,pi().WwwcTool,pi().WwwcRegionTool,pi().MagnifyTool,pi().StackScrollTool,pi().StackScrollMouseWheelTool,pi().OverlayTool]};var Si=n(11539),wi=n.n(Si),Ei=n(25685),Ii=n.n(Ei),Oi=Re.ZP.log;var Di=n(43264),xi=n.n(Di),ki=!1;function Pi(e){var t;et().external.cornerstone=fi(),et().external.dicomParser=xi(),et().configure({beforeSend:function(t){var n=e.getAuthorizationHeader(),r={accept:"multipart/related; type=application/octet-stream"};return n&&n.Authorization&&(r.Authorization=n.Authorization),r},errorInterceptor:function(e){An.Z.getHTTPErrorHandler(e)}}),t={maxWebWorkers:Math.max(navigator.hardwareConcurrency-1,1),startWebWorkersOnDemand:!0,taskConfiguration:{decodeTask:{initializeCodecsOnStartup:!1,usePDFJS:!1,strict:!1}}},ki||(et().webWorkerManager.initialize(t),ki=!0)}var Ci=pi().globalImageIdSpecificToolStateManager;var Ti=["Length","EllipticalRoi","Bidirectional","ArrowAnnotate"];function Ni(e){var t=[];return Object.keys(e).map((function(n){if(["start","end"].includes(n)){var r={};e[n].x&&(r.x=e[n].x),e[n].y&&(r.y=e[n].y),t.push(r)}})),t}function Ri(e){var t=fi().getEnabledElement(e).image.imageId,n=fi().metaData.get("instance",t);return{SOPInstanceUID:n.SOPInstanceUID,FrameOfReferenceUID:n.FrameOfReferenceUID,SeriesInstanceUID:n.SeriesInstanceUID,StudyInstanceUID:n.StudyInstanceUID}}var Mi={toAnnotation:function(e,t){},toMeasurement:function(e,t,n){var r,a=e.element,o=e.measurementData,i=e.toolType||e.toolName||o.toolType;if(r=i,!Ti.includes(r))throw new Error("Tool not supported");var s=Ri(a),c=s.SOPInstanceUID,l=s.FrameOfReferenceUID,u=s.SeriesInstanceUID,d=s.StudyInstanceUID,f=t.getDisplaySetForSOPInstanceUID(c,u);return{id:o.id,SOPInstanceUID:c,FrameOfReferenceUID:l,referenceSeriesUID:u,referenceStudyUID:d,displaySetInstanceUID:f.displaySetInstanceUID,label:o.label,description:o.description,unit:o.unit,length:o.length,type:n(i),points:Ni(o.handles)}}},Ai={toAnnotation:function(e,t){},toMeasurement:function(e,t,n){var r,a=e.element,o=e.measurementData,i=e.toolType||e.toolName||o.toolType;if(r=i,!Ti.includes(r))throw new Error("Tool not supported");var s=Ri(a),c=s.SOPInstanceUID,l=s.FrameOfReferenceUID,u=s.SeriesInstanceUID,d=s.StudyInstanceUID,f=t.getDisplaySetForSOPInstanceUID(c,u),m=o.handles,p=[m.start,m.end],y=[m.perpendicularStart,m.perpendicularEnd];return{id:o.id,SOPInstanceUID:c,FrameOfReferenceUID:l,referenceSeriesUID:u,referenceStudyUID:d,displaySetInstanceUID:f.displaySetInstanceUID,label:o.label,description:o.description,unit:o.unit,shortestDiameter:o.shortestDiameter,longestDiameter:o.longestDiameter,type:n(i),points:{longAxis:p,shortAxis:y}}}},ji={toAnnotation:function(e,t){},toMeasurement:function(e,t,n){var r,a=e.element,o=e.measurementData,i=e.toolType||e.toolName||o.toolType;if(r=i,!Ti.includes(r))throw new Error("Tool not supported");var s=Ri(a),c=s.SOPInstanceUID,l=s.FrameOfReferenceUID,u=s.SeriesInstanceUID,d=s.StudyInstanceUID,f=t.getDisplaySetForSOPInstanceUID(c,u);return[].push(o.handles),{id:o.id,SOPInstanceUID:c,FrameOfReferenceUID:l,referenceSeriesUID:u,referenceStudyUID:d,displaySetInstanceUID:f.displaySetInstanceUID,label:o.text,description:o.description,unit:o.unit,text:o.text,type:n(i),points:Ni(o.handles)}}},Ui={toAnnotation:function(e,t){},toMeasurement:function(e,t,n){var r,a=e.element,o=e.measurementData,i=e.toolType||e.toolName||o.toolType;if(r=i,!Ti.includes(r))throw new Error("Tool not supported");var s,c,l=Ri(a),u=l.SOPInstanceUID,d=l.FrameOfReferenceUID,f=l.SeriesInstanceUID,m=l.StudyInstanceUID,p=t.getDisplaySetForSOPInstanceUID(u,f),y=o.cachedStats,v=o.handles,h=v.start,g=v.end,b=Math.abs(h.x-g.x)/2,S=Math.abs(h.y-g.y)/2,w=[],E={x:(h.x+g.x)/2,y:(h.y+g.y)/2};if(b>S?(w.push({x:E.x-b,y:E.y}),w.push({x:E.x+b,y:E.y}),w.push({x:E.x,y:E.y-S}),w.push({x:E.x,y:E.y+S})):(w.push({x:E.x,y:E.y-S}),w.push({x:E.x,y:E.y+S}),w.push({x:E.x-b,y:E.y}),w.push({x:E.x+b,y:E.y})),y&&y.meanStdDevSUV&&0!==y.meanStdDevSUV.mean){var I=y.meanStdDevSUV;s=I.mean,c=I.stdDev}return{id:o.id,SOPInstanceUID:u,FrameOfReferenceUID:d,referenceSeriesUID:f,referenceStudyUID:m,displaySetInstanceUID:p.displaySetInstanceUID,label:o.label,description:o.description,unit:o.unit,area:y&&y.area,mean:y&&y.mean,stdDev:y&&y.stdDev,meanSUV:s,stdDevSUV:c,type:n(i),points:w}}},Li=function(e,t){var n=function(t){var n=e.VALUE_TYPES,r=n.POLYLINE,a=n.ELLIPSE,o=n.POINT;return{Length:r,EllipticalRoi:a,Bidirectional:n.BIDIRECTIONAL,ArrowAnnotate:o}[t]};return{Length:{toAnnotation:Mi.toAnnotation,toMeasurement:function(e){return Mi.toMeasurement(e,t,n)},matchingCriteria:[{valueType:e.VALUE_TYPES.POLYLINE,points:2}]},Bidirectional:{toAnnotation:Ai.toAnnotation,toMeasurement:function(e){return Ai.toMeasurement(e,t,n)},matchingCriteria:[{valueType:e.VALUE_TYPES.POLYLINE,points:2},{valueType:e.VALUE_TYPES.POLYLINE,points:2}]},ArrowAnnotate:{toAnnotation:ji.toAnnotation,toMeasurement:function(e){return ji.toMeasurement(e,t,n)},matchingCriteria:[{valueType:e.VALUE_TYPES.POINT,points:1}]},EllipticalRoi:{toAnnotation:Ui.toAnnotation,toMeasurement:function(e){return Ui.toMeasurement(e,t,n)},matchingCriteria:[{valueType:e.VALUE_TYPES.ELLIPSE}]}}},_i={DEFAULT_CONTEXT:"ACTIVE_VIEWPORT::CORNERSTONE",enabledElements:{}},Vi=function(e){return _i.enabledElements[e]};function qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(n),!0).forEach((function(t){Bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o="enter-annotation",i=t?a?t.text:t.label:"",s=function(t){var r=t.action,a=t.value;switch(r.id){case"save":n(a.label,r.id);break;case"cancel":n("",r.id)}e.dismiss({id:o})};e&&e.create({id:o,centralize:!0,isDraggable:!1,showOverlay:!0,content:ne.Vq,contentProps:{title:"Enter your annotation",value:{label:i},noCloseButton:!0,onClose:function(){return e.dismiss({id:o})},actions:[{id:"cancel",text:"Cancel",type:"primary"},{id:"save",text:"Save",type:"secondary"}],onSubmit:s,body:function(e){var t=e.value,n=e.setValue;return r.createElement("div",{className:"p-4 bg-primary-dark"},r.createElement(ne.II,{autoFocus:!0,className:"mt-2 bg-black border-primary-main",type:"text",containerClassName:"mr-2",value:t.label,onChange:function(e){e.persist(),n((function(t){return Fi(Fi({},t),{},{label:e.target.value})}))},onKeyPress:function(e){"Enter"===e.key&&s({value:t,action:{id:"save"}})}}))}}})};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wi=!1,$i=pi().globalImageIdSpecificToolStateManager,Yi=["Angle","ArrowAnnotate","Bidirectional","Length","FreehandMouse","EllipticalRoi","CircleRoi","RectangleRoi","SRLength","SRBidirectional","SRArrowAnnotate","SREllipticalRoi"],Gi=function(){return fi().getEnabledElements().forEach((function(e){var t=e.element;return fi().updateImage(t)}))};function Ji(e){var t=e.servicesManager,n=e.commandsManager,r=e.configuration,a=t.services,o=a.UIDialogService,i=a.MeasurementService,s=a.DisplaySetService,c=(a.ToolBarService,a.UserAuthenticationService),l=function(){var e=[];return Object.keys(bi).forEach((function(t){return e.push.apply(e,hi(bi[t]))})),e}();console.log(t.services);var u=Ki(i,s),d=function(e){if(o){Wi=!0,o.dismiss({id:"context-menu"}),o.create({id:"context-menu",isDraggable:!1,preservePosition:!1,defaultPosition:Qi(e.detail),content:ne.hd,onClickOutside:function(){o.dismiss({id:"context-menu"}),Wi=!1},contentProps:{onGetMenuItems:function(t){var r=e.detail,a=r.element,o=r.currentPoints,i=n.runCommand("getNearbyToolData",{element:a,canvasCoordinates:o.canvas,availableToolTypes:Yi}),s=[];return i&&t.forEach((function(e){e.value=i,s.push(e)})),s},eventData:e.detail,onDelete:function(e){var t=e.value,n=t.tool;t.toolType;if(n.id)u.remove(n.id);else{var r=pi().globalImageIdSpecificToolStateManager.toolState;Object.keys(r).forEach((function(e){Object.keys(r[e]).forEach((function(t){for(var a=r[e][t].data.length,o=0;o<a;o++){var i=r[e][t].data[o];n.uuid===i.uuid&&(r[e][t].data[o]=null,delete r[e][t].data[o],r[e][t].data.splice(o,1))}}))})),console.log(pi().store.state)}Gi(),Wi=!1},onClose:function(){Wi=!1,o.dismiss({id:"context-menu"})},onSetLabel:function(e){var t=e.value.tool,n=i.getMeasurement(t.id);zi(o,n,(function(e,t){if("cancel"!==t){var r=Object.assign({},n,{label:e});i.update(r.id,r,!0)}}),!1),Wi=!1}}})}else console.warn("Unable to show dialog; no UI Dialog Service available.")},f=function(e){o?o.create({eventData:e.detail,content:ne.hd,contentProps:{isTouchEvent:!0}}):console.warn("Unable to show dialog; no UI Dialog Service available.")},m=function(){o?(Wi=!1,o.dismiss({id:"context-menu"})):console.warn("Unable to show dialog; no UI Dialog Service available.")},p=function(e){(3===e.detail.event.which?d:m)(e)},y=function(e){Wi&&m()};var v=r.csToolsConfig,h=Re.ZP.classes.MetadataProvider;fi().metaData.addProvider(h.get.bind(h),9999),Pi(c),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.cornerstone=fi(),window.cornerstoneTools=pi(),pi().external.cornerstone=fi(),pi().external.Hammer=wi(),pi().external.cornerstoneMath=Ii(),pi().init(e),pi().loadHandlerManager.setErrorLoadingHandler((function(e,t,n){throw Oi.error(t),n}));var t="Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif";pi().textStyle.setFont("16px ".concat(t)),pi().toolStyle.setToolWidth(2),pi().toolColors.setToolColor("rgb(255, 255, 0)"),pi().toolColors.setActiveColor("rgb(0, 255, 0)"),pi().store.state.touchProximity=40,pi().stackPrefetch.setConfiguration({maxImagesToPrefetch:1/0,preserveExistingPool:!1,maxSimultaneousRequests:20})}(v||{globalToolSyncEnabled:!1,showSVGCursors:!1,autoResizeViewports:!1});document.addEventListener("ohif-cornerstone-enabled-element-event",(function(e){var t=e.detail,n=t.context;!function(e,t,n){var r=n||_i.DEFAULT_CONTEXT;_i.enabledElements[e]={element:t,context:r}}(t.viewportIndex,t.enabledElement,n)})),fi().events.addEventListener(fi().EVENTS.ELEMENT_ENABLED,function(e,t){var n=t.detail.element;!function(e,t,n,r){var a=function(e){return{ArrowAnnotate:{configuration:{getTextCallback:function(t,n){return zi(e,null,t)},changeTextCallback:function(t,n,r){return zi(e,t,r)},allowEmptyLabel:!0}},DragProbe:{defaultStrategy:"minimal"}}}(e);n.forEach((function(e){var n=(new e).name,o=(r.tools||{})[n]||{},i=a[n]||{},s=vi()(i,function(e,t,n){var r=bi.annotations.filter((function(e){return!["RectangleRoiTool","EllipticalRoiTool"].includes(e.name)})),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){Zi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);!1!==e.hideHandles&&r.includes(n)&&(t.configuration?(a.configuration.drawHandlesOnHover=!0,a.configuration.hideHandlesIfMoving=!0):a.configuration={drawHandlesOnHover:!0,hideHandlesIfMoving:!0});return a}(r,o,e));pi().addToolForElement(t,e,s)}))}(o,n,e,r),n.addEventListener(pi().EVENTS.TOUCH_PRESS,f),n.addEventListener(pi().EVENTS.MOUSE_CLICK,p),n.addEventListener(fi().EVENTS.NEW_IMAGE,y)}.bind(null,l)),fi().events.addEventListener(fi().EVENTS.ELEMENT_DISABLED,(function(e){var t=e.detail.element;t.removeEventListener(pi().EVENTS.TOUCH_PRESS,f),t.removeEventListener(pi().EVENTS.MOUSE_CLICK,p),t.removeEventListener(fi().EVENTS.NEW_IMAGE,y)}))}var Ki=function(e,t){var n=function(e,t){var n=Li(e,t),r=n.Length,a=n.Bidirectional,o=n.EllipticalRoi,i=n.ArrowAnnotate,s=e.createSource("CornerstoneTools","4");return e.addMapping(s,"Length",r.matchingCriteria,r.toAnnotation,r.toMeasurement),e.addMapping(s,"Bidirectional",a.matchingCriteria,a.toAnnotation,a.toMeasurement),e.addMapping(s,"EllipticalRoi",o.matchingCriteria,o.toAnnotation,o.toMeasurement),e.addMapping(s,"ArrowAnnotate",i.matchingCriteria,i.toAnnotation,i.toMeasurement),s}(e,t);Xi(e,n);var r=n.addOrUpdate,a=n.remove,o=fi().EVENTS.ELEMENT_ENABLED;return fi().events.addEventListener(o,(function(t){var n=e.EVENTS,o=n.MEASUREMENTS_CLEARED,i=n.MEASUREMENT_UPDATED;e.subscribe(o,(function(){$i.restoreToolState({}),Gi()})),e.subscribe(i,(function(e){var t=e.source,n=e.measurement,r=e.notYetUpdatedAtSource,a=n.id,o=n.label;if("CornerstoneTools"!=t.name||!1!==r){var i=function(e){for(var t=Ci.saveToolState(),n=Object.keys(t),r=0;r<n.length;r++)for(var a=t[n[r]],o=Object.keys(a),i=0;i<o.length;i++){var s=a[o[i]].data;if(s)for(var c=0;c<s.length;c++){var l=s[c];if(l.id===e)return l}}}(a);i&&(i.label=o,i.hasOwnProperty("text")&&(i.text=o),Gi())}}));var s=t.detail.element,c=pi().EVENTS.MEASUREMENT_COMPLETED,l=pi().EVENTS.MEASUREMENT_MODIFIED,u=pi().EVENTS.MEASUREMENT_REMOVED;s.addEventListener(c,(function(e){console.log("CSTOOLS::addOrUpdate",e,e.detail);try{var t=e.detail,n=t.toolName,a=t.toolType,o=t.measurementData,i=n||o.toolType||a,s=r(i,t);s&&(o.id=s)}catch(e){console.warn("Failed to add measurement:",e)}})),s.addEventListener(l,(function(e){try{if(!e.detail.measurementData.id)return;var t=e.detail,n=t.toolName,a=t.toolType,o=t.measurementData,i=n||o.toolType||a;t.id=e.detail.measurementData.id,r(i,t)}catch(e){console.warn("Failed to update measurement:",e)}})),s.addEventListener(u,(function(e){console.log("~~ removeEvt",e);try{e.detail.measurementData.id&&a(e.detail.measurementData.id)}catch(e){console.warn("Failed to remove measurement:",e)}}))})),n},Xi=function(e,t,n){var r,a=e.EVENTS,o=a.MEASUREMENT_REMOVED,i=a.RAW_MEASUREMENT_ADDED,s=(t.id,e.VALUE_TYPES),c=s.POLYLINE,l=s.ELLIPSE,u=s.POINT,d=s.BIDIRECTIONAL,f=(Zi(r={},c,"Length"),Zi(r,l,"EllipticalRoi"),Zi(r,d,"Bidirectional"),Zi(r,u,"ArrowAnnotate"),r);e.subscribe(i,(function(e){e.source;var t,n,r=e.measurement,a=e.data,o=e.dataSource,i=r.referenceStudyUID,s=r.referenceSeriesUID,c=r.SOPInstanceUID;try{t=f[r.type]}catch(e){throw Error("Cannot add tool to cornerstone tools")}if(a.imageId)n=a.imageId;else{var l={StudyInstanceUID:i,SeriesInstanceUID:s,SOPInstanceUID:c};n=o.getImageIdsForInstance({instance:l})}var u=cornerstoneTools.globalImageIdSpecificToolStateManager.saveToolState();void 0===u[n]&&(u[n]={});var d=u[n];void 0===d[t]&&(d[t]={data:[]}),d[t].data.push(a)})),e.subscribe(o,(function(e){e.source;var t=e.measurement,n=$i.saveToolState();Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(r){for(var a=n[e][r],o=a.data.length-1;o>=0;){a.data[o].id===t&&a.data.splice(o,1),o--}}))}))}))},Qi=function(e){return{x:e&&e.currentPoints.client.x||0,y:e&&e.currentPoints.client.y||0}};var es=512,ts=1e4,ns=function(e){var t=e.onClose,n=e.activeViewportIndex,a=Vi(n),o=null==a?void 0:a.element;return r.createElement(ne.mQ,{onClose:t,minimumSize:100,maximumSize:ts,defaultSize:es,canvasClass:"cornerstone-canvas",activeViewport:o,enableViewport:function(e){e&&fi().enable(e)},disableViewport:function(e){e&&fi().disable(e)},updateViewportPreview:function(e,t,n){return new Promise((function(r){fi().fitToWindow(e),e.addEventListener("cornerstoneimagerendered",(function a(o){var i=fi().getEnabledElement(o.target).element,s="image/"+n,c=t.toDataURL(s,1),l=i.offsetHeight,u=i.offsetWidth;if(l>es||u>es){var d=es/Math.max(l,u);u*=d,l*=d}r({dataUrl:c,width:l,height:u}),e.removeEventListener("cornerstoneimagerendered",a)}))}))},loadImage:function(e,t,n,r){return new Promise((function(a){if(e&&t){var o=fi().getEnabledElement(e),i=Object.assign({},o.viewport);delete i.scale,i.translation={x:0,y:0},fi().loadImage(o.image.imageId).then((function(e){fi().displayImage(t,e),fi().setViewport(t,i),fi().resize(t,!0);var o=Math.min(n||e.width,ts),s=Math.min(r||e.height,ts);a({image:e,width:o,height:s})}))}}))},toggleAnnotations:function(e,t){pi().store.state.tools.forEach((function(n){var r=n.name;e?pi().setToolEnabledForElement(t,r):pi().setToolDisabledForElement(t,r)}))},downloadBlob:function(e,t,n,r){var a="".concat(e,".").concat(t),o="image/".concat(t);if(r.msToBlob&&"jpeg"===t){var i=r.toDataURL(o,1),s=Me.ZP.b64toBlob(i.replace("data:image/jpeg;base64,",""),o);return window.navigator.msSaveBlob(s,a)}n.querySelector("canvas").toBlob((function(e){var t=window.URL||window.webkitURL,n=document.createElement("a");n.href=t.createObjectURL(e),n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}})};ns.propTypes={onClose:o().func,activeViewportIndex:o().number.isRequired};var rs=ns,as=pi().import("util/scroll"),os=(Re.ZP.utils.studyMetadataManager,new(pi().Synchronizer)(fi().EVENTS.NEW_IMAGE,pi().stackImagePositionSynchronizer)),is=new(pi().Synchronizer)(fi().EVENTS.IMAGE_RENDERED,pi().panZoomSynchronizer);function ss(e){var t=e.detail.element;os.add(t)}function cs(e){var t=e.detail.element;os.remove(t),is.remove(t)}var ls=function(e){var t=e.servicesManager,n=e.commandsManager,r=t.services.ViewportGridService;function a(){var e=r.getState().activeViewportIndex;return(Vi(e)||{}).element}var o={getCornerstoneLibraries:function(){return{cornerstone:fi(),cornerstoneTools:pi()}},rotateViewport:function(e){var t=e.rotation,n=a();if(n){var r=fi().getViewport(n);r.rotation+=t,fi().setViewport(n,r)}},flipViewportHorizontal:function(){var e=a();if(e){var t=fi().getViewport(e);t.hflip=!t.hflip,fi().setViewport(e,t)}},flipViewportVertical:function(){var e=a();if(e){var t=fi().getViewport(e);t.vflip=!t.vflip,fi().setViewport(e,t)}},scaleViewport:function(e){var t=e.direction,n=a(),r=.15*t;if(n)if(r){var o=fi().getViewport(n);o.scale+=r,fi().setViewport(n,o)}else fi().fitToWindow(n)},resetViewport:function(){var e=a();e&&fi().reset(e)},toggleSynchronizer:function(e){var t=e.toggledState,n=[os];n.forEach((function(e){e.enabled=t}));var r=function(){fi().events.removeEventListener(fi().EVENTS.ELEMENT_ENABLED,ss),fi().events.removeEventListener(fi().EVENTS.ELEMENT_DISABLED,cs)};return!0===t?(fi().events.addEventListener(fi().EVENTS.ELEMENT_ENABLED,ss),fi().events.addEventListener(fi().EVENTS.ELEMENT_DISABLED,cs)):r(),fi().getEnabledElements().map((function(e){n.forEach((function(t){t.remove(e.element),t.add(e.element)}))})),r},invertViewport:function(e){var t,n=e.element;if(t=void 0===n?a():n){var r=fi().getViewport(t);r.invert=!r.invert,fi().setViewport(t,r)}},cancelMeasurement:function(){var e=a();e&&((0,pi().getModule("manipulatorState").setters.cancelActiveManipulatorsForElement)(e),fi().updateImage(e))},setToolActive:function(e){var t=e.toolName;t||console.warn("No toolname provided to setToolActive command");for(var a=(r.getState()||{viewports:[]}).viewports,o=0;o<a.length;o++){if(void 0!==a[o].displaySetInstanceUID){var i=Vi(o);"ACTIVE_VIEWPORT::CORNERSTONE"===i.context?pi().setToolActiveForElement(i.element,t,{mouseButtonMask:1}):n.runCommand("setToolActive",{element:i.element,toolName:t},i.context)}}},clearAnnotations:function(){var e=a();if(e){var t=(fi().getEnabledElement(e)||{}).enabledElement;if(t&&t.image){var n=pi().globalImageIdSpecificToolStateManager.toolState;if(n&&!1!==n.hasOwnProperty(t.image.imageId)){var r=n[t.image.imageId],o=[];Object.keys(r).forEach((function(e){r[e].data.forEach((function(t){var n=t._id,r=t.lesionNamingNumber,a=t.measurementNumber;n&&o.push({toolType:e,_id:n,lesionNamingNumber:r,measurementNumber:a})}))})),o.forEach((function(e){Re.ZP.measurements.MeasurementHandlers.onRemoved({detail:{toolType:e.toolType,measurementData:e}})}))}}}},nextImage:function(){var e=a();as(e,1)},previousImage:function(){var e=a();as(e,-1)},getActiveViewportEnabledElement:function(){return a()},showDownloadViewportModal:function(){var e=r.getState().activeViewportIndex,n=t.services.UIModalService;n&&n.show({content:rs,title:"Download High Quality Image",contentProps:{activeViewportIndex:e,onClose:n.hide}})},getNearbyToolData:function(e){var t=e.element,n=e.canvasCoordinates,r=e.availableToolTypes,a={},o=!1;return r.forEach((function(e){var r=pi().getToolState(t,e);if(r)return r.data.forEach((function(r,i){var s=pi().getToolForElement(t,e);s||(s=pi().getToolForElement(t,"".concat(e,"Tool"))),s?s.pointNearTool(t,r,n)&&(o=!0,a.tool=r,a.index=i,a.toolType=e):console.warn("Tool not found.")})),!o&&void 0})),o?a:void 0},removeToolState:function(e){var t=e.element,n=e.toolType,r=e.tool;pi().removeToolState(t,n,r),fi().updateImage(t)},setWindowLevel:function(e){var t=e.window,n=e.level,r=a();if(r){var o=fi().getViewport(r);o.voi={windowWidth:Number(t),windowCenter:Number(n)},fi().setViewport(r,o)}}};return{actions:o,definitions:{jumpToImage:{commandFn:o.jumpToImage,storeContexts:[],options:{}},getCornerstoneLibraries:{commandFn:o.getCornerstoneLibraries,storeContexts:[],options:{},context:"VIEWER"},getNearbyToolData:{commandFn:o.getNearbyToolData,storeContexts:[],options:{}},toggleSynchronizer:{commandFn:o.toggleSynchronizer,storeContexts:[],options:{}},removeToolState:{commandFn:o.removeToolState,storeContexts:[],options:{}},showDownloadViewportModal:{commandFn:o.showDownloadViewportModal,storeContexts:[],options:{}},getActiveViewportEnabledElement:{commandFn:o.getActiveViewportEnabledElement,storeContexts:[],options:{}},rotateViewportCW:{commandFn:o.rotateViewport,storeContexts:[],options:{rotation:90}},rotateViewportCCW:{commandFn:o.rotateViewport,storeContexts:[],options:{rotation:-90}},invertViewport:{commandFn:o.invertViewport,storeContexts:[],options:{}},cancelMeasurement:{commandFn:o.cancelMeasurement,storeContexts:[],options:{}},flipViewportVertical:{commandFn:o.flipViewportVertical,storeContexts:[],options:{}},flipViewportHorizontal:{commandFn:o.flipViewportHorizontal,storeContexts:[],options:{}},scaleUpViewport:{commandFn:o.scaleViewport,storeContexts:[],options:{direction:1}},scaleDownViewport:{commandFn:o.scaleViewport,storeContexts:[],options:{direction:-1}},fitViewportToWindow:{commandFn:o.scaleViewport,storeContexts:[],options:{direction:0}},resetViewport:{commandFn:o.resetViewport,storeContexts:[],options:{}},clearAnnotations:{commandFn:o.clearAnnotations,storeContexts:[],options:{}},nextImage:{commandFn:o.nextImage,storeContexts:[],options:{}},previousImage:{commandFn:o.previousImage,storeContexts:[],options:{}},setToolActive:{commandFn:o.setToolActive,storeContexts:[],options:{}},setZoomTool:{commandFn:o.setToolActive,storeContexts:[],options:{toolName:"Zoom"}},setWindowLevel:{commandFn:o.setWindowLevel,storeContexts:[],options:{}}},defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"}};function us(){return(us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ds=r.lazy((function(){return Promise.all([n.e(196),n.e(407)]).then(n.bind(n,55407))})),fs=function(e){return r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(ds,e))},ms={id:"org.ohif.cornerstone",preRegistration:function(e){var t=e.servicesManager,n=e.commandsManager,r=e.configuration;Ji({servicesManager:t,commandsManager:n,configuration:void 0===r?{}:r})},getViewportModule:function(e){var t=e.servicesManager,n=e.commandsManager;return[{name:"cornerstone",component:function(e){var a=t.services.ToolBarService;return r.createElement(fs,us({},e,{ToolBarService:a,servicesManager:t,commandsManager:n,onNewImage:function(e){n.runCommand("jumpToImage",e)}}))}}]},getCommandsModule:function(e){var t=e.servicesManager,n=e.commandsManager;return ls({servicesManager:t,commandsManager:n})}},ps=n(8784);function ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ys(Object(n),!0).forEach((function(t){hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gs(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function bs(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){gs(o,r,a,i,s,"next",e)}function s(e){gs(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ss(e){return function(e){if(Array.isArray(e))return Is(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Es(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||Es(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(e,t){if(e){if("string"==typeof e)return Is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Is(e,t):void 0}}function Is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Os=Me.ZP.formatDate;function Ds(e){var t,n=e.MeasurementService,a=e.DisplaySetService,o=e.UIDialogService,i=e.UINotificationService,s=e.getImageSrc,c=e.getStudiesForPatientByStudyInstanceUID,l=e.requestDisplaySetCreationForStudy,u=e.dataSource,d=(0,ne.zG)().StudyInstanceUIDs,f=ws((0,ne.O_)(),2),m=f[0],p=m.activeViewportIndex,y=m.viewports,v=m.numCols,h=m.numRows,g=f[1],b=ws((0,ps.I)(),2),S=b[0],w=b[1],E=ws((0,r.useState)("primary"),2),I=E[0],O=E[1],D=ws((0,r.useState)(Ss(d)),2),x=D[0],k=D[1],P=ws((0,r.useState)([]),2),C=P[0],T=P[1],N=ws((0,r.useState)([]),2),R=N[0],M=N[1],A=ws((0,r.useState)({}),2),j=A[0],U=A[1],L=ws((0,r.useState)(null),2),_=L[0],V=L[1],q=null===(t=y[p])||void 0===t?void 0:t.displaySetInstanceUID,F=1===v&&1===h;(0,r.useEffect)((function(){var e=n.EVENTS.MEASUREMENT_ADDED,t=n.EVENTS.RAW_MEASUREMENT_ADDED,r=[];return[e,t].forEach((function(e){r.push(n.subscribe(e,(function(e){e.source;var t=e.measurement,n=t.referenceSeriesUID,r=t.referenceStudyUID;w("SET_DIRTY",{SeriesInstanceUID:n}),w("TRACK_SERIES",{viewportIndex:p,StudyInstanceUID:r,SeriesInstanceUID:n})})).unsubscribe)})),function(){r.forEach((function(e){e()}))}}),[n,p,w]);var B=S.context,z=(B.trackedStudy,B.trackedSeries);(0,r.useEffect)((function(){function e(){return(e=bs(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:n=e.t0,r=ks(n),a=r.map((function(e){return{studyInstanceUid:e.StudyInstanceUID,date:Os(e.StudyDate),description:e.StudyDescription,modalities:e.ModalitiesInStudy,numInstances:e.NumInstances}})),T(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d.forEach((function(t){return function(t){return e.apply(this,arguments)}(t)}))}),[d,c]),(0,r.useEffect)((function(){a.activeDisplaySets.forEach(function(){var e=bs(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=a.getDisplaySetByUID(t.displaySetInstanceUID),o=u.getImageIdsForDisplaySet(r),!(i=o[Math.floor(o.length/2)])){e.next=9;break}return e.next=7,s(i);case 7:n[t.displaySetInstanceUID]=e.sent,U((function(e){return vs(vs({},e),n)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[a,u,s]),(0,r.useEffect)((function(){var e=Ps(a.activeDisplaySets,j,z,y,F,u,a,o,i);M(e)}),[a.activeDisplaySets,z,j,y,u]),(0,r.useEffect)((function(){var e=a.subscribe(a.EVENTS.DISPLAY_SETS_ADDED,(function(e){var t=e.displaySetsAdded,n=e.options;t.forEach(function(){var e=bs(regeneratorRuntime.mark((function e(t){var r,o,i,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.displaySetInstanceUID,o={},i=a.getDisplaySetByUID(r),n.madeInClient&&V(r),c=u.getImageIdsForDisplaySet(i),!(l=c[Math.floor(c.length/2)])){e.next=11;break}return e.next=9,s(l);case 9:o[r]=e.sent,U((function(e){return vs(vs({},e),o)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),t=a.subscribe(a.EVENTS.DISPLAY_SETS_CHANGED,(function(e){var t=Ps(e,j,z,y,F,u,a,o,i);M(t)}));return function(){e.unsubscribe(),t.unsubscribe()}}),[a,u,s,j,z,y]);var H=function(e,t,n){var r=[],a=[],o=[];t.forEach((function(t){var i=n.filter((function(e){return e.StudyInstanceUID===t.studyInstanceUid})),s=(Me.ZP.sortBySeriesDate(i),Object.assign({},t,{displaySets:i}));e.includes(t.studyInstanceUid)?(r.push(s),o.push(s)):(a.push(s),o.push(s))}));var i=function(e,t){var n=Date.parse(e);return Date.parse(t)-n};return[{name:"primary",label:"Primary",studies:r.sort((function(e,t){return i(e.date,t.date)}))},{name:"recent",label:"Recent",studies:a.sort((function(e,t){return i(e.date,t.date)}))},{name:"all",label:"All",studies:o.sort((function(e,t){return i(e.date,t.date)}))}]}(d,C,R);return(0,r.useEffect)((function(){if(_){var e=_,t=document.getElementById("thumbnail-".concat(e));t&&"function"==typeof t.scrollIntoView&&(t.scrollIntoView({behavior:"smooth"}),V(null))}}),[_,x,I]),(0,r.useEffect)((function(){if(_){var e=function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n].studies,a=0;a<r.length;a++)for(var o=r[a].displaySets,i=0;i<o.length;i++){if(o[i].displaySetInstanceUID===e)return{tabName:t[n].name,StudyInstanceUID:r[a].studyInstanceUid}}}(_,H);if(e){var t=e.tabName,n=e.StudyInstanceUID;if(O(t),!x.includes(n)){var r=[].concat(Ss(x),[n]);k(r)}}else console.warn("jumpToThumbnail: displaySet thumbnail not found.")}}),[x,_,H]),r.createElement(ne.eX,{tabs:H,activeTabName:I,expandedStudyInstanceUIDs:x,onClickStudy:function(e){var t=x.includes(e),n=t?Ss(x.filter((function(t){return t!==e}))):[].concat(Ss(x),[e]);if(k(n),!t){l(a,e,!0)}},onClickTab:function(e){O(e)},onClickUntrack:function(e){var t=a.getDisplaySetByUID(e);w("UNTRACK_SERIES",{SeriesInstanceUID:t.SeriesInstanceUID})},onClickThumbnail:function(){},onDoubleClickThumbnail:function(e){g.setDisplaysetForViewport({viewportIndex:p,displaySetInstanceUID:e})},activeDisplaySetInstanceUID:q})}Ds.propTypes={MeasurementService:o().shape({subscribe:o().func.isRequired,EVENTS:o().object.isRequired}).isRequired,DisplaySetService:o().shape({EVENTS:o().object.isRequired,activeDisplaySets:o().arrayOf(o().object).isRequired,getDisplaySetByUID:o().func.isRequired,subscribe:o().func.isRequired}).isRequired,dataSource:o().shape({getImageIdsForDisplaySet:o().func.isRequired}).isRequired,getImageSrc:o().func.isRequired,getStudiesForPatientByStudyInstanceUID:o().func.isRequired,requestDisplaySetCreationForStudy:o().func.isRequired};var xs=Ds;function ks(e){return e.map((function(e){return{AccessionNumber:e.accession,StudyDate:e.date,StudyDescription:e.description,NumInstances:e.instances,ModalitiesInStudy:e.modalities,PatientID:e.mrn,PatientName:e.patientName,StudyInstanceUID:e.studyInstanceUid,StudyTime:e.time}}))}function Ps(e,t,n,a,o,i,s,c,l){var u=[],d=[];return e.forEach((function(e){var f=t[e.displaySetInstanceUID],m=function(e){if(Cs.includes(e))return"thumbnailNoImage";return"thumbnailTracked"}(e.Modality),p=o?[]:a.reduce((function(t,n,r){return n.displaySetInstanceUID===e.displaySetInstanceUID&&t.push(Ts[r]),t}),[]),y="thumbnailTracked"===m?u:d,v=e.displaySetInstanceUID,h={displaySetInstanceUID:v,description:e.SeriesDescription,seriesNumber:e.SeriesNumber,modality:e.Modality,seriesDate:Os(e.SeriesDate),numInstances:e.numImageFrames,StudyInstanceUID:e.StudyInstanceUID,componentType:m,imageSrc:f,dragData:{type:"displayset",displaySetInstanceUID:v},isTracked:n.includes(e.SeriesInstanceUID),viewportIdentificator:p};"thumbnailNoImage"===m&&(i.reject&&i.reject.series?(h.canReject=!0,h.onReject=function(){var t;c.create({id:"ds-reject-sr",centralize:!0,isDraggable:!1,showOverlay:!0,content:ne.Vq,contentProps:{title:"Delete Report",body:function(){return r.createElement("div",{className:"p-4 text-white bg-primary-dark"},r.createElement("p",null,"Are you sure you want to delete this report?"),r.createElement("p",null,"This action cannot be undone."))},actions:[{id:"cancel",text:"Cancel",type:"secondary"},{id:"yes",text:"Yes",type:"primary",classes:["reject-yes-button"]}],onClose:function(){return c.dismiss({id:"ds-reject-sr"})},onShow:function(){document.querySelector(".reject-yes-button").focus()},onSubmit:(t=bs(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.action,t.t0=r.id,t.next="yes"===t.t0?4:"cancel"===t.t0?17:19;break;case 4:return t.prev=4,t.next=7,i.reject.series(e.StudyInstanceUID,e.SeriesInstanceUID);case 7:s.deleteDisplaySet(v),c.dismiss({id:"ds-reject-sr"}),l.show({title:"Delete Report",message:"Report deleted successfully",type:"success"}),t.next=16;break;case 12:t.prev=12,t.t1=t.catch(4),c.dismiss({id:"ds-reject-sr"}),l.show({title:"Delete Report",message:"Failed to delete report",type:"error"});case 16:return t.abrupt("break",19);case 17:return c.dismiss({id:"ds-reject-sr"}),t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,null,[[4,12]])}))),function(e){return t.apply(this,arguments)})}})}):h.canReject=!1),y.push(h)})),[].concat(u,d)}var Cs=["SR","SEG","RTSTRUCT","RTPLAN","RTDOSE"];var Ts=["A","B","C","D","E","F","G","H","I"];var Ns=function(e,t){return new Promise((function(n,r){e.loadAndCacheImage(t).then((function(t){var r=document.createElement("canvas");e.renderToCanvas(r,t),n(r.toDataURL())})).catch(r)}))};function Rs(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ms(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rs(o,r,a,i,s,"next",e)}function s(e){Rs(o,r,a,i,s,"throw",e)}i(void 0)}))}}function As(){return(As=Ms(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.query.studies.search({studyInstanceUid:n});case 4:if(!((r=e.sent)&&r.length&&r[0].mrn)){e.next=7;break}return e.abrupt("return",t.query.studies.search({patientId:r[0].mrn}));case 7:return console.log("No mrn found for",r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var js=function(e,t){return As.apply(this,arguments)};var Us=function(e,t,n,r){t.activeDisplaySets.some((function(e){return e.StudyInstanceUID===n}))||e.retrieveSeriesMetadata({StudyInstanceUID:n,madeInClient:r})};function Ls(e){var t=e.commandsManager,n=e.extensionManager,a=e.servicesManager,o=n.getActiveDataSource()[0],i=js.bind(null,o),s=function(e){try{var t=e("getCornerstoneLibraries","VIEWER");if(!t)return;var n=t.commandFn().cornerstone;return Ns.bind(null,n)}catch(e){throw new Error("Required command not found")}}(t.getCommand.bind(t)),c=Us.bind(null,o);return r.createElement(xs,{MeasurementService:a.services.MeasurementService,DisplaySetService:a.services.DisplaySetService,UIDialogService:a.services.UIDialogService,UINotificationService:a.services.UINotificationService,dataSource:o,getImageSrc:s,getStudiesForPatientByStudyInstanceUID:i,requestDisplaySetCreationForStudy:c})}Ls.propTypes={commandsManager:o().object.isRequired,extensionManager:o().object.isRequired,servicesManager:o().object.isRequired};var _s=Ls;function Vs(e){var t=e.onExportClick,n=e.onCreateReportClick,a=(0,f.$G)("MeasurementTable").t;return r.createElement(r.Fragment,null,r.createElement(ne.hE,{color:"black",size:"inherit"},r.createElement(ne.zx,{className:"text-base px-2 py-2",onClick:t},a("Export"))),r.createElement(ne.zx,{className:"ml-2 text-base",variant:"outlined",size:"small",color:"black",onClick:n},a("Create Report")))}Vs.propTypes={onExportClick:o().func,onCreateReportClick:o().func},Vs.defaultProps={onExportClick:function(){return alert("Export")},onCreateReportClick:function(){return alert("Create Report")}};var qs=Vs;n(73397),n(30798);function Fs(e){return function(e){if(Array.isArray(e))return Bs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Bs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zs(e,t,n,r){var a=r.VALUE_TYPES;if(0!==e.length){var o={};n.forEach((function(e){o[e]=Mt.Z.getSeries(t,e)}));var i=[["Patient ID","Patient Name","StudyInstanceUID","SeriesInstanceUID","SOPInstanceUID","Label","Long Axis (mm)","Short Axis (mm)","Length (mm)","Area (mmˆ2)","Mean","StDev","Units"]];e.forEach((function(e){switch(e.type){case a.BIDIRECTIONAL:i.push(function(e,t){var n=Hs(e,t);return[].concat(Fs(n),[e.longestDiameter,e.shortestDiameter])}(e,o));break;case a.ELLIPSE:i.push(function(e,t){var n=Hs(e,t),r=["","",""],a=function(e,t){switch(t[e.referenceSeriesUID].instances[0].Modality){case"CT":return{mean:"".concat(e.mean.toFixed(1)),stdDev:"".concat(e.stdDev.toFixed(1)),area:e.area.toFixed(1),unit:"HU"};case"PT":if(e.meanSUV)return{mean:"".concat(e.meanSUV.toFixed(1)),stdDev:"".concat(e.stdDevSUV.toFixed(1)),area:e.area.toFixed(1),unit:"SUV"};default:return{mean:"".concat(e.mean.toFixed(1)),stdDev:"".concat(e.stdDev.toFixed(1)),area:e.area.toFixed(1),unit:"Pixel Values"}}}(e,t),o=a.area,i=a.mean,s=a.stdDev,c=a.unit;return[].concat(Fs(n),r,[o,i,s,c])}(e,o));break;case a.POINT:i.push(function(e,t){return Fs(Hs(e,t))}(e,o));break;case a.POLYLINE:i.push(function(e,t){var n=Hs(e,t),r=["",""];return[].concat(Fs(n),r,[e.length.toFixed(1)])}(e,o))}})),function(e){var t=encodeURI(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","MeasurementReport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}("data:text/csv;charset=utf-8,"+i.map((function(e){return e.join(",")})).join("\n"))}}function Hs(e,t){var n=t[e.referenceSeriesUID].instances[0];return[n.PatientID,n.PatientName.Alphabetic,e.referenceStudyUID,e.referenceSeriesUID,e.SOPInstanceUID,e.label||""]}function Zs(e){return function(e){if(Array.isArray(e))return Qs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(n),!0).forEach((function(t){Ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gs(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Js(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Gs(o,r,a,i,s,"next",e)}function s(e){Gs(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||Xs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xs(e,t){if(e){if("string"==typeof e)return Qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qs(e,t):void 0}}function Qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ec=Me.ZP.formatDate,tc={key:void 0,date:void 0,modality:void 0,description:void 0};function nc(e){var t=e.servicesManager,n=(e.extensionManager,Ks((0,ne.O_)(),2)),a=n[0],o=(n[1],Ks((0,r.useState)(Date.now().toString()),2)),i=o[0],s=o[1],c=Te(i,200),l=t.services,u=l.MeasurementService,d=l.UIDialogService,f=l.DisplaySetService,m=Ks((0,ps.I)(),2),p=m[0],y=m[1],v=p.context,h=v.trackedStudy,g=v.trackedSeries,b=Ks((0,r.useState)(tc),2),S=b[0],w=b[1],E=Ks((0,r.useState)([]),2),I=E[0],O=E[1];(0,r.useEffect)((function(){var e=u.getMeasurements().filter((function(e){return h===e.referenceStudyUID&&g.includes(e.referenceSeriesUID)})).map((function(e){return function(e,t,n){var r=e.referenceStudyUID,a=e.referenceSeriesUID,o=e.SOPInstanceUID,i=Mt.Z.getInstance(r,a,o),s=n.getDisplaySetsForSeries(a);if(!s[0]||!s[0].images)throw new Error('The tracked measurements panel should only be tracking "stack" displaySets.');var c=i.PixelSpacing,l=i.SeriesNumber,u=i.InstanceNumber,d=function(e,t,n,r,a){var o=e.type,i=(e.points,void 0!==t&&Array.isArray(t)&&2===t.length),s=Ks(i?t:[1,1],2),c=(s[0],s[1],i?"mm":"px");switch(o){case a.POLYLINE:var l=rc(e.length,2);return["".concat(l," ").concat(c," (S:").concat(n,", I:").concat(r,")")];case a.BIDIRECTIONAL:var u=e.shortestDiameter,d=e.longestDiameter,f=rc(u,1),m=rc(d,1);return["L: ".concat(m," ").concat(c," (S:").concat(n,", I:").concat(r,")"),"W: ".concat(f," ").concat(c)];case a.ELLIPSE:var p=rc(e.area,2);return["".concat(p," ").concat(c,"<sup>2</sup> (S:").concat(n,", I:").concat(r,")")];case a.POINT:e.text;return["(S:".concat(n,", I:").concat(r,")")]}}(e,c,l,u,t);return{id:e.id,label:e.label||"(empty)",measurementType:e.type,displayText:d||[],isActive:!1}}(e,u.VALUE_TYPES,f)}));O(e)}),[u,h,g,c]);var D=function(){var e=Js(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.matches("tracking")?(t=h,n=Mt.Z.getStudy(t),r=n.series[0].instances[0],a=r.StudyDate,o=r.StudyDescription,i=new Set,n.series.forEach((function(e){g.includes(e.SeriesInstanceUID)&&i.add(e.instances[0].Modality)})),s=Array.from(i).join("/"),S.key!==t&&w({key:t,date:a,modality:s,description:o})):""!==h&&void 0!==h||w(tc);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function x(){return(x=Js(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.getMeasurements(),zs(t.filter((function(e){return h===e.referenceStudyUID&&g.includes(e.referenceSeriesUID)})),h,g,u);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,r.useEffect)((function(){D()}),[S.key,p,h,D]),(0,r.useEffect)((function(){var e=u.EVENTS.MEASUREMENT_ADDED,t=u.EVENTS.RAW_MEASUREMENT_ADDED,n=u.EVENTS.MEASUREMENT_UPDATED,r=u.EVENTS.MEASUREMENT_REMOVED,a=u.EVENTS.MEASUREMENTS_CLEARED,o=[];return[e,t,n,r,a].forEach((function(e){o.push(u.subscribe(e,(function(){s(Date.now().toString())})).unsubscribe)})),function(){o.forEach((function(e){e()}))}}),[u,y]);var k=function(e){var t=e.id,n=e.isActive;u.jumpToMeasurement(a.activeViewportIndex,t),C({id:t,isActive:n})},P=function(e){var t=e.id,n=e.isActive,a=u.getMeasurement(t);k({id:t,isActive:n});var o=function(e){var n=e.action,r=e.value;switch(n.id){case"save":u.update(t,$s($s({},a),r),!0)}d.dismiss({id:"enter-annotation"})};d.create({id:"enter-annotation",centralize:!0,isDraggable:!1,showOverlay:!0,content:ne.Vq,contentProps:{title:"Enter your annotation",noCloseButton:!0,value:{label:a.label||""},body:function(e){var t=e.value,n=e.setValue;return r.createElement("div",{className:"p-4 bg-primary-dark"},r.createElement(ne.II,{autoFocus:!0,className:"mt-2 bg-black border-primary-main",type:"text",containerClassName:"mr-2",value:t.label,onChange:function(e){e.persist(),n((function(t){return $s($s({},t),{},{label:e.target.value})}))},onKeyPress:function(e){"Enter"===e.key&&o({value:t,action:{id:"save"}})}}))},actions:[{id:"cancel",text:"Cancel",type:"primary"},{id:"save",text:"Save",type:"secondary"}],onSubmit:o}})},C=function(e){var t=e.id;if(!e.isActive){var n=Zs(I),r=n.find((function(e){return e.id===t}));n.forEach((function(e){return e.isActive=e.id===t})),r.isActive=!0,O(n)}},T=I.filter((function(e){return e.measurementType!==u.VALUE_TYPES.POINT})),N=I.filter((function(e){return e.measurementType===u.VALUE_TYPES.POINT}));return r.createElement(r.Fragment,null,r.createElement("div",{className:"overflow-x-hidden overflow-y-auto invisible-scrollbar","data-cy":"trackedMeasurements-panel"},S.key&&r.createElement(ne.YL,{date:ec(S.date),modality:S.modality,description:S.description}),r.createElement(ne.wt,{title:"Measurements",amount:T.length,data:T,onClick:k,onEdit:P}),0!==N.length&&r.createElement(ne.wt,{title:"Additional Findings",amount:N.length,data:N,onClick:k,onEdit:P})),r.createElement("div",{className:"flex justify-center p-4"},r.createElement(qs,{onExportClick:function(){return x.apply(this,arguments)},onCreateReportClick:function(){y("SAVE_REPORT",{viewportIndex:a.activeViewportIndex,isBackupSave:!0})}})))}function rc(e,t){return parseFloat(e).toFixed(t)}nc.propTypes={servicesManager:o().shape({services:o().shape({MeasurementService:o().shape({getMeasurements:o().func.isRequired,VALUE_TYPES:o().object.isRequired}).isRequired}).isRequired}).isRequired};var ac=nc;var oc=function(e){var t=e.commandsManager,n=e.extensionManager,r=e.servicesManager;return[{name:"seriesList",iconName:"group-layers",iconLabel:"Studies",label:"Studies",component:_s.bind(null,{commandsManager:t,extensionManager:n,servicesManager:r})},{name:"trackedMeasurements",iconName:"list-bullets",iconLabel:"Measure",label:"Measurements",component:ac.bind(null,{commandsManager:t,extensionManager:n,servicesManager:r})}]};function ic(){return(ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var sc=r.lazy((function(){return n.e(63).then(n.bind(n,74063))})),cc=function(e){return r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(sc,e))};var lc=function(e){var t=e.servicesManager,n=e.commandsManager,a=e.extensionManager;return[{name:"cornerstone-tracked",component:function(e){return r.createElement(cc,ic({servicesManager:t,commandsManager:n,extensionManager:a},e))}}]},uc={id:"org.ohif.measurement-tracking",getContextModule:ps.Z,getPanelModule:oc,getViewportModule:lc,getCommandsModule:function(e){e.servicesManager;return{definitions:{setToolActive:{commandFn:function(e){var t=e.toolName,n=e.element;t||console.warn("No toolname provided to setToolActive command"),cornerstoneTools.setToolActiveForElement(n,t,{mouseButtonMask:1})},storeContexts:[],options:{}}},defaultContext:"ACTIVE_VIEWPORT::TRACKED"}}},dc=n(34104),fc=n(45711),mc=n(45782),pc=n(54213),yc=pi().globalImageIdSpecificToolStateManager;function vc(e,t,n){var r=mc.Z.DICOM_SR_DISPLAY_TOOL,a={TrackingUniqueIdentifier:e.TrackingUniqueIdentifier,renderableData:{},labels:e.labels};e.coords.forEach((function(e){var t=e.GraphicType,n=e.GraphicData;void 0===a.renderableData[t]&&(a.renderableData[t]=[]),a.renderableData[t].push(function(e,t){var n;switch(e){case pc.Z.POINT:case pc.Z.MULTIPOINT:case pc.Z.POLYLINE:n=[];for(var r=0;r<t.length;r+=2)n.push({x:t[r],y:t[r+1]});break;case pc.Z.CIRCLE:var a={x:t[0],y:t[1]},o={x:t[2],y:t[3]};n={center:a,radius:Ii().point.distance(a,o)};break;case pc.Z.ELLIPSE:console.warn("ROTATED ELLIPSE NOT YET SUPPORTED!");var i=[{x:t[0],y:t[1]},{x:t[2],y:t[3]}],s=[{x:t[4],y:t[5]},{x:t[6],y:t[7]}],c=Ii().point.distance(s[0],s[1]),l={x:(s[1].x-s[0].x)/c,y:(s[1].y-s[0].y)/c},u=c/2;n={corner1:{x:i[0].x+l.x*u,y:i[0].y+l.y*u},corner2:{x:i[1].x-l.x*u,y:i[1].y-l.y*u}}}return n}(t,n))}));var o=yc.saveToolState();void 0===o[t]&&(o[t]={});var i=o[t];void 0===i[r]&&(i[r]={data:[]}),i[r].data.push(a),e.loaded=!0,e.imageId=t,e.displaySetInstanceUID=n,e.ReferencedSOPInstanceUID=e.coords[0].ReferencedSOPSequence.ReferencedSOPInstanceUID,delete e.coords}function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gc=mt.j$.Cornerstone;function bc(e){return function(e){if(Array.isArray(e))return Sc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wc=fc.ZP.ImageSet,Ec=["1.2.840.10008.5.1.4.1.1.88.11","1.2.840.10008.5.1.4.1.1.88.22","1.2.840.10008.5.1.4.1.1.88.33"],Ic="126000",Oc="111028",Dc="126010",xc="125007",kc="126200",Pc="112040",Cc="112039",Tc="121071",Nc="G-C0E3",Rc="CORNERSTONEFREETEXT",Mc="SRT",Ac="CST4",jc="INFERRED FROM",Uc="CORNERSTONEFREETEXT";function Lc(e,t,n){if(!e||!e.length)throw new Error("No instances were provided");var r=e[0],a=r.StudyInstanceUID,o=r.SeriesInstanceUID,i=r.SOPInstanceUID,s=r.SeriesDescription,c=r.SeriesNumber,l=r.SeriesDate,u=r.ConceptNameCodeSequence;if(!u||u.CodeValue!==Ic)return console.warn("Only support Imaging Measurement Report SRs (TID1500) for now"),[];var d={Modality:"SR",displaySetInstanceUID:Me.ZP.guid(),SeriesDescription:s,SeriesNumber:c,SeriesDate:l,SOPInstanceUID:i,SeriesInstanceUID:o,StudyInstanceUID:a,SOPClassHandlerId:dc._$,referencedImages:null,measurements:null,isDerivedDisplaySet:!0,isLoaded:!1,sopClassUids:Ec,instance:r};return d.load=function(){return function(e,t,n){var r=t.services,a=r.DisplaySetService,o=r.MeasurementService,i=n.getDataSources()[0],s=e.instance.ContentSequence;e.referencedImages=(c=s,l=Bc(c.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Oc})).ContentSequence).find((function(e){return e.ConceptNameCodeSequence.CodeValue===kc})),u=[],Bc(l.ContentSequence).forEach((function(e){var t=e.ReferencedSOPSequence,n=t.ReferencedSOPClassUID,r=t.ReferencedSOPInstanceUID;u.push({ReferencedSOPClassUID:n,ReferencedSOPInstanceUID:r})})),u),e.measurements=function(e){var t=function(e){var t={};return e.forEach((function(e){var n=Bc(e.ContentSequence),r=n.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Pc}));r||console.warn("No Tracking Unique Identifier, skipping ambiguous measurement.");var a=r.UID;void 0===t[a]?t[a]=bc(n):n.forEach((function(e){e.ConceptNameCodeSequence.CodeValue!==Pc&&t[a].push(e)}))})),t}(Bc(e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Dc})).ContentSequence).filter((function(e){return e.ConceptNameCodeSequence.CodeValue===xc}))),n=[];return Object.keys(t).forEach((function(e){var r=function(e){if(e.some((function(e){return"SCOORD"===e.ValueType||"SCOORD3D"===e.ValueType})))return function(e){var t=e.find((function(e){return"SCOORD"===e.ValueType})),n=e.find((function(e){return"UIDREF"===e.ValueType})),r=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Cc}));if(!t)return void console.warn("graphic ValueType ".concat(t.ValueType," not currently supported, skipping annotation."));var a=e.filter((function(e){return"NUM"===e.ValueType})),o={loaded:!1,labels:[],coords:[qc(t)],TrackingUniqueIdentifier:n.UID,TrackingIdentifier:r.TextValue};return a.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.MeasuredValueSequence;n&&o.labels.push(Fc(t,n))})),o}(e);return function(e){var t=e.filter((function(e){return"NUM"===e.ValueType})),n=e.find((function(e){return"UIDREF"===e.ValueType})),r=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Cc})),a=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===Tc})),o=e.filter((function(e){return e.ConceptNameCodeSequence.CodingSchemeDesignator===Mc&&e.ConceptNameCodeSequence.CodeValue===Nc})),i={loaded:!1,labels:[],coords:[],TrackingUniqueIdentifier:n.UID,TrackingIdentifier:r.TextValue};a&&a.ConceptCodeSequence.CodingSchemeDesignator===Ac&&a.ConceptCodeSequence.CodeValue===Rc&&i.labels.push({label:Uc,value:a.ConceptCodeSequence.CodeMeaning});if(o.length){var s=o.find((function(e){return e.ConceptCodeSequence.CodingSchemeDesignator===Ac&&e.ConceptCodeSequence.CodeValue===Rc}));s&&i.labels.push({label:Uc,value:s.ConceptCodeSequence.CodeMeaning})}return t.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.ContentSequence,r=e.MeasuredValueSequence,a=n.ValueType;if("SCOORD"!==!a){var o=qc(n);o&&i.coords.push(o),r&&i.labels.push(Fc(t,r))}else console.warn("Graphic ".concat(a," not currently supported, skipping annotation."))})),i}(e)}(t[e]);r&&n.push(r)})),n}(s);var c,l,u;var d=o.getSourceMappings("CornerstoneTools","4");e.isHydrated=!1,e.isRehydratable=function(e,t){if(!t||!t.length)return!1;var n=t.map((function(e){return e.definition})),r=e.measurements,a=Object.keys(gc).filter((function(e){return"function"==typeof gc[e].isValidCornerstoneTrackingIdentifier})),o=[];a.forEach((function(e){n.includes(e)&&o.push(gc[e])}));for(var i=function(e){var t=r[e].TrackingIdentifier;if(o.some((function(e){return e.isValidCornerstoneTrackingIdentifier(t)})))return{v:!0}},s=0;s<r.length;s++){var c=i(s);if("object"===hc(c))return c.v}return!1}(e,d),e.isLoaded=!0,a.activeDisplaySets.forEach((function(t){_c(e,t,i)})),a.subscribe(a.EVENTS.DISPLAY_SETS_ADDED,(function(t){t.displaySetsAdded.forEach((function(t){_c(e,t,i)}))}))}(d,t,n)},[d]}function _c(e,t,n){var r=e.measurements.filter((function(e){return!1===e.loaded}));if(0!==r.length&&!(!t instanceof wc)){var a=t.sopClassUids,o=t.images;if(0!==(r=r.filter((function(e){return e.coords.some((function(e){return a.includes(e.ReferencedSOPSequence.ReferencedSOPClassUID)}))}))).length){var i=[];r.forEach((function(e){e.coords.forEach((function(e){var t=e.ReferencedSOPSequence.ReferencedSOPInstanceUID;i.includes(t)||i.push(t)}))}));for(var s=n.getImageIdsForDisplaySet(t),c=0;c<o.length&&r.length;c++){var l=o[c].SOPInstanceUID;if(i.includes(l))for(var u=s[c],d=r.length-1;d>=0;d--){var f=r[d];Vc(f,l)&&(vc(f,u,t.displaySetInstanceUID),r.splice(d,1))}}}}}function Vc(e,t){for(var n=e.coords,r=0;r<n.length;r++){if(n[r].ReferencedSOPSequence.ReferencedSOPInstanceUID===t)return!0}}function qc(e){var t=e.ValueType,n=e.RelationshipType,r=e.GraphicType,a=e.GraphicData;if(n===jc){var o={ValueType:t,GraphicType:r,GraphicData:a};if("SCOORD"===t){var i=e.ContentSequence.ReferencedSOPSequence;o.ReferencedSOPSequence=i}else if("SCOORD3D"===t){var s=e.ContentSequence.ReferencedFrameOfReferenceSequence;o.ReferencedFrameOfReferenceSequence=s}return o}console.warn("Relationshiptype === ".concat(n,'. Cannot deal with NON TID-1400 SCOORD group with RelationshipType !== "INFERRED FROM."'))}function Fc(e,t){var n=e.CodeMeaning,r=t.NumericValue,a=t.MeasurementUnitsCodeSequence.CodeValue,o=r?Number(r).toFixed(1):"";return{label:n,value:"".concat(o," ").concat(a)}}function Bc(e){return Array.isArray(e)?e:[e]}var zc=function(e){var t=e.servicesManager,n=e.extensionManager;return[{name:dc.J0,sopClassUids:Ec,getDisplaySetsFromSeries:function(e){return Lc(e,t,n)}}]};var Hc={TrackingUniqueIdentifier:null,trackingIdentifiersByEnabledElementUUID:{}};var Zc={state:Hc,getters:{trackingUniqueIdentifiersForElement:function(e){var t=fi().getEnabledElement(e).uuid;return Hc.trackingIdentifiersByEnabledElementUUID[t]?Hc.trackingIdentifiersByEnabledElementUUID[t]:{trackingUniqueIdentifiers:[]}}},setters:{trackingUniqueIdentifiersForElement:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=fi().getEnabledElement(e),a=r.uuid;Hc.trackingIdentifiersByEnabledElementUUID[a]={trackingUniqueIdentifiers:t,activeIndex:n}},activeTrackingUniqueIdentifierForElement:function(e,t){var n=fi().getEnabledElement(e).uuid,r=Hc.trackingIdentifiersByEnabledElementUUID[n];if(r){var a=r.trackingUniqueIdentifiers.findIndex((function(e){return e===t}));r.activeIndex=a}}}},Wc={TOOL_NAMES:{DICOM_SR_DISPLAY_TOOL:"DICOMSRDisplayTool"}};function $c(){return($c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Yc=r.lazy((function(){return Promise.all([n.e(196),n.e(668)]).then(n.bind(n,42668))})),Gc=function(e){return r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(Yc,e))},Jc={id:dc.ZP,dependencies:[{id:"org.ohif.cornerstone",version:"3.0.0"},{id:"org.ohif.measurement-tracking",version:"^0.0.1"}],preRegistration:function(e){var t=e.servicesManager,n=e.configuration;!function(e){var t=e.configuration,n=void 0===t?{}:t,r=Object.assign({},Wc,n);mc.Z.DICOM_SR_DISPLAY_TOOL=r.TOOL_NAMES.DICOM_SR_DISPLAY_TOOL,pi().register("module",dc.ZP,Zc)}({servicesManager:t,configuration:void 0===n?{}:n})},getViewportModule:function(e){var t=e.servicesManager,n=e.extensionManager;return[{name:"dicom-sr",component:function(e){return r.createElement(Gc,$c({servicesManager:t,extensionManager:n},e))}}]},getCommandsModule:function(e){e.servicesManager;return{definitions:{setToolActive:{commandFn:function(e){var t=e.toolName,n=e.element;t||console.warn("No toolname provided to setToolActive command");var r=function(e){var t=e;switch(e){case"Length":t="SRLength";break;case"Bidirectional":t="SRBidirectional";break;case"ArrowAnnotate":t="SRArrowAnnotate";break;case"EllipticalRoi":t="SREllipticalRoi"}return t}(t);cornerstoneTools.setToolActiveForElement(n,r,{mouseButtonMask:1})},storeContexts:[],options:{}}},defaultContext:"ACTIVE_VIEWPORT::STRUCTURED_REPORT"}},getSopClassHandlerModule:zc,onModeEnter:function(e){e.servicesManager.services.DisplaySetService.getDisplaySetCache().filter((function(e){return e.SOPClassHandlerId===dc._$})).forEach((function(e){e.isHydrated=!1}))}};var Kc={config:window?window.config:{},defaultExtensions:[ui,ms,uc,Jc]},Xc=r.createElement(br,Kc,null);Sr.render(Xc,document.getElementById("root"))},84179:function(e,t,n){var r={"./af":95286,"./af.js":95286,"./ar":6561,"./ar-dz":2146,"./ar-dz.js":2146,"./ar-kw":38047,"./ar-kw.js":38047,"./ar-ly":22833,"./ar-ly.js":22833,"./ar-ma":30186,"./ar-ma.js":30186,"./ar-sa":66922,"./ar-sa.js":66922,"./ar-tn":490,"./ar-tn.js":490,"./ar.js":6561,"./az":48641,"./az.js":48641,"./be":23299,"./be.js":23299,"./bg":21502,"./bg.js":21502,"./bm":24574,"./bm.js":24574,"./bn":11729,"./bn.js":11729,"./bo":9925,"./bo.js":9925,"./br":1988,"./br.js":1988,"./bs":85793,"./bs.js":85793,"./ca":60347,"./ca.js":60347,"./cs":10999,"./cs.js":10999,"./cv":81690,"./cv.js":81690,"./cy":72638,"./cy.js":72638,"./da":66820,"./da.js":66820,"./de":38413,"./de-at":15502,"./de-at.js":15502,"./de-ch":67569,"./de-ch.js":67569,"./de.js":38413,"./dv":15335,"./dv.js":15335,"./el":21406,"./el.js":21406,"./en-SG":43432,"./en-SG.js":43432,"./en-au":19612,"./en-au.js":19612,"./en-ca":87302,"./en-ca.js":87302,"./en-gb":21543,"./en-gb.js":21543,"./en-ie":96745,"./en-ie.js":96745,"./en-il":69560,"./en-il.js":69560,"./en-nz":87883,"./en-nz.js":87883,"./eo":38066,"./eo.js":38066,"./es":96730,"./es-do":61848,"./es-do.js":61848,"./es-us":32779,"./es-us.js":32779,"./es.js":96730,"./et":61386,"./et.js":61386,"./eu":49220,"./eu.js":49220,"./fa":81123,"./fa.js":81123,"./fi":95495,"./fi.js":95495,"./fo":15855,"./fo.js":15855,"./fr":93843,"./fr-ca":72251,"./fr-ca.js":72251,"./fr-ch":41713,"./fr-ch.js":41713,"./fr.js":93843,"./fy":91316,"./fy.js":91316,"./ga":70089,"./ga.js":70089,"./gd":39957,"./gd.js":39957,"./gl":28775,"./gl.js":28775,"./gom-latn":82190,"./gom-latn.js":82190,"./gu":22018,"./gu.js":22018,"./he":41636,"./he.js":41636,"./hi":96602,"./hi.js":96602,"./hr":91898,"./hr.js":91898,"./hu":23597,"./hu.js":23597,"./hy-am":86557,"./hy-am.js":86557,"./id":48186,"./id.js":48186,"./is":92004,"./is.js":92004,"./it":31032,"./it-ch":62219,"./it-ch.js":62219,"./it.js":31032,"./ja":31461,"./ja.js":31461,"./jv":40721,"./jv.js":40721,"./ka":22116,"./ka.js":22116,"./kk":31007,"./kk.js":31007,"./km":7765,"./km.js":7765,"./kn":3735,"./kn.js":3735,"./ko":86880,"./ko.js":86880,"./ku":98841,"./ku.js":98841,"./ky":24125,"./ky.js":24125,"./lb":10047,"./lb.js":10047,"./lo":16396,"./lo.js":16396,"./lt":93903,"./lt.js":93903,"./lv":4162,"./lv.js":4162,"./me":53933,"./me.js":53933,"./mi":4044,"./mi.js":4044,"./mk":26326,"./mk.js":26326,"./ml":5774,"./ml.js":5774,"./mn":9012,"./mn.js":9012,"./mr":52738,"./mr.js":52738,"./ms":77364,"./ms-my":35304,"./ms-my.js":35304,"./ms.js":77364,"./mt":35926,"./mt.js":35926,"./my":49515,"./my.js":49515,"./nb":38267,"./nb.js":38267,"./ne":68871,"./ne.js":68871,"./nl":130,"./nl-be":33615,"./nl-be.js":33615,"./nl.js":130,"./nn":4484,"./nn.js":4484,"./pa-in":75380,"./pa-in.js":75380,"./pl":80255,"./pl.js":80255,"./pt":15179,"./pt-br":43809,"./pt-br.js":43809,"./pt.js":15179,"./ro":71998,"./ro.js":71998,"./ru":13586,"./ru.js":13586,"./sd":65424,"./sd.js":65424,"./se":19412,"./se.js":19412,"./si":19220,"./si.js":19220,"./sk":47374,"./sk.js":47374,"./sl":67574,"./sl.js":67574,"./sq":62977,"./sq.js":62977,"./sr":76792,"./sr-cyrl":53388,"./sr-cyrl.js":53388,"./sr.js":76792,"./ss":41676,"./ss.js":41676,"./sv":89807,"./sv.js":89807,"./sw":39893,"./sw.js":39893,"./ta":81610,"./ta.js":81610,"./te":38921,"./te.js":38921,"./tet":16791,"./tet.js":16791,"./tg":7353,"./tg.js":7353,"./th":10035,"./th.js":10035,"./tl-ph":72526,"./tl-ph.js":72526,"./tlh":8730,"./tlh.js":8730,"./tr":59059,"./tr.js":59059,"./tzl":88459,"./tzl.js":88459,"./tzm":46357,"./tzm-latn":98904,"./tzm-latn.js":98904,"./tzm.js":46357,"./ug-cn":40014,"./ug-cn.js":40014,"./uk":87166,"./uk.js":87166,"./ur":42450,"./ur.js":42450,"./uz":76150,"./uz-latn":42939,"./uz-latn.js":42939,"./uz.js":76150,"./vi":62959,"./vi.js":62959,"./x-pseudo":76756,"./x-pseudo.js":76756,"./yo":21873,"./yo.js":21873,"./zh-cn":26077,"./zh-cn.js":26077,"./zh-hk":18230,"./zh-hk.js":18230,"./zh-tw":99603,"./zh-tw.js":99603};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=84179},32155:function(){},45503:function(){}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=n,a.amdD=function(){throw new Error("define cannot be used indirect")},e=[],a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.F={},a.E=function(e){Object.keys(a.F).map((function(t){a.F[t](e)}))},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return e+".bundle."+{63:"956ffbd9a80f756f2731",196:"02469277c9c797aef9e0",407:"f4abdacb09653e6db3db",668:"4851be16587769973311"}[e]+".js"},a.miniCssF=function(e){},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},a.l=function(e,n,r,o){if(t[e])t[e].push(n);else{var i,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==e){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.src=e),t[e]=[n];var d=function(n,r){i.onerror=i.onload=null,clearTimeout(f);var a=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(r)})),n)return n(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),s&&document.head.appendChild(i)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},a.p="/",function(){var e={143:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,a){r=e[t]=[n,a]}));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(function(n){if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}},a.F.j=function(t){if(!a.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");a.nc&&n.setAttribute("nonce",a.nc),n.rel="prefetch",n.as="script",n.href=a.p+a.u(t),document.head.appendChild(n)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],s=n[1],c=n[2],l=0;for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a);for(t&&t(n);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[i[l]]=0;return a.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.O(0,[143],(function(){[196,407,63,668].map(a.E)}),5);var o=a.O(void 0,[400],(function(){return a(15066)}));o=a.O(o)}();
//# sourceMappingURL=app.bundle.3f65ae5e095a9c2d60ce.js.map